/****************************/
/* Copyright 2023 Zygomatic */
/* https://www.zygomatic.nl */
/****************************/

/*
 Pickr 1.6.0 MIT | https://github.com/Simonwep/pickr */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var d=0;return function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,f){a!=Array.prototype&&a!=Object.prototype&&(a[d]=f.value)};$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}return globalThis};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,d){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(f){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(f||"")+"_"+d++,f)}var d=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.makeIterator=function(a){var d="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return d?d.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var d,f=[];!(d=a.next()).done;)f.push(d.value);return f};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.polyfill=function(a,d,f,k){if(d){f=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var p=a[k];p in f||(f[p]={});f=f[p]}a=a[a.length-1];k=f[a];d=d(k);d!=k&&null!=d&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("globalThis",function(a){return a||$jscomp.global},"es_next","es3");
$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var f=0,k={next:function(){if(f<a.length){var p=f++;return{value:d(p,a[p]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,f,k){f=null!=f?f:function(a){return a};var d=[],t="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof t){a=t.call(a);for(var u=0;!(t=a.next()).done;)d.push(f.call(k,t.value,u++))}else for(t=a.length,u=0;u<t;u++)d.push(f.call(k,a[u],u));return d}},"es6","es3");
$jscomp.checkStringArgs=function(a,d,f){if(null==a)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var d=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var k="";a;)if(a&1&&(k+=d),a>>>=1)d+=d;return k}},"es6","es3");$jscomp.stringPadding=function(a,d){a=void 0!==a?String(a):" ";return 0<d&&a?a.repeat(Math.ceil(d/a.length)).substring(0,d):""};
$jscomp.polyfill("String.prototype.padStart",function(a){return a?a:function(a,f){var d=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(f,a-d.length)+d}},"es8","es3");$jscomp.owns=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,d){for(var f=1;f<arguments.length;f++){var k=arguments[f];if(k)for(var p in k)$jscomp.owns(k,p)&&(a[p]=k[p])}return a};
$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,f){var d=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var p=d.length,t=a.length;f=Math.max(0,Math.min(f|0,d.length));for(var u=0;u<t&&f<p;)if(d[f++]!=a[u++])return!1;return u>=t}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,f){return a===f?0!==a||1/a===1/f:a!==a&&f!==f}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,f){var d=this;d instanceof String&&(d=String(d));var p=d.length;f=f||0;for(0>f&&(f=Math.max(f+p,0));f<p;f++){var t=d[f];if(t===a||Object.is(t,a))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,f){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,f||0)}},"es6","es3");
$jscomp.findInternal=function(a,d,f){a instanceof String&&(a=String(a));for(var k=a.length,p=0;p<k;p++){var t=a[p];if(d.call(f,t,p,a))return{i:p,v:t}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,f){return $jscomp.findInternal(this,a,f).v}},"es6","es3");
!function(a,d){"object"==typeof exports&&"object"==typeof module?module.exports=d():"function"==typeof define&&define.amd?define([],d):"object"==typeof exports?exports.Pickr=d():a.Pickr=d()}(window,function(){return function(a){function d(k){if(f[k])return f[k].exports;var p=f[k]={i:k,l:!1,exports:{}};return a[k].call(p.exports,p,p.exports,d),p.l=!0,p.exports}var f={};return d.m=a,d.c=f,d.d=function(a,f,t){d.o(a,f)||Object.defineProperty(a,f,{enumerable:!0,get:t})},d.r=function(a){$jscomp.initSymbol();
$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},d.t=function(a,f){if((1&f&&(a=d(a)),8&f)||4&f&&"object"==typeof a&&a&&a.__esModule)return a;var k=Object.create(null);if(d.r(k),Object.defineProperty(k,"default",{enumerable:!0,value:a}),2&f&&"string"!=typeof a)for(var p in a)d.d(k,p,function(f){return a[f]}.bind(null,p));return k},d.n=function(a){var f=
a&&a.__esModule?function(){return a.default}:function(){return a};return d.d(f,"a",f),f},d.o=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)},d.p="",d(d.s=1)}([function(a){a.exports=JSON.parse('{"a":"1.6.0"}')},function(a,d,f){function k(b,c){var a=Object.keys(b);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(b);c&&(q=q.filter(function(c){return Object.getOwnPropertyDescriptor(b,c).enumerable}));a.push.apply(a,q)}return a}function p(b){for(var c=1;c<arguments.length;c++){var a=
null!=arguments[c]?arguments[c]:{};c%2?k(Object(a),!0).forEach(function(c){var e=a[c];c in b?Object.defineProperty(b,c,{value:e,enumerable:!0,configurable:!0,writable:!0}):b[c]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach(function(c){Object.defineProperty(b,c,Object.getOwnPropertyDescriptor(a,c))})}return b}function t(b,c,a,q,l){l=void 0===l?{}:l;c instanceof HTMLCollection||c instanceof NodeList?c=Array.from(c):Array.isArray(c)||
(c=[c]);Array.isArray(a)||(a=[a]);for(var e=$jscomp.makeIterator(c),g=e.next();!g.done;g=e.next()){g=g.value;for(var f=$jscomp.makeIterator(a),d=f.next();!d.done;d=f.next())g[b](d.value,q,p({capture:!1},l))}return Array.prototype.slice.call(arguments,1)}function u(b){var c=document.createElement("div");return c.innerHTML=b.trim(),c.firstElementChild}function H(b){var c=function(c,b){var a=c.getAttribute(b);return c.removeAttribute(b),a},a=function(b,e){e=void 0===e?{}:e;var h=c(b,":obj"),g=c(b,":ref");
h=h?e[h]={}:e;g&&(e[g]=b);b=$jscomp.makeIterator(Array.from(b.children));for(g=b.next();!g.done;g=b.next()){g=g.value;var l=c(g,":arr"),q=a(g,l?{}:h);l&&(h[l]||(h[l]=[])).push(Object.keys(q).length?q:g)}return e};return a(u(b))}function I(b){var c=b.path||b.composedPath&&b.composedPath();if(c)return c;var a=b.target.parentElement;for(c=[b.target,a];a=a.parentElement;)c.push(a);return c.push(document,window),c}function J(b){return b instanceof Element?b:"string"==typeof b?b.split(/>>/g).reduce(function(b,
a,q,l){return b=b.querySelector(a),q<l.length-1?b.shadowRoot:b},document):null}function K(b,c){function a(a){var e=[.001,.01,.1][Number(a.shiftKey||2*a.ctrlKey)]*(0>a.deltaY?1:-1),h=0,g=b.selectionStart;b.value=b.value.replace(/[\d.]+/g,function(b,a){return a<=g&&a+b.length>=g?(g=a,c(Number(b),e,h)):(h++,b)});b.focus();b.setSelectionRange(g,g);a.preventDefault();b.dispatchEvent(new Event("input"))}c=void 0===c?function(b){return b}:c;r(b,"focus",function(){return r(window,"wheel",a,{passive:!1})});
r(b,"blur",function(){return w(window,"wheel",a)})}function E(b,c,a){c/=100;a/=100;var e=N(b=b/360*6),l=b-e;b=a*(1-c);var h=a*(1-l*c);c=a*(1-(1-l)*c);e%=6;return[255*[a,h,b,b,c,a][e],255*[c,a,a,h,b,b][e],255*[b,b,c,a,a,h][e]]}function O(b,c,a){var e=(2-(c/=100))*(a/=100)/2;return 0!==e&&(c=1===e?0:.5>e?c*a/(2*e):c*a/(2-2*e)),[b,100*c,100*e]}function F(b,c,a){var e=A(b/=255,c/=255,a/=255),l=P(b,c,a),h=l-e;if(0===h)var g=e=0;else{e=h/l;var f=((l-b)/6+h/2)/h,d=((l-c)/6+h/2)/h;h=((l-a)/6+h/2)/h;b===l?
g=h-d:c===l?g=1/3+f-h:a===l&&(g=2/3+d-f);0>g?g+=1:1<g&&--g}return[360*g,100*e,100*l]}function Q(b,c,a,f){return c/=100,a/=100,[].concat($jscomp.arrayFromIterable(F(255*(1-A(1,b/100*(1-(f/=100))+f)),255*(1-A(1,c*(1-f)+f)),255*(1-A(1,a*(1-f)+f)))))}function R(b,c,a){c/=100;var e=2*(c*=.5>(a/=100)?a:1-a)/(a+c)*100;c=100*(a+c);return[b,isNaN(e)?0:e,c]}function S(b){return F.apply(null,$jscomp.arrayFromIterable(b.match(/.{2}/g).map(function(b){return parseInt(b,16)})))}function T(b){b=b.match(/^[a-zA-Z]+$/)?
function(b){if("black"===b.toLowerCase())return"#000";var a=document.createElement("canvas").getContext("2d");return a.fillStyle=b,"#000"===a.fillStyle?null:a.fillStyle}(b):b;var a={cmyk:/^cmyk[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)/i,rgba:/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsla:/^((hsla)|hsl)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsva:/^((hsva)|hsv)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},
e=function(b){return b.map(function(b){return/^(|\d+)\.\d+|\d+$/.test(b)?Number(b):void 0})},f,l;a:for(l in a)if(f=a[l].exec(b)){var h=function(b){return!!f[2]==("number"==typeof b)};switch(l){case "cmyk":e=$jscomp.makeIterator(e(f));e.next();h=e.next().value;b=e.next().value;a=e.next().value;e=e.next().value;if(100<h||100<b||100<a||100<e)break a;return{values:Q(h,b,a,e),type:l};case "rgba":var g=$jscomp.makeIterator(e(f));g.next();g.next();g.next();b=g.next().value;a=g.next().value;e=g.next().value;
g=g.next().value;if(255<b||255<a||255<e||0>g||1<g||!h(g))break a;return{values:[].concat($jscomp.arrayFromIterable(F(b,a,e)),[g]),a:g,type:l};case "hexa":return h=$jscomp.makeIterator(f),h.next(),b=h.next().value,4!==b.length&&3!==b.length||(b=b.split("").map(function(b){return b+b}).join("")),h=b.substring(0,6),b=b.substring(6),b=b?parseInt(b,16)/255:void 0,{values:[].concat($jscomp.arrayFromIterable(S(h)),[b]),a:b,type:l};case "hsla":g=$jscomp.makeIterator(e(f));g.next();g.next();g.next();b=g.next().value;
a=g.next().value;e=g.next().value;g=g.next().value;if(360<b||100<a||100<e||0>g||1<g||!h(g))break a;return{values:[].concat($jscomp.arrayFromIterable(R(b,a,e)),[g]),a:g,type:l};case "hsva":g=$jscomp.makeIterator(e(f));g.next();g.next();g.next();b=g.next().value;a=g.next().value;e=g.next().value;g=g.next().value;if(360<b||100<a||100<e||0>g||1<g||!h(g))break a;return{values:[b,a,e,g],a:g,type:l}}}return{values:null,type:null}}function z(b,a,e,f){var c=function(b,a){return function(c){c=void 0===c?-1:
c;return a(~c?b.map(function(b){return Number(b.toFixed(c))}):b)}},h={h:void 0===b?0:b,s:void 0===a?0:a,v:void 0===e?0:e,a:void 0===f?1:f,toHSVA:function(){var b=[h.h,h.s,h.v,h.a];return b.toString=c(b,function(b){return"hsva(".concat(b[0],", ").concat(b[1],"%, ").concat(b[2],"%, ").concat(h.a,")")}),b},toHSLA:function(){var b=[].concat($jscomp.arrayFromIterable(O(h.h,h.s,h.v)),[h.a]);return b.toString=c(b,function(b){return"hsla(".concat(b[0],", ").concat(b[1],"%, ").concat(b[2],"%, ").concat(h.a,
")")}),b},toRGBA:function(){var b=[].concat($jscomp.arrayFromIterable(E(h.h,h.s,h.v)),[h.a]);return b.toString=c(b,function(b){return"rgba(".concat(b[0],", ").concat(b[1],", ").concat(b[2],", ").concat(h.a,")")}),b},toCMYK:function(){var b=function(b,a,c){c=E(b,a,c);b=c[0]/255;a=c[1]/255;c=c[2]/255;var e=A(1-b,1-a,1-c);return[100*(1===e?0:(1-b-e)/(1-e)),100*(1===e?0:(1-a-e)/(1-e)),100*(1===e?0:(1-c-e)/(1-e)),100*e]}(h.h,h.s,h.v);return b.toString=c(b,function(b){return"cmyk(".concat(b[0],"%, ").concat(b[1],
"%, ").concat(b[2],"%, ").concat(b[3],"%)")}),b},toHEXA:function(){var b=function(b,a,c){return E(b,a,c).map(function(b){return V(b).toString(16).padStart(2,"0")})}(h.h,h.s,h.v),a=1<=h.a?"":Number((255*h.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return a&&b.push(a),b.toString=function(){return"#".concat(b.join("").toUpperCase())},b},clone:function(){return z(h.h,h.s,h.v,h.a)}};return h}function B(b){var a={options:Object.assign({lock:null,onchange:function(){return 0},onstop:function(){return 0}},
b),_keyboard:function(b){var c=b.type,e=b.key;if(document.activeElement===a.options.wrapper){var f=a.options.lock,l="ArrowUp"===e,d="ArrowRight"===e,q="ArrowDown"===e,n="ArrowLeft"===e;"keydown"===c&&(l||d||q||n)?(e=c=0,"v"===f?c=l||d?1:-1:"h"===f?c=l||d?-1:1:(e=l?-1:q?1:0,c=n?-1:d?1:0),a.update(C(a.cache.x+.01*c),C(a.cache.y+.01*e)),b.preventDefault()):e.startsWith("Arrow")&&(a.options.onstop(),b.preventDefault())}},_tapstart:function(b){r(document,["mouseup","touchend","touchcancel"],a._tapstop);
r(document,["mousemove","touchmove"],a._tapmove);b.preventDefault();a._tapmove(b)},_tapmove:function(b){var c=a,e=c.options,f=c.cache;c=e.lock;var l=e.element,d=e.wrapper.getBoundingClientRect(),q=0,n=0;b?(n=b&&b.touches&&b.touches[0],q=b?(n||b).clientX:0,n=b?(n||b).clientY:0,q<d.left?q=d.left:q>d.left+d.width&&(q=d.left+d.width),n<d.top?n=d.top:n>d.top+d.height&&(n=d.top+d.height),q-=d.left,n-=d.top):f&&(q=f.x*d.width,n=f.y*d.height);"h"!==c&&(l.style.left="calc(".concat(q/d.width*100,"% - ").concat(l.offsetWidth/
2,"px)"));"v"!==c&&(l.style.top="calc(".concat(n/d.height*100,"% - ").concat(l.offsetHeight/2,"px)"));a.cache={x:q/d.width,y:n/d.height};b=C(q/d.width);d=C(n/d.height);switch(c){case "v":return e.onchange(b);case "h":return e.onchange(d);default:return e.onchange(b,d)}},_tapstop:function(){a.options.onstop();w(document,["mouseup","touchend","touchcancel"],a._tapstop);w(document,["mousemove","touchmove"],a._tapmove)},trigger:function(){a._tapmove()},update:function(b,c){b=void 0===b?0:b;c=void 0===
c?0:c;var e=a.options.wrapper.getBoundingClientRect(),f=e.left,d=e.top,h=e.width;e=e.height;"h"===a.options.lock&&(c=b);a._tapmove({clientX:f+h*b,clientY:d+e*c})},destroy:function(){var b=a,c=b.options,e=b._tapstart;w(document,["keydown","keyup"],b._keyboard);w([c.wrapper,c.element],"mousedown",e);w([c.wrapper,c.element],"touchstart",e,{passive:!1})}},e=a;b=e.options;var f=e._tapstart;e=e._keyboard;return r([b.wrapper,b.element],"mousedown",f),r([b.wrapper,b.element],"touchstart",f,{passive:!1}),
r(document,["keydown","keyup"],e),a}function L(b){b=void 0===b?{}:b;b=Object.assign({onchange:function(){return 0},className:"",elements:[]},b);var a=r(b.elements,"click",function(a){b.elements.forEach(function(c){return c.classList[a.target===c?"add":"remove"](b.className)});b.onchange(a)});return{destroy:function(){return w.apply(null,$jscomp.arrayFromIterable(a))}}}function M(b){var a=b.el,e=b.reference,f=void 0===b.padding?8:b.padding,d={start:"sme",middle:"mse",end:"ems"},h={top:"tbrl",right:"rltb",
bottom:"btrl",left:"lrbt"},g=function(b){b=void 0===b?{}:b;return function(a,c){if(c=void 0===c?b[a]:c)return c;var e=$jscomp.makeIterator(a.split("-"));c=e.next().value;e=e.next().value;return b[a]={position:c,variant:void 0===e?"middle":e,isVertical:"top"===c||"bottom"===c}}}();return{update:function(b,c){c=void 0===c?!1:c;var l=g(b);b=l.position;var q=l.variant,n=l.isVertical;l=e.getBoundingClientRect();var k=a.getBoundingClientRect(),m={},p=function(b,a,c){var e="top"===c,f=e?k.height:k.width;
e=window[e?"innerHeight":"innerWidth"];b=$jscomp.makeIterator(b);for(var d=b.next();!d.done;d=b.next()){d=a[d.value];var l=m[c]="".concat(d,"px");if(0<d&&d+f<e)return l}return null};n=$jscomp.makeIterator([n,!n]);for(var y=n.next();!y.done;y=n.next()){var x=y.value;y=x?"top":"left";var r=x?"left":"top",t=p(h[b],x?{t:l.top-k.height-f,b:l.bottom+f}:{r:l.right+f,l:l.left-k.width-f},y);x=p(d[q],x?{s:l.left+l.width-k.width,m:-k.width/2+(l.left+l.width/2),e:l.left}:{s:l.bottom-k.height,m:l.bottom-l.height/
2-k.height/2,e:l.bottom-l.height},r);if(t&&x)return a.style[r]=x,void(a.style[y]=t)}c?(a.style.top="".concat((window.innerHeight-k.height)/2,"px"),a.style.left="".concat((window.innerWidth-k.width)/2,"px")):(a.style.left=m.left,a.style.top=m.top)}}}function v(b,a,e){return a in b?Object.defineProperty(b,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):b[a]=e,b}f.r(d);a={};f.r(a);f.d(a,"on",function(){return r});f.d(a,"off",function(){return w});f.d(a,"createElementFromString",function(){return u});
f.d(a,"createFromTemplate",function(){return H});f.d(a,"eventPath",function(){return I});f.d(a,"resolveElement",function(){return J});f.d(a,"adjustableInputNumbers",function(){return K});var r=t.bind(null,"addEventListener"),w=t.bind(null,"removeEventListener");f=f(0);var D=Math,A=D.min,P=D.max,N=D.floor,V=D.round,C=function(b){return Math.max(Math.min(b,1),0)},m=function(b){var a=this;v(this,"_initializingActive",!0);v(this,"_recalc",!0);v(this,"_nanopop",null);v(this,"_root",null);v(this,"_color",
z());v(this,"_lastColor",z());v(this,"_swatchColors",[]);v(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]});var e=this.options=b=Object.assign({appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",
adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"},b),f=e.swatches,d=e.components,h=e.sliders,g=e.lockOpacity,k=e.padding;["nano","monolith"].includes(e.theme)&&!h&&(b.sliders="h");d.interaction||(d.interaction={});e=d.preview;h=d.opacity;var m=d.hue,p=d.palette;d.opacity=!g&&h;d.palette=p||e||h||m;this._preBuild();this._buildComponents();this._bindEvents();this._finalBuild();f&&f.length&&f.forEach(function(b){return a.addSwatch(b)});f=this._root;d=f.button;var G=f.app;this._nanopop=M({reference:d,
padding:k,el:G});d.setAttribute("role","button");d.setAttribute("aria-label",this._t("btn:toggle"));var n=this;requestAnimationFrame(function W(){if(!G.offsetWidth&&G.parentElement!==b.container)return requestAnimationFrame(W);n.setColor(b.default);n._rePositioningPicker();b.defaultRepresentation&&(n._representation=b.defaultRepresentation,n.setColorRepresentation(n._representation));b.showAlways&&n.show();n._initializingActive=!1;n._emit("init")})};m.prototype._preBuild=function(){for(var b=this.options,
a=$jscomp.makeIterator(["el","container"]),e=a.next();!e.done;e=a.next())e=e.value,b[e]=J(b[e]);this._root=function(b){var a=b.options,c=a.components,e=a.inline,d=a.appClass,f=a.theme,q=a.lockOpacity,k=function(b){return b?"":'style="display:none" hidden'},n=function(a){return b._t(a)};a=H('\n      <div :ref="root" class="pickr">\n\n        '.concat(a.useAsButton?"":'<button type="button" :ref="button" class="pcr-button"></button>','\n\n        <div :ref="app" class="pcr-app ').concat(d||"",'" data-theme="').concat(f,
'" ').concat(e?'style="position: unset"':"",' aria-label="').concat(n("ui:dialog"),'" role="window">\n          <div class="pcr-selection" ').concat(k(c.palette),'>\n            <div :obj="preview" class="pcr-color-preview" ').concat(k(c.preview),'>\n              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="').concat(n("btn:last-color"),'"></button>\n              <div :ref="currentColor" class="pcr-current-color"></div>\n            </div>\n\n            <div :obj="palette" class="pcr-color-palette">\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="').concat(n("aria:palette"),
'" role="listbox"></div>\n            </div>\n\n            <div :obj="hue" class="pcr-color-chooser" ').concat(k(c.hue),'>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="').concat(n("aria:hue"),'" role="slider"></div>\n            </div>\n\n            <div :obj="opacity" class="pcr-color-opacity" ').concat(k(c.opacity),'>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="').concat(n("aria:opacity"),
'" role="slider"></div>\n            </div>\n          </div>\n\n          <div class="pcr-swatches ').concat(c.palette?"":"pcr-last",'" :ref="swatches"></div>\n\n          <div :obj="interaction" class="pcr-interaction" ').concat(k(Object.keys(c.interaction).length),'>\n            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ').concat(k(c.interaction.input),' aria-label="').concat(n("aria:input"),'">\n\n            <input :arr="options" class="pcr-type" data-type="HEXA" value="').concat(q?
"HEX":"HEXA",'" type="button" ').concat(k(c.interaction.hex),'>\n            <input :arr="options" class="pcr-type" data-type="RGBA" value="').concat(q?"RGB":"RGBA",'" type="button" ').concat(k(c.interaction.rgba),'>\n            <input :arr="options" class="pcr-type" data-type="HSLA" value="').concat(q?"HSL":"HSLA",'" type="button" ').concat(k(c.interaction.hsla),'>\n            <input :arr="options" class="pcr-type" data-type="HSVA" value="').concat(q?"HSV":"HSVA",'" type="button" ').concat(k(c.interaction.hsva),
'>\n            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ').concat(k(c.interaction.cmyk),'>\n\n            <input :ref="save" class="pcr-save" value="').concat(n("btn:save"),'" type="button" ').concat(k(c.interaction.save),' aria-label="').concat(n("aria:btn:save"),'">\n            <input :ref="cancel" class="pcr-cancel" value="').concat(n("btn:cancel"),'" type="button" ').concat(k(c.interaction.cancel),' aria-label="').concat(n("aria:btn:cancel"),'">\n            <input :ref="clear" class="pcr-clear" value="').concat(n("btn:clear"),
'" type="button" ').concat(k(c.interaction.clear),' aria-label="').concat(n("aria:btn:clear"),'">\n          </div>\n        </div>\n      </div>\n    '));var m=a.interaction;return m.options.find(function(b){return!b.hidden&&!b.classList.add("active")}),m.type=function(){return m.options.find(function(b){return b.classList.contains("active")})},a}(this);b.useAsButton&&(this._root.button=b.el);b.container.appendChild(this._root.root)};m.prototype._finalBuild=function(){var b=this.options,a=this._root;
if(b.container.removeChild(a.root),b.inline){var e=b.el.parentElement;b.el.nextSibling?e.insertBefore(a.app,b.el.nextSibling):e.appendChild(a.app)}else b.container.appendChild(a.app);b.useAsButton?b.inline&&b.el.remove():b.el.parentNode.replaceChild(a.root,b.el);b.disabled&&this.disable();b.comparison||(a.button.style.transition="none",b.useAsButton||(a.preview.lastColor.style.transition="none"));this.hide()};m.prototype._buildComponents=function(){var b=this,a=this,e=this.options.components,d=(a.options.sliders||
"v").repeat(2),f=$jscomp.makeIterator(d.match(/^[vh]+$/g)?d:[]);d=f.next().value;f=f.next().value;var h=function(){return b._color||(b._color=b._lastColor.clone())},g={palette:B({element:a._root.palette.picker,wrapper:a._root.palette.palette,onstop:function(){return a._emit("changestop",a)},onchange:function(b,c){if(e.palette){var d=h(),f=a._root,g=a.options,l=f.preview,k=l.lastColor;l=l.currentColor;a._recalc&&(d.s=100*b,d.v=100-100*c,0>d.v&&(d.v=0),a._updateOutput());b=d.toRGBA().toString(0);this.element.style.background=
b;this.wrapper.style.background="\n                        linear-gradient(to top, rgba(0, 0, 0, ".concat(d.a,"), transparent),\n                        linear-gradient(to left, hsla(").concat(d.h,", 100%, 50%, ").concat(d.a,"), rgba(255, 255, 255, ").concat(d.a,"))\n                    ");g.comparison?g.useAsButton||a._lastColor||(k.style.color=b):(f.button.style.color=b,f.button.classList.remove("clear"));d=d.toHEXA().toString();f=$jscomp.makeIterator(a._swatchColors);for(g=f.next();!g.done;g=f.next())g=
g.value,g.el.classList[d===g.color.toHEXA().toString()?"add":"remove"]("pcr-active");l.style.color=b}}}),hue:B({lock:"v"===f?"h":"v",element:a._root.hue.picker,wrapper:a._root.hue.slider,onstop:function(){return a._emit("changestop",a)},onchange:function(b){if(e.hue&&e.palette){var c=h();a._recalc&&(c.h=360*b);this.element.style.backgroundColor="hsl(".concat(c.h,", 100%, 50%)");g.palette.trigger()}}}),opacity:B({lock:"v"===d?"h":"v",element:a._root.opacity.picker,wrapper:a._root.opacity.slider,onstop:function(){return a._emit("changestop",
a)},onchange:function(b){if(e.opacity&&e.palette){var c=h();a._recalc&&(c.a=Math.round(100*b)/100);this.element.style.background="rgba(0, 0, 0, ".concat(c.a,")");g.palette.trigger()}}}),selectable:L({elements:a._root.interaction.options,className:"active",onchange:function(b){a._representation=b.target.getAttribute("data-type").toUpperCase();a._recalc&&a._updateOutput()}})};this._components=g};m.prototype._bindEvents=function(){var b=this,a=this._root,e=this.options,d=[r(a.interaction.clear,"click",
function(){return b._clearColor()}),r([a.interaction.cancel,a.preview.lastColor],"click",function(){b._emit("cancel",b);b.setHSVA.apply(b,[].concat($jscomp.arrayFromIterable((b._lastColor||b._color).toHSVA()),[!0]))}),r(a.interaction.save,"click",function(){b.applyColor()||e.showAlways||b.hide()}),r(a.interaction.result,["keyup","input"],function(a){b.setColor(a.target.value,!0)&&!b._initializingActive&&b._emit("change",b._color);a.stopImmediatePropagation()}),r(a.interaction.result,["focus","blur"],
function(a){b._recalc="blur"===a.type;b._recalc&&b._updateOutput()}),r([a.palette.palette,a.palette.picker,a.hue.slider,a.hue.picker,a.opacity.slider,a.opacity.picker],["mousedown","touchstart"],function(){return b._recalc=!0})];if(!e.showAlways){var f=e.closeWithKey;d.push(r(a.button,"click",function(){return b.isOpen()?b.hide():b.show()}),r(document,"keyup",function(a){return b.isOpen()&&(a.key===f||a.code===f)&&b.hide()}),r(document,["touchstart","mousedown"],function(c){b.isOpen()&&!I(c).some(function(b){return b===
a.app||b===a.button})&&b.hide()},{capture:!0}))}if(e.adjustableNumbers){var h={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};K(a.interaction.result,function(a,c,e){var d=h[b.getColorRepresentation().toLowerCase()];return d?(e=d[e],a+=100<=e?1E3*c:c,0>=a?0:Number((a<e?a:e).toPrecision(3))):a})}if(e.autoReposition&&!e.inline){var g=null,k=this;d.push(r(window,["scroll","resize"],function(){k.isOpen()&&(e.closeOnScroll&&k.hide(),null===g?(g=setTimeout(function(){return g=
null},100),requestAnimationFrame(function U(){k._rePositioningPicker();null!==g&&requestAnimationFrame(U)})):(clearTimeout(g),g=setTimeout(function(){return g=null},100)))},{capture:!0}))}this._eventBindings=d};m.prototype._rePositioningPicker=function(){var a=this.options;a.inline||this._nanopop.update(a.position,!this._recalc)};m.prototype._updateOutput=function(){var a=this._root,c=this._color,e=this.options;if(a.interaction.type()){var d="to".concat(a.interaction.type().getAttribute("data-type"));
a.interaction.result.value="function"==typeof c[d]?c[d]().toString(e.outputPrecision):""}this._root.button.style.color=this._color.toRGBA().toString(0);!this._initializingActive&&this._recalc&&this._emit("change",c)};m.prototype._clearColor=function(a){a=void 0===a?!1:a;var b=this._root,e=this.options;e.useAsButton||(b.button.style.color="rgba(0, 0, 0, 0.15)");b.button.classList.add("clear");e.showAlways||this.hide();this._lastColor=null;this._initializingActive||a||(this._emit("save",null),this._emit("clear",
this))};m.prototype._parseLocalColor=function(a){var b=T(a);a=b.values;var e=b.type;b=b.a;var d=this.options.lockOpacity;return a&&3===a.length&&(a[3]=void 0),{values:!a||d&&void 0!==b&&1!==b?null:a,type:e}};m.prototype._emit=function(a,c){for(var b=[],d=1;d<arguments.length;++d)b[d-1]=arguments[d];var f=this;this._eventListener[a].forEach(function(a){return a.apply(null,[].concat($jscomp.arrayFromIterable(b),[f]))})};m.prototype._t=function(a){return this.options.i18n[a]||m.I18N_DEFAULTS[a]};m.prototype.on=
function(a,c){return"function"==typeof c&&"string"==typeof a&&a in this._eventListener&&this._eventListener[a].push(c),this};m.prototype.off=function(a,c){if(a=this._eventListener[a])c=a.indexOf(c),~c&&a.splice(c,1);return this};m.prototype.addSwatch=function(a){var b=this,e=this._parseLocalColor(a).values;if(e){a=this._swatchColors;var d=this._root,f=z.apply(null,$jscomp.arrayFromIterable(e));e=u('<button type="button" style="color: '.concat(f.toRGBA().toString(0),'" aria-label="').concat(this._t("btn:swatch"),
'"/>'));return d.swatches.appendChild(e),a.push({el:e,color:f}),this._eventBindings.push(r(e,"click",function(){b.setHSVA.apply(b,[].concat($jscomp.arrayFromIterable(f.toHSVA()),[!0]));b._emit("swatchselect",f);b._emit("change",f)})),!0}return!1};m.prototype.removeSwatch=function(a){var b=this._swatchColors[a];return b?(this._root.swatches.removeChild(b.el),this._swatchColors.splice(a,1),!0):!1};m.prototype.applyColor=function(a){a=void 0===a?!1:a;var b=this._root,e=b.preview;b=b.button;var d=this._color.toRGBA().toString(0);
return e.lastColor.style.color=d,this.options.useAsButton||(b.style.color=d),b.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||a||this._emit("save",this._color),this};m.prototype.destroy=function(){var a=this;this._eventBindings.forEach(function(a){return w.apply(null,$jscomp.arrayFromIterable(a))});Object.keys(this._components).forEach(function(b){return a._components[b].destroy()})};m.prototype.destroyAndRemove=function(){var a=this;this.destroy();var c=this._root,
e=c.root;c=c.app;e.parentElement&&e.parentElement.removeChild(e);c.parentElement.removeChild(c);Object.keys(this).forEach(function(b){return a[b]=null})};m.prototype.hide=function(){return this._root.app.classList.remove("visible"),this._emit("hide",this),this};m.prototype.show=function(){return this.options.disabled||(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this)),this};m.prototype.isOpen=function(){return this._root.app.classList.contains("visible")};
m.prototype.setHSVA=function(a,c,e,d,f){a=void 0===a?360:a;c=void 0===c?0:c;e=void 0===e?0:e;d=void 0===d?1:d;f=void 0===f?!1:f;var b=this._recalc;if(this._recalc=!1,0>a||360<a||0>c||100<c||0>e||100<e||0>d||1<d)return!1;this._color=z(a,c,e,d);var g=this._components,l=g.opacity,k=g.palette;return g.hue.update(a/360),l.update(d),k.update(c/100,1-e/100),f||this.applyColor(),b&&this._updateOutput(),this._recalc=b,!0};m.prototype.setColor=function(a,c){c=void 0===c?!1:c;if(null===a)return this._clearColor(c),
!0;var b=this._parseLocalColor(a);a=b.values;b=b.type;if(a){var d=b.toUpperCase(),f=this._root.interaction.options;if((b=f.find(function(a){return a.getAttribute("data-type")===d}))&&!b.hidden){f=$jscomp.makeIterator(f);for(var h=f.next();!h.done;h=f.next())h=h.value,h.classList[h===b?"add":"remove"]("active")}return!!this.setHSVA.apply(this,[].concat($jscomp.arrayFromIterable(a),[c]))&&this.setColorRepresentation(d)}return!1};m.prototype.setColorRepresentation=function(a){return a=a.toUpperCase(),
!!this._root.interaction.options.find(function(b){return b.getAttribute("data-type").startsWith(a)&&!b.click()})};m.prototype.getColorRepresentation=function(){return this._representation};m.prototype.getColor=function(){return this._color};m.prototype.getSelectedColor=function(){return this._lastColor};m.prototype.getRoot=function(){return this._root};m.prototype.disable=function(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this};m.prototype.enable=function(){return this.options.disabled=
!1,this._root.button.classList.remove("disabled"),this};v(m,"utils",a);v(m,"libs",{HSVaColor:z,Moveable:B,Nanopop:M,Selectable:L});v(m,"version",f.a);v(m,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field",
"aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"});v(m,"create",function(a){return new m(a)});d.default=m}]).default});

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,e,f){a instanceof String&&(a=String(a));for(var l=a.length,k=0;k<l;k++){var m=a[k];if(e.call(f,m,k,a))return{i:k,v:m}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,f){a!=Array.prototype&&a!=Object.prototype&&(a[e]=f.value)};$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var e=0;e<a.length;++e){var f=a[e];if(f&&f.Math==Math)return f}return globalThis};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,e,f,l){if(e){f=$jscomp.global;a=a.split(".");for(l=0;l<a.length-1;l++){var k=a[l];k in f||(f[k]={});f=f[k]}a=a[a.length-1];l=f[a];e=e(l);e!=l&&null!=e&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,f){return $jscomp.findInternal(this,a,f).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var e=0;return function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}}};
$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,e){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:e})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(f){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(f||"")+"_"+e++,f)}var e=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,e){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var f=0,l={next:function(){if(f<a.length){var k=f++;return{value:e(k,a[k]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
(function(a){var e={},f={arabic:"Arabic",bengali:"Bengali","chinese-hongkong":"Chinese (Hong Kong)","chinese-simplified":"Chinese (Simplified","chinese-traditional":"Chinese (Traditional)",cyrillic:"Cyrillic","cyrillic-ext":"Cyrillic Extended",devanagari:"Devanagari",greek:"Greek","greek-ext":"Greek Extended",gujarati:"Gujarati",gurmukhi:"Gurmukhi",hebrew:"Hebrew",japanese:"Japanese",kannada:"Kannada",khmer:"Khmer",korean:"Korean",latin:"Latin","latin-ext":"Latin Extended",malayalam:"Malayalam",myanmar:"Myanmar",
oriya:"Oriya",sinhala:"Sinhala",tamil:"Tamil",telugu:"Telugu",thai:"Thai",tibetan:"Tibetan",vietnamese:"Vietnamese"},l=["serif","sans-serif","display","handwriting","monospace"];a.fn.fontpicker=function(k){var m=function(a){var b=a.parentElement,c=a.getBoundingClientRect();b=b.getBoundingClientRect();c.bottom>b.bottom&&a.scrollIntoView(!1);c.top<b.top&&a.scrollIntoView()},n=function(a,b){var c=new Date,d={},h;var g=(g=/(?:^|; )jqfs=([^;]*)/.exec(document.cookie))?decodeURIComponent(g[1]):null;if(null!==
g)for(h in g=g.split("||"),g)try{var e=g[h].split("|",2);d[e[0]]=e[1]}catch(A){}if(1===arguments.length)return d[a];null===b||!1===b?delete d[a]:d[a]=b;g=[];for(h in d)g.push(h+"|"+d[h]);c.setTime(c.getTime()+31536E6);c="; expires="+c.toGMTString();document.cookie="jqfs="+encodeURIComponent(g.join("||"))+c+"; path=/"},p={ABeeZee:{category:"sans-serif",variants:"400,400i",subsets:"latin"},Abel:{category:"sans-serif",variants:"400",subsets:"latin"},"Abhaya Libre":{category:"serif",variants:"400,500,600,700,800",
subsets:"sinhala,latin-ext,latin"},"Abril Fatface":{category:"display",variants:"400",subsets:"latin-ext,latin"},Aclonica:{category:"sans-serif",variants:"400",subsets:"latin"},Acme:{category:"sans-serif",variants:"400",subsets:"latin"},Actor:{category:"sans-serif",variants:"400",subsets:"latin"},Adamina:{category:"serif",variants:"400",subsets:"latin"},"Advent Pro":{category:"sans-serif",variants:"100,200,300,400,500,600,700",subsets:"greek,latin-ext,latin"},"Aguafina Script":{category:"handwriting",
variants:"400",subsets:"latin-ext,latin"},Akronim:{category:"display",variants:"400",subsets:"latin-ext,latin"},Aladin:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Alata:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,vietnamese"},Alatsi:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,vietnamese"},Aldrich:{category:"sans-serif",variants:"400",subsets:"latin"},Alef:{category:"sans-serif",variants:"400,700",subsets:"hebrew,latin"},Alegreya:{category:"serif",
variants:"400,400i,500,500i,700,700i,800,800i,900,900i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Alegreya SC":{category:"serif",variants:"400,400i,500,500i,700,700i,800,800i,900,900i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Alegreya Sans":{category:"sans-serif",variants:"100,100i,300,300i,400,400i,500,500i,700,700i,800,800i,900,900i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Alegreya Sans SC":{category:"sans-serif",
variants:"100,100i,300,300i,400,400i,500,500i,700,700i,800,800i,900,900i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},Aleo:{category:"serif",variants:"300,300i,400,400i,700,700i",subsets:"latin-ext,latin"},"Alex Brush":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Alfa Slab One":{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese"},Alice:{category:"serif",variants:"400",subsets:"cyrillic-ext,latin,cyrillic"},Alike:{category:"serif",
variants:"400",subsets:"latin"},"Alike Angular":{category:"serif",variants:"400",subsets:"latin"},Allan:{category:"display",variants:"400,700",subsets:"latin-ext,latin"},Allerta:{category:"sans-serif",variants:"400",subsets:"latin"},"Allerta Stencil":{category:"sans-serif",variants:"400",subsets:"latin"},Allura:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Almarai:{category:"sans-serif",variants:"300,400,700,800",subsets:"arabic"},Almendra:{category:"serif",variants:"400,400i,700,700i",
subsets:"latin-ext,latin"},"Almendra Display":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Almendra SC":{category:"serif",variants:"400",subsets:"latin"},Amarante:{category:"display",variants:"400",subsets:"latin-ext,latin"},Amaranth:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"latin"},"Amatic SC":{category:"handwriting",variants:"400,700",subsets:"hebrew,latin-ext,latin,vietnamese,cyrillic"},Amethysta:{category:"serif",variants:"400",subsets:"latin"},Amiko:{category:"sans-serif",
variants:"400,600,700",subsets:"devanagari,latin-ext,latin"},Amiri:{category:"serif",variants:"400,400i,700,700i",subsets:"latin-ext,latin,arabic"},Amita:{category:"handwriting",variants:"400,700",subsets:"devanagari,latin-ext,latin"},Anaheim:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Andada:{category:"serif",variants:"400",subsets:"latin-ext,latin"},Andika:{category:"sans-serif",variants:"400",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},Angkor:{category:"display",
variants:"400",subsets:"khmer"},"Annie Use Your Telescope":{category:"handwriting",variants:"400",subsets:"latin"},"Anonymous Pro":{category:"monospace",variants:"400,400i,700,700i",subsets:"greek,latin-ext,latin,cyrillic"},Antic:{category:"sans-serif",variants:"400",subsets:"latin"},"Antic Didone":{category:"serif",variants:"400",subsets:"latin"},"Antic Slab":{category:"serif",variants:"400",subsets:"latin"},Anton:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,vietnamese"},Arapey:{category:"serif",
variants:"400,400i",subsets:"latin"},Arbutus:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Arbutus Slab":{category:"serif",variants:"400",subsets:"latin-ext,latin"},"Architects Daughter":{category:"handwriting",variants:"400",subsets:"latin"},Archivo:{category:"sans-serif",variants:"400,400i,500,500i,600,600i,700,700i",subsets:"latin-ext,latin,vietnamese"},"Archivo Black":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Archivo Narrow":{category:"sans-serif",variants:"400,400i,500,500i,600,600i,700,700i",
subsets:"latin-ext,latin,vietnamese"},"Aref Ruqaa":{category:"serif",variants:"400,700",subsets:"latin,arabic"},"Arima Madurai":{category:"display",variants:"100,200,300,400,500,700,800,900",subsets:"latin-ext,latin,vietnamese,tamil"},Arimo:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"cyrillic-ext,greek,hebrew,greek-ext,latin-ext,latin,vietnamese,cyrillic"},Arizonia:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Armata:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},
Arsenal:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},Artifika:{category:"serif",variants:"400",subsets:"latin"},Arvo:{category:"serif",variants:"400,400i,700,700i",subsets:"latin"},Arya:{category:"sans-serif",variants:"400,700",subsets:"devanagari,latin-ext,latin"},Asap:{category:"sans-serif",variants:"400,400i,500,500i,600,600i,700,700i",subsets:"latin-ext,latin,vietnamese"},"Asap Condensed":{category:"sans-serif",variants:"400,400i,500,500i,600,600i,700,700i",
subsets:"latin-ext,latin,vietnamese"},Asar:{category:"serif",variants:"400",subsets:"devanagari,latin-ext,latin"},Asset:{category:"display",variants:"400",subsets:"latin"},Assistant:{category:"sans-serif",variants:"200,300,400,600,700,800",subsets:"hebrew,latin"},Astloch:{category:"display",variants:"400,700",subsets:"latin"},Asul:{category:"sans-serif",variants:"400,700",subsets:"latin"},Athiti:{category:"sans-serif",variants:"200,300,400,500,600,700",subsets:"thai,latin-ext,latin,vietnamese"},Atma:{category:"display",
variants:"300,400,500,600,700",subsets:"bengali,latin-ext,latin"},"Atomic Age":{category:"display",variants:"400",subsets:"latin"},Aubrey:{category:"display",variants:"400",subsets:"latin"},Audiowide:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Autour One":{category:"display",variants:"400",subsets:"latin-ext,latin"},Average:{category:"serif",variants:"400",subsets:"latin-ext,latin"},"Average Sans":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Averia Gruesa Libre":{category:"display",
variants:"400",subsets:"latin-ext,latin"},"Averia Libre":{category:"display",variants:"300,300i,400,400i,700,700i",subsets:"latin"},"Averia Sans Libre":{category:"display",variants:"300,300i,400,400i,700,700i",subsets:"latin"},"Averia Serif Libre":{category:"display",variants:"300,300i,400,400i,700,700i",subsets:"latin"},B612:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"latin"},"B612 Mono":{category:"monospace",variants:"400,400i,700,700i",subsets:"latin"},"Bad Script":{category:"handwriting",
variants:"400",subsets:"latin,cyrillic"},Bahiana:{category:"display",variants:"400",subsets:"latin-ext,latin"},Bahianita:{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Bai Jamjuree":{category:"sans-serif",variants:"200,200i,300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"thai,latin-ext,latin,vietnamese"},Baloo:{category:"display",variants:"400",subsets:"devanagari,latin-ext,latin,vietnamese"},"Baloo Bhai":{category:"display",variants:"400",subsets:"gujarati,latin-ext,latin,vietnamese"},
"Baloo Bhaijaan":{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese,arabic"},"Baloo Bhaina":{category:"display",variants:"400",subsets:"latin-ext,oriya,latin,vietnamese"},"Baloo Chettan":{category:"display",variants:"400",subsets:"malayalam,latin-ext,latin,vietnamese"},"Baloo Da":{category:"display",variants:"400",subsets:"bengali,latin-ext,latin,vietnamese"},"Baloo Paaji":{category:"display",variants:"400",subsets:"gurmukhi,latin-ext,latin,vietnamese"},"Baloo Tamma":{category:"display",
variants:"400",subsets:"kannada,latin-ext,latin,vietnamese"},"Baloo Tammudu":{category:"display",variants:"400",subsets:"latin-ext,latin,telugu,vietnamese"},"Baloo Thambi":{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese,tamil"},Balthazar:{category:"serif",variants:"400",subsets:"latin"},Bangers:{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese"},Barlow:{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",
subsets:"latin-ext,latin,vietnamese"},"Barlow Condensed":{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"latin-ext,latin,vietnamese"},"Barlow Semi Condensed":{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"latin-ext,latin,vietnamese"},Barriecito:{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese"},Barrio:{category:"display",variants:"400",
subsets:"latin-ext,latin"},Basic:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Baskervville:{category:"serif",variants:"400,400i",subsets:"latin-ext,latin"},Battambang:{category:"display",variants:"400,700",subsets:"khmer"},Baumans:{category:"display",variants:"400",subsets:"latin"},Bayon:{category:"display",variants:"400",subsets:"khmer"},"Be Vietnam":{category:"sans-serif",variants:"100,100i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i",subsets:"latin-ext,latin,vietnamese"},
"Bebas Neue":{category:"display",variants:"400",subsets:"latin-ext,latin"},Belgrano:{category:"serif",variants:"400",subsets:"latin"},Bellefair:{category:"serif",variants:"400",subsets:"hebrew,latin-ext,latin"},Belleza:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},BenchNine:{category:"sans-serif",variants:"300,400,700",subsets:"latin-ext,latin"},Bentham:{category:"serif",variants:"400",subsets:"latin"},"Berkshire Swash":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},
"Beth Ellen":{category:"handwriting",variants:"400",subsets:"latin"},Bevan:{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Big Shoulders Display":{category:"display",variants:"100,300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},"Big Shoulders Text":{category:"display",variants:"100,300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},"Bigelow Rules":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Bigshot One":{category:"display",
variants:"400",subsets:"latin"},Bilbo:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Bilbo Swash Caps":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},BioRhyme:{category:"serif",variants:"200,300,400,700,800",subsets:"latin-ext,latin"},"BioRhyme Expanded":{category:"serif",variants:"200,300,400,700,800",subsets:"latin-ext,latin"},Biryani:{category:"sans-serif",variants:"200,300,400,600,700,800,900",subsets:"devanagari,latin-ext,latin"},Bitter:{category:"serif",
variants:"400,400i,700",subsets:"latin-ext,latin"},"Black And White Picture":{category:"sans-serif",variants:"400",subsets:"latin,korean"},"Black Han Sans":{category:"sans-serif",variants:"400",subsets:"latin,korean"},"Black Ops One":{category:"display",variants:"400",subsets:"latin-ext,latin"},Blinker:{category:"sans-serif",variants:"100,200,300,400,600,700,800,900",subsets:"latin-ext,latin"},Bokor:{category:"display",variants:"400",subsets:"khmer"},Bonbon:{category:"handwriting",variants:"400",
subsets:"latin"},Boogaloo:{category:"display",variants:"400",subsets:"latin"},"Bowlby One":{category:"display",variants:"400",subsets:"latin"},"Bowlby One SC":{category:"display",variants:"400",subsets:"latin-ext,latin"},Brawler:{category:"serif",variants:"400",subsets:"latin"},"Bree Serif":{category:"serif",variants:"400",subsets:"latin-ext,latin"},"Bubblegum Sans":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Bubbler One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},
Buda:{category:"display",variants:"300",subsets:"latin"},Buenard:{category:"serif",variants:"400,700",subsets:"latin-ext,latin"},Bungee:{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Bungee Hairline":{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Bungee Inline":{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Bungee Outline":{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Bungee Shade":{category:"display",
variants:"400",subsets:"latin-ext,latin,vietnamese"},Butcherman:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Butterfly Kids":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Cabin:{category:"sans-serif",variants:"400,400i,500,500i,600,600i,700,700i",subsets:"latin-ext,latin,vietnamese"},"Cabin Condensed":{category:"sans-serif",variants:"400,500,600,700",subsets:"latin-ext,latin,vietnamese"},"Cabin Sketch":{category:"display",variants:"400,700",subsets:"latin"},"Caesar Dressing":{category:"display",
variants:"400",subsets:"latin"},Cagliostro:{category:"sans-serif",variants:"400",subsets:"latin"},Cairo:{category:"sans-serif",variants:"200,300,400,600,700,900",subsets:"latin-ext,latin,arabic"},Calistoga:{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese"},Calligraffitti:{category:"handwriting",variants:"400",subsets:"latin"},Cambay:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"devanagari,latin-ext,latin"},Cambo:{category:"serif",variants:"400",subsets:"latin"},
Candal:{category:"sans-serif",variants:"400",subsets:"latin"},Cantarell:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"latin"},"Cantata One":{category:"serif",variants:"400",subsets:"latin-ext,latin"},"Cantora One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Capriola:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Cardo:{category:"serif",variants:"400,400i,700",subsets:"greek,greek-ext,latin-ext,latin"},Carme:{category:"sans-serif",variants:"400",
subsets:"latin"},"Carrois Gothic":{category:"sans-serif",variants:"400",subsets:"latin"},"Carrois Gothic SC":{category:"sans-serif",variants:"400",subsets:"latin"},"Carter One":{category:"display",variants:"400",subsets:"latin"},Catamaran:{category:"sans-serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"latin-ext,latin,tamil"},Caudex:{category:"serif",variants:"400,400i,700,700i",subsets:"greek,greek-ext,latin-ext,latin"},Caveat:{category:"handwriting",variants:"400,700",subsets:"cyrillic-ext,latin-ext,latin,cyrillic"},
"Caveat Brush":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Cedarville Cursive":{category:"handwriting",variants:"400",subsets:"latin"},"Ceviche One":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Chakra Petch":{category:"sans-serif",variants:"300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"thai,latin-ext,latin,vietnamese"},Changa:{category:"sans-serif",variants:"200,300,400,500,600,700,800",subsets:"latin-ext,latin,arabic"},"Changa One":{category:"display",
variants:"400,400i",subsets:"latin"},Chango:{category:"display",variants:"400",subsets:"latin-ext,latin"},Charm:{category:"handwriting",variants:"400,700",subsets:"thai,latin-ext,latin,vietnamese"},Charmonman:{category:"handwriting",variants:"400,700",subsets:"thai,latin-ext,latin,vietnamese"},Chathura:{category:"sans-serif",variants:"100,300,400,700,800",subsets:"latin,telugu"},"Chau Philomene One":{category:"sans-serif",variants:"400,400i",subsets:"latin-ext,latin"},"Chela One":{category:"display",
variants:"400",subsets:"latin-ext,latin"},"Chelsea Market":{category:"display",variants:"400",subsets:"latin-ext,latin"},Chenla:{category:"display",variants:"400",subsets:"khmer"},"Cherry Cream Soda":{category:"display",variants:"400",subsets:"latin"},"Cherry Swash":{category:"display",variants:"400,700",subsets:"latin-ext,latin"},Chewy:{category:"display",variants:"400",subsets:"latin"},Chicle:{category:"display",variants:"400",subsets:"latin-ext,latin"},Chilanka:{category:"handwriting",variants:"400",
subsets:"malayalam,latin"},Chivo:{category:"sans-serif",variants:"300,300i,400,400i,700,700i,900,900i",subsets:"latin-ext,latin"},Chonburi:{category:"display",variants:"400",subsets:"thai,latin-ext,latin,vietnamese"},Cinzel:{category:"serif",variants:"400,700,900",subsets:"latin-ext,latin"},"Cinzel Decorative":{category:"display",variants:"400,700,900",subsets:"latin"},"Clicker Script":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Coda:{category:"display",variants:"400,800",subsets:"latin-ext,latin"},
"Coda Caption":{category:"sans-serif",variants:"800",subsets:"latin-ext,latin"},Codystar:{category:"display",variants:"300,400",subsets:"latin-ext,latin"},Coiny:{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese,tamil"},Combo:{category:"display",variants:"400",subsets:"latin-ext,latin"},Comfortaa:{category:"display",variants:"300,400,500,600,700",subsets:"cyrillic-ext,greek,latin-ext,latin,vietnamese,cyrillic"},"Coming Soon":{category:"handwriting",variants:"400",subsets:"latin"},
"Concert One":{category:"display",variants:"400",subsets:"latin-ext,latin"},Condiment:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Content:{category:"display",variants:"400,700",subsets:"khmer"},"Contrail One":{category:"display",variants:"400",subsets:"latin"},Convergence:{category:"sans-serif",variants:"400",subsets:"latin"},Cookie:{category:"handwriting",variants:"400",subsets:"latin"},Copse:{category:"serif",variants:"400",subsets:"latin"},Corben:{category:"display",variants:"400,700",
subsets:"latin-ext,latin"},Cormorant:{category:"serif",variants:"300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"Cormorant Garamond":{category:"serif",variants:"300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"Cormorant Infant":{category:"serif",variants:"300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"Cormorant SC":{category:"serif",
variants:"300,400,500,600,700",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"Cormorant Unicase":{category:"serif",variants:"300,400,500,600,700",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"Cormorant Upright":{category:"serif",variants:"300,400,500,600,700",subsets:"latin-ext,latin,vietnamese"},Courgette:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Courier Prime":{category:"monospace",variants:"400,400i,700,700i",subsets:"latin-ext,latin"},Cousine:{category:"monospace",
variants:"400,400i,700,700i",subsets:"cyrillic-ext,greek,hebrew,greek-ext,latin-ext,latin,vietnamese,cyrillic"},Coustard:{category:"serif",variants:"400,900",subsets:"latin"},"Covered By Your Grace":{category:"handwriting",variants:"400",subsets:"latin"},"Crafty Girls":{category:"handwriting",variants:"400",subsets:"latin"},Creepster:{category:"display",variants:"400",subsets:"latin"},"Crete Round":{category:"serif",variants:"400,400i",subsets:"latin-ext,latin"},"Crimson Pro":{category:"serif",variants:"200,300,400,500,600,700,800,900,200i,300i,400i,500i,600i,700i,800i,900i",
subsets:"latin-ext,latin,vietnamese"},"Crimson Text":{category:"serif",variants:"400,400i,600,600i,700,700i",subsets:"latin"},"Croissant One":{category:"display",variants:"400",subsets:"latin-ext,latin"},Crushed:{category:"display",variants:"400",subsets:"latin"},Cuprum:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"Cute Font":{category:"display",variants:"400",subsets:"latin,korean"},Cutive:{category:"serif",variants:"400",subsets:"latin-ext,latin"},
"Cutive Mono":{category:"monospace",variants:"400",subsets:"latin-ext,latin"},"DM Sans":{category:"sans-serif",variants:"400,400i,500,500i,700,700i",subsets:"latin-ext,latin"},"DM Serif Display":{category:"serif",variants:"400,400i",subsets:"latin-ext,latin"},"DM Serif Text":{category:"serif",variants:"400,400i",subsets:"latin-ext,latin"},Damion:{category:"handwriting",variants:"400",subsets:"latin"},"Dancing Script":{category:"handwriting",variants:"400,500,600,700",subsets:"latin-ext,latin,vietnamese"},
Dangrek:{category:"display",variants:"400",subsets:"khmer"},"Darker Grotesque":{category:"sans-serif",variants:"300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},"David Libre":{category:"serif",variants:"400,500,700",subsets:"hebrew,latin-ext,latin,vietnamese"},"Dawning of a New Day":{category:"handwriting",variants:"400",subsets:"latin"},"Days One":{category:"sans-serif",variants:"400",subsets:"latin"},Dekko:{category:"handwriting",variants:"400",subsets:"devanagari,latin-ext,latin"},
Delius:{category:"handwriting",variants:"400",subsets:"latin"},"Delius Swash Caps":{category:"handwriting",variants:"400",subsets:"latin"},"Delius Unicase":{category:"handwriting",variants:"400,700",subsets:"latin"},"Della Respira":{category:"serif",variants:"400",subsets:"latin"},"Denk One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Devonshire:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Dhurjati:{category:"sans-serif",variants:"400",subsets:"latin,telugu"},
"Didact Gothic":{category:"sans-serif",variants:"400",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,cyrillic"},Diplomata:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Diplomata SC":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Do Hyeon":{category:"sans-serif",variants:"400",subsets:"latin,korean"},Dokdo:{category:"handwriting",variants:"400",subsets:"latin,korean"},Domine:{category:"serif",variants:"400,700",subsets:"latin-ext,latin"},"Donegal One":{category:"serif",
variants:"400",subsets:"latin-ext,latin"},"Doppio One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Dorsa:{category:"sans-serif",variants:"400",subsets:"latin"},Dosis:{category:"sans-serif",variants:"200,300,400,500,600,700,800",subsets:"latin-ext,latin,vietnamese"},"Dr Sugiyama":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Duru Sans":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Dynalight:{category:"display",variants:"400",subsets:"latin-ext,latin"},
"EB Garamond":{category:"serif",variants:"400,500,600,700,800,400i,500i,600i,700i,800i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Eagle Lake":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"East Sea Dokdo":{category:"handwriting",variants:"400",subsets:"latin,korean"},Eater:{category:"display",variants:"400",subsets:"latin-ext,latin"},Economica:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"latin-ext,latin"},Eczar:{category:"serif",
variants:"400,500,600,700,800",subsets:"devanagari,latin-ext,latin"},"El Messiri":{category:"sans-serif",variants:"400,500,600,700",subsets:"latin,arabic,cyrillic"},Electrolize:{category:"sans-serif",variants:"400",subsets:"latin"},Elsie:{category:"display",variants:"400,900",subsets:"latin-ext,latin"},"Elsie Swash Caps":{category:"display",variants:"400,900",subsets:"latin-ext,latin"},"Emblema One":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Emilys Candy":{category:"display",variants:"400",
subsets:"latin-ext,latin"},"Encode Sans":{category:"sans-serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},"Encode Sans Condensed":{category:"sans-serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},"Encode Sans Expanded":{category:"sans-serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},"Encode Sans Semi Condensed":{category:"sans-serif",variants:"100,200,300,400,500,600,700,800,900",
subsets:"latin-ext,latin,vietnamese"},"Encode Sans Semi Expanded":{category:"sans-serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},Engagement:{category:"handwriting",variants:"400",subsets:"latin"},Englebert:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Enriqueta:{category:"serif",variants:"400,500,600,700",subsets:"latin-ext,latin"},"Erica One":{category:"display",variants:"400",subsets:"latin-ext,latin"},Esteban:{category:"serif",variants:"400",
subsets:"latin-ext,latin"},"Euphoria Script":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Ewert:{category:"display",variants:"400",subsets:"latin-ext,latin"},Exo:{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"latin-ext,latin,vietnamese"},"Exo 2":{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},
"Expletus Sans":{category:"display",variants:"400,400i,500,500i,600,600i,700,700i",subsets:"latin"},Fahkwang:{category:"sans-serif",variants:"200,200i,300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"thai,latin-ext,latin,vietnamese"},"Fanwood Text":{category:"serif",variants:"400,400i",subsets:"latin"},Farro:{category:"sans-serif",variants:"300,400,500,700",subsets:"latin-ext,latin"},Farsan:{category:"display",variants:"400",subsets:"gujarati,latin-ext,latin,vietnamese"},Fascinate:{category:"display",
variants:"400",subsets:"latin"},"Fascinate Inline":{category:"display",variants:"400",subsets:"latin"},"Faster One":{category:"display",variants:"400",subsets:"latin"},Fasthand:{category:"serif",variants:"400",subsets:"khmer"},"Fauna One":{category:"serif",variants:"400",subsets:"latin-ext,latin"},Faustina:{category:"serif",variants:"400,500,600,700,400i,500i,600i,700i",subsets:"latin-ext,latin,vietnamese"},Federant:{category:"display",variants:"400",subsets:"latin"},Federo:{category:"sans-serif",
variants:"400",subsets:"latin"},Felipa:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Fenix:{category:"serif",variants:"400",subsets:"latin-ext,latin"},"Finger Paint":{category:"display",variants:"400",subsets:"latin"},"Fira Code":{category:"monospace",variants:"300,400,500,600,700",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,cyrillic"},"Fira Mono":{category:"monospace",variants:"400,500,700",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,cyrillic"},"Fira Sans":{category:"sans-serif",
variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Fira Sans Condensed":{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Fira Sans Extra Condensed":{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",
subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Fjalla One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Fjord One":{category:"serif",variants:"400",subsets:"latin"},Flamenco:{category:"display",variants:"300,400",subsets:"latin"},Flavors:{category:"display",variants:"400",subsets:"latin-ext,latin"},Fondamento:{category:"handwriting",variants:"400,400i",subsets:"latin-ext,latin"},"Fontdiner Swanky":{category:"display",variants:"400",subsets:"latin"},
Forum:{category:"display",variants:"400",subsets:"cyrillic-ext,latin-ext,latin,cyrillic"},"Francois One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Frank Ruhl Libre":{category:"serif",variants:"300,400,500,700,900",subsets:"hebrew,latin-ext,latin"},"Freckle Face":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Fredericka the Great":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Fredoka One":{category:"display",variants:"400",subsets:"latin"},
Freehand:{category:"display",variants:"400",subsets:"khmer"},Fresca:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Frijole:{category:"display",variants:"400",subsets:"latin"},Fruktur:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Fugaz One":{category:"display",variants:"400",subsets:"latin"},"GFS Didot":{category:"serif",variants:"400",subsets:"greek"},"GFS Neohellenic":{category:"sans-serif",variants:"400,400i,700,700i",subsets:"greek"},Gabriela:{category:"serif",
variants:"400",subsets:"cyrillic-ext,latin,cyrillic"},Gaegu:{category:"handwriting",variants:"300,400,700",subsets:"latin,korean"},Gafata:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Galada:{category:"display",variants:"400",subsets:"bengali,latin"},Galdeano:{category:"sans-serif",variants:"400",subsets:"latin"},Galindo:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Gamja Flower":{category:"handwriting",variants:"400",subsets:"latin,korean"},Gayathri:{category:"sans-serif",
variants:"100,400,700",subsets:"malayalam,latin"},Gelasio:{category:"serif",variants:"400,400i,500,500i,600,600i,700,700i",subsets:"latin-ext,latin,vietnamese"},"Gentium Basic":{category:"serif",variants:"400,400i,700,700i",subsets:"latin-ext,latin"},"Gentium Book Basic":{category:"serif",variants:"400,400i,700,700i",subsets:"latin-ext,latin"},Geo:{category:"sans-serif",variants:"400,400i",subsets:"latin"},Geostar:{category:"display",variants:"400",subsets:"latin"},"Geostar Fill":{category:"display",
variants:"400",subsets:"latin"},"Germania One":{category:"display",variants:"400",subsets:"latin"},Gidugu:{category:"sans-serif",variants:"400",subsets:"latin,telugu"},"Gilda Display":{category:"serif",variants:"400",subsets:"latin-ext,latin"},Girassol:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Give You Glory":{category:"handwriting",variants:"400",subsets:"latin"},"Glass Antiqua":{category:"display",variants:"400",subsets:"latin-ext,latin"},Glegoo:{category:"serif",variants:"400,700",
subsets:"devanagari,latin-ext,latin"},"Gloria Hallelujah":{category:"handwriting",variants:"400",subsets:"latin"},"Goblin One":{category:"display",variants:"400",subsets:"latin"},"Gochi Hand":{category:"handwriting",variants:"400",subsets:"latin"},Gorditas:{category:"display",variants:"400,700",subsets:"latin"},"Gothic A1":{category:"sans-serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"latin,korean"},"Goudy Bookletter 1911":{category:"serif",variants:"400",subsets:"latin"},Graduate:{category:"display",
variants:"400",subsets:"latin"},"Grand Hotel":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Gravitas One":{category:"display",variants:"400",subsets:"latin"},"Great Vibes":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Grenze:{category:"serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"latin-ext,latin,vietnamese"},Griffy:{category:"display",variants:"400",subsets:"latin-ext,latin"},Gruppo:{category:"display",
variants:"400",subsets:"latin-ext,latin"},Gudea:{category:"sans-serif",variants:"400,400i,700",subsets:"latin-ext,latin"},Gugi:{category:"display",variants:"400",subsets:"latin,korean"},Gupter:{category:"serif",variants:"400,500,700",subsets:"latin"},Gurajada:{category:"serif",variants:"400",subsets:"latin,telugu"},Habibi:{category:"serif",variants:"400",subsets:"latin-ext,latin"},Halant:{category:"serif",variants:"300,400,500,600,700",subsets:"devanagari,latin-ext,latin"},"Hammersmith One":{category:"sans-serif",
variants:"400",subsets:"latin-ext,latin"},Hanalei:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Hanalei Fill":{category:"display",variants:"400",subsets:"latin-ext,latin"},Handlee:{category:"handwriting",variants:"400",subsets:"latin"},Hanuman:{category:"serif",variants:"400,700",subsets:"khmer"},"Happy Monkey":{category:"display",variants:"400",subsets:"latin-ext,latin"},Harmattan:{category:"sans-serif",variants:"400",subsets:"latin,arabic"},"Headland One":{category:"serif",variants:"400",
subsets:"latin-ext,latin"},Heebo:{category:"sans-serif",variants:"100,300,400,500,700,800,900",subsets:"hebrew,latin"},"Henny Penny":{category:"display",variants:"400",subsets:"latin"},"Hepta Slab":{category:"serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},"Herr Von Muellerhoff":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Hi Melody":{category:"handwriting",variants:"400",subsets:"latin,korean"},Hind:{category:"sans-serif",variants:"300,400,500,600,700",
subsets:"devanagari,latin-ext,latin"},"Hind Guntur":{category:"sans-serif",variants:"300,400,500,600,700",subsets:"latin-ext,latin,telugu"},"Hind Madurai":{category:"sans-serif",variants:"300,400,500,600,700",subsets:"latin-ext,latin,tamil"},"Hind Siliguri":{category:"sans-serif",variants:"300,400,500,600,700",subsets:"bengali,latin-ext,latin"},"Hind Vadodara":{category:"sans-serif",variants:"300,400,500,600,700",subsets:"gujarati,latin-ext,latin"},"Holtwood One SC":{category:"serif",variants:"400",
subsets:"latin"},"Homemade Apple":{category:"handwriting",variants:"400",subsets:"latin"},Homenaje:{category:"sans-serif",variants:"400",subsets:"latin"},"IBM Plex Mono":{category:"monospace",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"IBM Plex Sans":{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"cyrillic-ext,greek,latin-ext,latin,vietnamese,cyrillic"},
"IBM Plex Sans Condensed":{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"latin-ext,latin,vietnamese"},"IBM Plex Serif":{category:"serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"IM Fell DW Pica":{category:"serif",variants:"400,400i",subsets:"latin"},"IM Fell DW Pica SC":{category:"serif",variants:"400",subsets:"latin"},"IM Fell Double Pica":{category:"serif",
variants:"400,400i",subsets:"latin"},"IM Fell Double Pica SC":{category:"serif",variants:"400",subsets:"latin"},"IM Fell English":{category:"serif",variants:"400,400i",subsets:"latin"},"IM Fell English SC":{category:"serif",variants:"400",subsets:"latin"},"IM Fell French Canon":{category:"serif",variants:"400,400i",subsets:"latin"},"IM Fell French Canon SC":{category:"serif",variants:"400",subsets:"latin"},"IM Fell Great Primer":{category:"serif",variants:"400,400i",subsets:"latin"},"IM Fell Great Primer SC":{category:"serif",
variants:"400",subsets:"latin"},"Ibarra Real Nova":{category:"serif",variants:"400,400i,600,600i,700,700i",subsets:"latin-ext,latin"},Iceberg:{category:"display",variants:"400",subsets:"latin"},Iceland:{category:"display",variants:"400",subsets:"latin"},Imprima:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Inconsolata:{category:"monospace",variants:"400,700",subsets:"latin-ext,latin,vietnamese"},Inder:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Indie Flower":{category:"handwriting",
variants:"400",subsets:"latin"},Inika:{category:"serif",variants:"400,700",subsets:"latin-ext,latin"},"Inknut Antiqua":{category:"serif",variants:"300,400,500,600,700,800,900",subsets:"devanagari,latin-ext,latin"},"Inria Serif":{category:"serif",variants:"300,300i,400,400i,700,700i",subsets:"latin-ext,latin"},"Irish Grover":{category:"display",variants:"400",subsets:"latin"},"Istok Web":{category:"sans-serif",variants:"400,400i,700,700i",subsets:"cyrillic-ext,latin-ext,latin,cyrillic"},Italiana:{category:"serif",
variants:"400",subsets:"latin"},Italianno:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Itim:{category:"handwriting",variants:"400",subsets:"thai,latin-ext,latin,vietnamese"},"Jacques Francois":{category:"serif",variants:"400",subsets:"latin"},"Jacques Francois Shadow":{category:"display",variants:"400",subsets:"latin"},Jaldi:{category:"sans-serif",variants:"400,700",subsets:"devanagari,latin-ext,latin"},"Jim Nightshade":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},
"Jockey One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Jolly Lodger":{category:"display",variants:"400",subsets:"latin-ext,latin"},Jomhuria:{category:"display",variants:"400",subsets:"latin-ext,latin,arabic"},Jomolhari:{category:"serif",variants:"400",subsets:"tibetan,latin"},"Josefin Sans":{category:"sans-serif",variants:"100,100i,300,300i,400,400i,600,600i,700,700i",subsets:"latin-ext,latin,vietnamese"},"Josefin Slab":{category:"serif",variants:"100,100i,300,300i,400,400i,600,600i,700,700i",
subsets:"latin"},"Joti One":{category:"display",variants:"400",subsets:"latin-ext,latin"},Jua:{category:"sans-serif",variants:"400",subsets:"latin,korean"},Judson:{category:"serif",variants:"400,400i,700",subsets:"latin-ext,latin,vietnamese"},Julee:{category:"handwriting",variants:"400",subsets:"latin"},"Julius Sans One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Junge:{category:"serif",variants:"400",subsets:"latin"},Jura:{category:"sans-serif",variants:"300,400,500,600,700",
subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Just Another Hand":{category:"handwriting",variants:"400",subsets:"latin"},"Just Me Again Down Here":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},K2D:{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i",subsets:"thai,latin-ext,latin,vietnamese"},Kadwa:{category:"serif",variants:"400,700",subsets:"devanagari,latin"},Kalam:{category:"handwriting",variants:"300,400,700",
subsets:"devanagari,latin-ext,latin"},Kameron:{category:"serif",variants:"400,700",subsets:"latin"},Kanit:{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"thai,latin-ext,latin,vietnamese"},Kantumruy:{category:"sans-serif",variants:"300,400,700",subsets:"khmer"},Karla:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"latin-ext,latin"},Karma:{category:"serif",variants:"300,400,500,600,700",subsets:"devanagari,latin-ext,latin"},
Katibeh:{category:"display",variants:"400",subsets:"latin-ext,latin,arabic"},"Kaushan Script":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Kavivanar:{category:"handwriting",variants:"400",subsets:"latin-ext,latin,tamil"},Kavoon:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Kdam Thmor":{category:"display",variants:"400",subsets:"khmer"},"Keania One":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Kelly Slab":{category:"display",variants:"400",subsets:"latin-ext,latin,cyrillic"},
Kenia:{category:"display",variants:"400",subsets:"latin"},Khand:{category:"sans-serif",variants:"300,400,500,600,700",subsets:"devanagari,latin-ext,latin"},Khmer:{category:"display",variants:"400",subsets:"khmer"},Khula:{category:"sans-serif",variants:"300,400,600,700,800",subsets:"devanagari,latin-ext,latin"},"Kirang Haerang":{category:"display",variants:"400",subsets:"latin,korean"},"Kite One":{category:"sans-serif",variants:"400",subsets:"latin"},Knewave:{category:"display",variants:"400",subsets:"latin-ext,latin"},
KoHo:{category:"sans-serif",variants:"200,200i,300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"thai,latin-ext,latin,vietnamese"},Kodchasan:{category:"sans-serif",variants:"200,200i,300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"thai,latin-ext,latin,vietnamese"},Kosugi:{category:"sans-serif",variants:"400",subsets:"latin,japanese,cyrillic"},"Kosugi Maru":{category:"sans-serif",variants:"400",subsets:"latin,japanese,cyrillic"},"Kotta One":{category:"serif",variants:"400",subsets:"latin-ext,latin"},
Koulen:{category:"display",variants:"400",subsets:"khmer"},Kranky:{category:"display",variants:"400",subsets:"latin"},Kreon:{category:"serif",variants:"300,400,500,600,700",subsets:"latin-ext,latin"},Kristi:{category:"handwriting",variants:"400",subsets:"latin"},"Krona One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Krub:{category:"sans-serif",variants:"200,200i,300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"thai,latin-ext,latin,vietnamese"},"Kulim Park":{category:"sans-serif",
variants:"200,200i,300,300i,400,400i,600,600i,700,700i",subsets:"latin-ext,latin"},"Kumar One":{category:"display",variants:"400",subsets:"gujarati,latin-ext,latin"},"Kumar One Outline":{category:"display",variants:"400",subsets:"gujarati,latin-ext,latin"},Kurale:{category:"serif",variants:"400",subsets:"cyrillic-ext,devanagari,latin-ext,latin,cyrillic"},"La Belle Aurore":{category:"handwriting",variants:"400",subsets:"latin"},Lacquer:{category:"sans-serif",variants:"400",subsets:"latin"},Laila:{category:"serif",
variants:"300,400,500,600,700",subsets:"devanagari,latin-ext,latin"},"Lakki Reddy":{category:"handwriting",variants:"400",subsets:"latin,telugu"},Lalezar:{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese,arabic"},Lancelot:{category:"display",variants:"400",subsets:"latin-ext,latin"},Lateef:{category:"handwriting",variants:"400",subsets:"latin,arabic"},Lato:{category:"sans-serif",variants:"100,100i,300,300i,400,400i,700,700i,900,900i",subsets:"latin-ext,latin"},"League Script":{category:"handwriting",
variants:"400",subsets:"latin"},"Leckerli One":{category:"handwriting",variants:"400",subsets:"latin"},Ledger:{category:"serif",variants:"400",subsets:"latin-ext,latin,cyrillic"},Lekton:{category:"sans-serif",variants:"400,400i,700",subsets:"latin-ext,latin"},Lemon:{category:"display",variants:"400",subsets:"latin"},Lemonada:{category:"display",variants:"300,400,500,600,700",subsets:"latin-ext,latin,vietnamese,arabic"},"Lexend Deca":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,vietnamese"},
"Lexend Exa":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Lexend Giga":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Lexend Mega":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Lexend Peta":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Lexend Tera":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Lexend Zetta":{category:"sans-serif",variants:"400",
subsets:"latin-ext,latin,vietnamese"},"Libre Barcode 128":{category:"display",variants:"400",subsets:"latin"},"Libre Barcode 128 Text":{category:"display",variants:"400",subsets:"latin"},"Libre Barcode 39":{category:"display",variants:"400",subsets:"latin"},"Libre Barcode 39 Extended":{category:"display",variants:"400",subsets:"latin"},"Libre Barcode 39 Extended Text":{category:"display",variants:"400",subsets:"latin"},"Libre Barcode 39 Text":{category:"display",variants:"400",subsets:"latin"},"Libre Baskerville":{category:"serif",
variants:"400,400i,700",subsets:"latin-ext,latin"},"Libre Caslon Display":{category:"serif",variants:"400",subsets:"latin-ext,latin"},"Libre Caslon Text":{category:"serif",variants:"400,400i,700",subsets:"latin-ext,latin"},"Libre Franklin":{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"latin-ext,latin"},"Life Savers":{category:"display",variants:"400,700,800",subsets:"latin-ext,latin"},"Lilita One":{category:"display",variants:"400",
subsets:"latin-ext,latin"},"Lily Script One":{category:"display",variants:"400",subsets:"latin-ext,latin"},Limelight:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Linden Hill":{category:"serif",variants:"400,400i",subsets:"latin"},Literata:{category:"serif",variants:"400,500,600,700,400i,500i,600i,700i",subsets:"greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Liu Jian Mao Cao":{category:"handwriting",variants:"400",subsets:"latin,chinese-simplified"},Livvic:{category:"sans-serif",
variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,900,900i",subsets:"latin-ext,latin,vietnamese"},Lobster:{category:"display",variants:"400",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"Lobster Two":{category:"display",variants:"400,400i,700,700i",subsets:"latin"},"Londrina Outline":{category:"display",variants:"400",subsets:"latin"},"Londrina Shadow":{category:"display",variants:"400",subsets:"latin"},"Londrina Sketch":{category:"display",variants:"400",subsets:"latin"},
"Londrina Solid":{category:"display",variants:"100,300,400,900",subsets:"latin"},"Long Cang":{category:"handwriting",variants:"400",subsets:"latin,chinese-simplified"},Lora:{category:"serif",variants:"400,400i,700,700i",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"Love Ya Like A Sister":{category:"display",variants:"400",subsets:"latin"},"Loved by the King":{category:"handwriting",variants:"400",subsets:"latin"},"Lovers Quarrel":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},
"Luckiest Guy":{category:"display",variants:"400",subsets:"latin"},Lusitana:{category:"serif",variants:"400,700",subsets:"latin"},Lustria:{category:"serif",variants:"400",subsets:"latin"},"M PLUS 1p":{category:"sans-serif",variants:"100,300,400,500,700,800,900",subsets:"cyrillic-ext,greek,hebrew,greek-ext,latin-ext,latin,japanese,vietnamese,cyrillic"},"M PLUS Rounded 1c":{category:"sans-serif",variants:"100,300,400,500,700,800,900",subsets:"cyrillic-ext,greek,hebrew,greek-ext,latin-ext,latin,japanese,vietnamese,cyrillic"},
"Ma Shan Zheng":{category:"handwriting",variants:"400",subsets:"latin,chinese-simplified"},Macondo:{category:"display",variants:"400",subsets:"latin"},"Macondo Swash Caps":{category:"display",variants:"400",subsets:"latin"},Mada:{category:"sans-serif",variants:"200,300,400,500,600,700,900",subsets:"latin,arabic"},Magra:{category:"sans-serif",variants:"400,700",subsets:"latin-ext,latin"},"Maiden Orange":{category:"display",variants:"400",subsets:"latin"},Maitree:{category:"serif",variants:"200,300,400,500,600,700",
subsets:"thai,latin-ext,latin,vietnamese"},"Major Mono Display":{category:"monospace",variants:"400",subsets:"latin-ext,latin,vietnamese"},Mako:{category:"sans-serif",variants:"400",subsets:"latin"},Mali:{category:"handwriting",variants:"200,200i,300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"thai,latin-ext,latin,vietnamese"},Mallanna:{category:"sans-serif",variants:"400",subsets:"latin,telugu"},Mandali:{category:"sans-serif",variants:"400",subsets:"latin,telugu"},Manjari:{category:"sans-serif",
variants:"100,400,700",subsets:"malayalam,latin"},Mansalva:{category:"handwriting",variants:"400",subsets:"latin"},Manuale:{category:"serif",variants:"400,500,600,700,400i,500i,600i,700i",subsets:"latin-ext,latin,vietnamese"},Marcellus:{category:"serif",variants:"400",subsets:"latin-ext,latin"},"Marcellus SC":{category:"serif",variants:"400",subsets:"latin-ext,latin"},"Marck Script":{category:"handwriting",variants:"400",subsets:"latin-ext,latin,cyrillic"},Margarine:{category:"display",variants:"400",
subsets:"latin-ext,latin"},"Markazi Text":{category:"serif",variants:"400,500,600,700",subsets:"latin-ext,latin,vietnamese,arabic"},"Marko One":{category:"serif",variants:"400",subsets:"latin"},Marmelad:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,cyrillic"},Martel:{category:"serif",variants:"200,300,400,600,700,800,900",subsets:"devanagari,latin-ext,latin"},"Martel Sans":{category:"sans-serif",variants:"200,300,400,600,700,800,900",subsets:"devanagari,latin-ext,latin"},Marvel:{category:"sans-serif",
variants:"400,400i,700,700i",subsets:"latin"},Mate:{category:"serif",variants:"400,400i",subsets:"latin"},"Mate SC":{category:"serif",variants:"400",subsets:"latin"},"Maven Pro":{category:"sans-serif",variants:"400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},McLaren:{category:"display",variants:"400",subsets:"latin-ext,latin"},Meddon:{category:"handwriting",variants:"400",subsets:"latin"},MedievalSharp:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Medula One":{category:"display",
variants:"400",subsets:"latin"},"Meera Inimai":{category:"sans-serif",variants:"400",subsets:"latin,tamil"},Megrim:{category:"display",variants:"400",subsets:"latin"},"Meie Script":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Merienda:{category:"handwriting",variants:"400,700",subsets:"latin-ext,latin"},"Merienda One":{category:"handwriting",variants:"400",subsets:"latin"},Merriweather:{category:"serif",variants:"300,300i,400,400i,700,700i,900,900i",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},
"Merriweather Sans":{category:"sans-serif",variants:"300,300i,400,400i,700,700i,800,800i",subsets:"latin-ext,latin"},Metal:{category:"display",variants:"400",subsets:"khmer"},"Metal Mania":{category:"display",variants:"400",subsets:"latin-ext,latin"},Metamorphous:{category:"display",variants:"400",subsets:"latin-ext,latin"},Metrophobic:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,vietnamese"},Michroma:{category:"sans-serif",variants:"400",subsets:"latin"},Milonga:{category:"display",
variants:"400",subsets:"latin-ext,latin"},Miltonian:{category:"display",variants:"400",subsets:"latin"},"Miltonian Tattoo":{category:"display",variants:"400",subsets:"latin"},Mina:{category:"sans-serif",variants:"400,700",subsets:"bengali,latin-ext,latin"},Miniver:{category:"display",variants:"400",subsets:"latin"},"Miriam Libre":{category:"sans-serif",variants:"400,700",subsets:"hebrew,latin-ext,latin"},Mirza:{category:"display",variants:"400,500,600,700",subsets:"latin-ext,latin,arabic"},"Miss Fajardose":{category:"handwriting",
variants:"400",subsets:"latin-ext,latin"},Mitr:{category:"sans-serif",variants:"200,300,400,500,600,700",subsets:"thai,latin-ext,latin,vietnamese"},Modak:{category:"display",variants:"400",subsets:"devanagari,latin-ext,latin"},"Modern Antiqua":{category:"display",variants:"400",subsets:"latin-ext,latin"},Mogra:{category:"display",variants:"400",subsets:"gujarati,latin-ext,latin"},Molengo:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Molle:{category:"handwriting",variants:"400i",
subsets:"latin-ext,latin"},Monda:{category:"sans-serif",variants:"400,700",subsets:"latin-ext,latin"},Monofett:{category:"display",variants:"400",subsets:"latin"},Monoton:{category:"display",variants:"400",subsets:"latin"},"Monsieur La Doulaise":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Montaga:{category:"serif",variants:"400",subsets:"latin"},Montez:{category:"handwriting",variants:"400",subsets:"latin"},Montserrat:{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",
subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"Montserrat Alternates":{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"Montserrat Subrayada":{category:"sans-serif",variants:"400,700",subsets:"latin"},Moul:{category:"display",variants:"400",subsets:"khmer"},Moulpali:{category:"display",variants:"400",subsets:"khmer"},"Mountains of Christmas":{category:"display",
variants:"400,700",subsets:"latin"},"Mouse Memoirs":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Mr Bedfort":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Mr Dafoe":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Mr De Haviland":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Mrs Saint Delafield":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Mrs Sheppards":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},
Mukta:{category:"sans-serif",variants:"200,300,400,500,600,700,800",subsets:"devanagari,latin-ext,latin"},"Mukta Mahee":{category:"sans-serif",variants:"200,300,400,500,600,700,800",subsets:"gurmukhi,latin-ext,latin"},"Mukta Malar":{category:"sans-serif",variants:"200,300,400,500,600,700,800",subsets:"latin-ext,latin,tamil"},"Mukta Vaani":{category:"sans-serif",variants:"200,300,400,500,600,700,800",subsets:"gujarati,latin-ext,latin"},Muli:{category:"sans-serif",variants:"200,300,400,500,600,700,800,900,200i,300i,400i,500i,600i,700i,800i,900i",
subsets:"latin-ext,latin,vietnamese"},"Mystery Quest":{category:"display",variants:"400",subsets:"latin-ext,latin"},NTR:{category:"sans-serif",variants:"400",subsets:"latin,telugu"},"Nanum Brush Script":{category:"handwriting",variants:"400",subsets:"latin,korean"},"Nanum Gothic":{category:"sans-serif",variants:"400,700,800",subsets:"latin,korean"},"Nanum Gothic Coding":{category:"monospace",variants:"400,700",subsets:"latin,korean"},"Nanum Myeongjo":{category:"serif",variants:"400,700,800",subsets:"latin,korean"},
"Nanum Pen Script":{category:"handwriting",variants:"400",subsets:"latin,korean"},Neucha:{category:"handwriting",variants:"400",subsets:"latin,cyrillic"},Neuton:{category:"serif",variants:"200,300,400,400i,700,800",subsets:"latin-ext,latin"},"New Rocker":{category:"display",variants:"400",subsets:"latin-ext,latin"},"News Cycle":{category:"sans-serif",variants:"400,700",subsets:"latin-ext,latin"},Niconne:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Niramit:{category:"sans-serif",
variants:"200,200i,300,300i,400,400i,500,500i,600,600i,700,700i",subsets:"thai,latin-ext,latin,vietnamese"},"Nixie One":{category:"display",variants:"400",subsets:"latin"},Nobile:{category:"sans-serif",variants:"400,400i,500,500i,700,700i",subsets:"latin-ext,latin"},Nokora:{category:"serif",variants:"400,700",subsets:"khmer"},Norican:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Nosifer:{category:"display",variants:"400",subsets:"latin-ext,latin"},Notable:{category:"sans-serif",
variants:"400",subsets:"latin"},"Nothing You Could Do":{category:"handwriting",variants:"400",subsets:"latin"},"Noticia Text":{category:"serif",variants:"400,400i,700,700i",subsets:"latin-ext,latin,vietnamese"},"Noto Sans":{category:"sans-serif",variants:"400,400i,700,700i",subsets:"cyrillic-ext,devanagari,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Noto Sans HK":{category:"sans-serif",variants:"100,300,400,500,700,900",subsets:"chinese-hongkong,latin"},"Noto Sans JP":{category:"sans-serif",
variants:"100,300,400,500,700,900",subsets:"latin,japanese"},"Noto Sans KR":{category:"sans-serif",variants:"100,300,400,500,700,900",subsets:"latin,korean"},"Noto Sans SC":{category:"sans-serif",variants:"100,300,400,500,700,900",subsets:"latin,chinese-simplified"},"Noto Sans TC":{category:"sans-serif",variants:"100,300,400,500,700,900",subsets:"chinese-traditional,latin"},"Noto Serif":{category:"serif",variants:"400,400i,700,700i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},
"Noto Serif JP":{category:"serif",variants:"200,300,400,500,600,700,900",subsets:"latin,japanese"},"Noto Serif KR":{category:"serif",variants:"200,300,400,500,600,700,900",subsets:"latin,korean"},"Noto Serif SC":{category:"serif",variants:"200,300,400,500,600,700,900",subsets:"latin,chinese-simplified"},"Noto Serif TC":{category:"serif",variants:"200,300,400,500,600,700,900",subsets:"chinese-traditional,latin"},"Nova Cut":{category:"display",variants:"400",subsets:"latin"},"Nova Flat":{category:"display",
variants:"400",subsets:"latin"},"Nova Mono":{category:"monospace",variants:"400",subsets:"greek,latin"},"Nova Oval":{category:"display",variants:"400",subsets:"latin"},"Nova Round":{category:"display",variants:"400",subsets:"latin"},"Nova Script":{category:"display",variants:"400",subsets:"latin"},"Nova Slim":{category:"display",variants:"400",subsets:"latin"},"Nova Square":{category:"display",variants:"400",subsets:"latin"},Numans:{category:"sans-serif",variants:"400",subsets:"latin"},Nunito:{category:"sans-serif",
variants:"200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"Nunito Sans":{category:"sans-serif",variants:"200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i",subsets:"latin-ext,latin,vietnamese"},"Odibee Sans":{category:"display",variants:"400",subsets:"latin"},"Odor Mean Chey":{category:"display",variants:"400",subsets:"khmer"},Offside:{category:"display",variants:"400",subsets:"latin"},"Old Standard TT":{category:"serif",
variants:"400,400i,700",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},Oldenburg:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Oleo Script":{category:"display",variants:"400,700",subsets:"latin-ext,latin"},"Oleo Script Swash Caps":{category:"display",variants:"400,700",subsets:"latin-ext,latin"},"Open Sans":{category:"sans-serif",variants:"300,300i,400,400i,600,600i,700,700i,800,800i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Open Sans Condensed":{category:"sans-serif",
variants:"300,300i,700",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},Oranienbaum:{category:"serif",variants:"400",subsets:"cyrillic-ext,latin-ext,latin,cyrillic"},Orbitron:{category:"sans-serif",variants:"400,500,600,700,800,900",subsets:"latin"},Oregano:{category:"display",variants:"400,400i",subsets:"latin-ext,latin"},Orienta:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Original Surfer":{category:"display",variants:"400",subsets:"latin"},Oswald:{category:"sans-serif",
variants:"200,300,400,500,600,700",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},"Over the Rainbow":{category:"handwriting",variants:"400",subsets:"latin"},Overlock:{category:"display",variants:"400,400i,700,700i,900,900i",subsets:"latin-ext,latin"},"Overlock SC":{category:"display",variants:"400",subsets:"latin-ext,latin"},Overpass:{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i",subsets:"latin-ext,latin"},"Overpass Mono":{category:"monospace",
variants:"300,400,600,700",subsets:"latin-ext,latin"},Ovo:{category:"serif",variants:"400",subsets:"latin"},Oxygen:{category:"sans-serif",variants:"300,400,700",subsets:"latin-ext,latin"},"Oxygen Mono":{category:"monospace",variants:"400",subsets:"latin-ext,latin"},"PT Mono":{category:"monospace",variants:"400",subsets:"cyrillic-ext,latin-ext,latin,cyrillic"},"PT Sans":{category:"sans-serif",variants:"400,400i,700,700i",subsets:"cyrillic-ext,latin-ext,latin,cyrillic"},"PT Sans Caption":{category:"sans-serif",
variants:"400,700",subsets:"cyrillic-ext,latin-ext,latin,cyrillic"},"PT Sans Narrow":{category:"sans-serif",variants:"400,700",subsets:"cyrillic-ext,latin-ext,latin,cyrillic"},"PT Serif":{category:"serif",variants:"400,400i,700,700i",subsets:"cyrillic-ext,latin-ext,latin,cyrillic"},"PT Serif Caption":{category:"serif",variants:"400,400i",subsets:"cyrillic-ext,latin-ext,latin,cyrillic"},Pacifico:{category:"handwriting",variants:"400",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},Padauk:{category:"sans-serif",
variants:"400,700",subsets:"latin,myanmar"},Palanquin:{category:"sans-serif",variants:"100,200,300,400,500,600,700",subsets:"devanagari,latin-ext,latin"},"Palanquin Dark":{category:"sans-serif",variants:"400,500,600,700",subsets:"devanagari,latin-ext,latin"},Pangolin:{category:"handwriting",variants:"400",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},Paprika:{category:"display",variants:"400",subsets:"latin"},Parisienne:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},
"Passero One":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Passion One":{category:"display",variants:"400,700,900",subsets:"latin-ext,latin"},"Pathway Gothic One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Patrick Hand":{category:"handwriting",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Patrick Hand SC":{category:"handwriting",variants:"400",subsets:"latin-ext,latin,vietnamese"},Pattaya:{category:"sans-serif",variants:"400",subsets:"thai,latin-ext,latin,vietnamese,cyrillic"},
"Patua One":{category:"display",variants:"400",subsets:"latin"},Pavanam:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,tamil"},"Paytone One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,vietnamese"},Peddana:{category:"serif",variants:"400",subsets:"latin,telugu"},Peralta:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Permanent Marker":{category:"handwriting",variants:"400",subsets:"latin"},"Petit Formal Script":{category:"handwriting",variants:"400",
subsets:"latin-ext,latin"},Petrona:{category:"serif",variants:"400",subsets:"latin"},Philosopher:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"cyrillic-ext,latin,vietnamese,cyrillic"},Piedra:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Pinyon Script":{category:"handwriting",variants:"400",subsets:"latin"},"Pirata One":{category:"display",variants:"400",subsets:"latin-ext,latin"},Plaster:{category:"display",variants:"400",subsets:"latin-ext,latin"},Play:{category:"sans-serif",
variants:"400,700",subsets:"cyrillic-ext,greek,latin-ext,latin,vietnamese,cyrillic"},Playball:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Playfair Display":{category:"serif",variants:"400,500,600,700,800,900,400i,500i,600i,700i,800i,900i",subsets:"latin-ext,latin,vietnamese,cyrillic"},"Playfair Display SC":{category:"serif",variants:"400,400i,700,700i,900,900i",subsets:"latin-ext,latin,vietnamese,cyrillic"},Podkova:{category:"serif",variants:"400,500,600,700,800",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},
"Poiret One":{category:"display",variants:"400",subsets:"latin-ext,latin,cyrillic"},"Poller One":{category:"display",variants:"400",subsets:"latin"},Poly:{category:"serif",variants:"400,400i",subsets:"latin"},Pompiere:{category:"display",variants:"400",subsets:"latin"},"Pontano Sans":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Poor Story":{category:"display",variants:"400",subsets:"latin,korean"},Poppins:{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",
subsets:"devanagari,latin-ext,latin"},"Port Lligat Sans":{category:"sans-serif",variants:"400",subsets:"latin"},"Port Lligat Slab":{category:"serif",variants:"400",subsets:"latin"},"Pragati Narrow":{category:"sans-serif",variants:"400,700",subsets:"devanagari,latin-ext,latin"},Prata:{category:"serif",variants:"400",subsets:"cyrillic-ext,latin,vietnamese,cyrillic"},Preahvihear:{category:"display",variants:"400",subsets:"khmer"},"Press Start 2P":{category:"display",variants:"400",subsets:"cyrillic-ext,greek,latin-ext,latin,cyrillic"},
Pridi:{category:"serif",variants:"200,300,400,500,600,700",subsets:"thai,latin-ext,latin,vietnamese"},"Princess Sofia":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Prociono:{category:"serif",variants:"400",subsets:"latin"},Prompt:{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"thai,latin-ext,latin,vietnamese"},"Prosto One":{category:"display",variants:"400",subsets:"latin-ext,latin,cyrillic"},"Proza Libre":{category:"sans-serif",
variants:"400,400i,500,500i,600,600i,700,700i,800,800i",subsets:"latin-ext,latin"},"Public Sans":{category:"sans-serif",variants:"100,200,300,400,500,600,700,800,900,100i,200i,300i,400i,500i,600i,700i,800i,900i",subsets:"latin-ext,latin"},Puritan:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"latin"},"Purple Purse":{category:"display",variants:"400",subsets:"latin-ext,latin"},Quando:{category:"serif",variants:"400",subsets:"latin-ext,latin"},Quantico:{category:"sans-serif",variants:"400,400i,700,700i",
subsets:"latin"},Quattrocento:{category:"serif",variants:"400,700",subsets:"latin-ext,latin"},"Quattrocento Sans":{category:"sans-serif",variants:"400,400i,700,700i",subsets:"latin-ext,latin"},Questrial:{category:"sans-serif",variants:"400",subsets:"latin"},Quicksand:{category:"sans-serif",variants:"300,400,500,600,700",subsets:"latin-ext,latin,vietnamese"},Quintessential:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Qwigley:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},
"Racing Sans One":{category:"display",variants:"400",subsets:"latin-ext,latin"},Radley:{category:"serif",variants:"400,400i",subsets:"latin-ext,latin"},Rajdhani:{category:"sans-serif",variants:"300,400,500,600,700",subsets:"devanagari,latin-ext,latin"},Rakkas:{category:"display",variants:"400",subsets:"latin-ext,latin,arabic"},Raleway:{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"latin-ext,latin"},"Raleway Dots":{category:"display",
variants:"400",subsets:"latin-ext,latin"},Ramabhadra:{category:"sans-serif",variants:"400",subsets:"latin,telugu"},Ramaraja:{category:"serif",variants:"400",subsets:"latin,telugu"},Rambla:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"latin-ext,latin"},"Rammetto One":{category:"display",variants:"400",subsets:"latin-ext,latin"},Ranchers:{category:"display",variants:"400",subsets:"latin-ext,latin"},Rancho:{category:"handwriting",variants:"400",subsets:"latin"},Ranga:{category:"display",
variants:"400,700",subsets:"devanagari,latin-ext,latin"},Rasa:{category:"serif",variants:"300,400,500,600,700",subsets:"gujarati,latin-ext,latin"},Rationale:{category:"sans-serif",variants:"400",subsets:"latin"},"Ravi Prakash":{category:"display",variants:"400",subsets:"latin,telugu"},"Red Hat Display":{category:"sans-serif",variants:"400,400i,500,500i,700,700i,900,900i",subsets:"latin-ext,latin"},"Red Hat Text":{category:"sans-serif",variants:"400,400i,500,500i,700,700i",subsets:"latin-ext,latin"},
Redressed:{category:"handwriting",variants:"400",subsets:"latin"},"Reem Kufi":{category:"sans-serif",variants:"400",subsets:"latin,arabic"},"Reenie Beanie":{category:"handwriting",variants:"400",subsets:"latin"},Revalia:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Rhodium Libre":{category:"serif",variants:"400",subsets:"devanagari,latin-ext,latin"},Ribeye:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Ribeye Marrow":{category:"display",variants:"400",subsets:"latin-ext,latin"},
Righteous:{category:"display",variants:"400",subsets:"latin-ext,latin"},Risque:{category:"display",variants:"400",subsets:"latin-ext,latin"},Roboto:{category:"sans-serif",variants:"100,100i,300,300i,400,400i,500,500i,700,700i,900,900i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Roboto Condensed":{category:"sans-serif",variants:"300,300i,400,400i,700,700i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Roboto Mono":{category:"monospace",
variants:"100,100i,300,300i,400,400i,500,500i,700,700i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Roboto Slab":{category:"serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},Rochester:{category:"handwriting",variants:"400",subsets:"latin"},"Rock Salt":{category:"handwriting",variants:"400",subsets:"latin"},Rokkitt:{category:"serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},
Romanesco:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Ropa Sans":{category:"sans-serif",variants:"400,400i",subsets:"latin-ext,latin"},Rosario:{category:"sans-serif",variants:"300,400,500,600,700,300i,400i,500i,600i,700i",subsets:"latin-ext,latin,vietnamese"},Rosarivo:{category:"serif",variants:"400,400i",subsets:"latin-ext,latin"},"Rouge Script":{category:"handwriting",variants:"400",subsets:"latin"},"Rozha One":{category:"serif",variants:"400",subsets:"devanagari,latin-ext,latin"},
Rubik:{category:"sans-serif",variants:"300,300i,400,400i,500,500i,700,700i,900,900i",subsets:"hebrew,latin-ext,latin,cyrillic"},"Rubik Mono One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,cyrillic"},Ruda:{category:"sans-serif",variants:"400,700,900",subsets:"latin-ext,latin"},Rufina:{category:"serif",variants:"400,700",subsets:"latin-ext,latin"},"Ruge Boogie":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Ruluko:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},
"Rum Raisin":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Ruslan Display":{category:"display",variants:"400",subsets:"latin-ext,latin,cyrillic"},"Russo One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,cyrillic"},Ruthie:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Rye:{category:"display",variants:"400",subsets:"latin-ext,latin"},Sacramento:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Sahitya:{category:"serif",variants:"400,700",
subsets:"devanagari,latin"},Sail:{category:"display",variants:"400",subsets:"latin-ext,latin"},Saira:{category:"sans-serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},"Saira Condensed":{category:"sans-serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},"Saira Extra Condensed":{category:"sans-serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},"Saira Semi Condensed":{category:"sans-serif",
variants:"100,200,300,400,500,600,700,800,900",subsets:"latin-ext,latin,vietnamese"},"Saira Stencil One":{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese"},Salsa:{category:"display",variants:"400",subsets:"latin"},Sanchez:{category:"serif",variants:"400,400i",subsets:"latin-ext,latin"},Sancreek:{category:"display",variants:"400",subsets:"latin-ext,latin"},Sansita:{category:"sans-serif",variants:"400,400i,700,700i,800,800i,900,900i",subsets:"latin-ext,latin"},Sarabun:{category:"sans-serif",
variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i",subsets:"thai,latin-ext,latin,vietnamese"},Sarala:{category:"sans-serif",variants:"400,700",subsets:"devanagari,latin-ext,latin"},Sarina:{category:"display",variants:"400",subsets:"latin-ext,latin"},Sarpanch:{category:"sans-serif",variants:"400,500,600,700,800,900",subsets:"devanagari,latin-ext,latin"},Satisfy:{category:"handwriting",variants:"400",subsets:"latin"},"Sawarabi Gothic":{category:"sans-serif",variants:"400",
subsets:"latin-ext,latin,japanese,vietnamese,cyrillic"},"Sawarabi Mincho":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,japanese"},Scada:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"cyrillic-ext,latin-ext,latin,cyrillic"},Scheherazade:{category:"serif",variants:"400,700",subsets:"latin,arabic"},Schoolbell:{category:"handwriting",variants:"400",subsets:"latin"},"Scope One":{category:"serif",variants:"400",subsets:"latin-ext,latin"},"Seaweed Script":{category:"display",
variants:"400",subsets:"latin-ext,latin"},"Secular One":{category:"sans-serif",variants:"400",subsets:"hebrew,latin-ext,latin"},"Sedgwick Ave":{category:"handwriting",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Sedgwick Ave Display":{category:"handwriting",variants:"400",subsets:"latin-ext,latin,vietnamese"},Sevillana:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Seymour One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin,cyrillic"},"Shadows Into Light":{category:"handwriting",
variants:"400",subsets:"latin"},"Shadows Into Light Two":{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},Shanti:{category:"sans-serif",variants:"400",subsets:"latin"},Share:{category:"display",variants:"400,400i,700,700i",subsets:"latin-ext,latin"},"Share Tech":{category:"sans-serif",variants:"400",subsets:"latin"},"Share Tech Mono":{category:"monospace",variants:"400",subsets:"latin"},Shojumaru:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Short Stack":{category:"handwriting",
variants:"400",subsets:"latin"},Shrikhand:{category:"display",variants:"400",subsets:"gujarati,latin-ext,latin"},Siemreap:{category:"display",variants:"400",subsets:"khmer"},"Sigmar One":{category:"display",variants:"400",subsets:"latin-ext,latin,vietnamese"},Signika:{category:"sans-serif",variants:"300,400,600,700",subsets:"latin-ext,latin"},"Signika Negative":{category:"sans-serif",variants:"300,400,600,700",subsets:"latin-ext,latin"},Simonetta:{category:"display",variants:"400,400i,900,900i",subsets:"latin-ext,latin"},
"Single Day":{category:"display",variants:"400",subsets:"korean"},Sintony:{category:"sans-serif",variants:"400,700",subsets:"latin-ext,latin"},"Sirin Stencil":{category:"display",variants:"400",subsets:"latin"},"Six Caps":{category:"sans-serif",variants:"400",subsets:"latin"},Skranji:{category:"display",variants:"400,700",subsets:"latin-ext,latin"},"Slabo 13px":{category:"serif",variants:"400",subsets:"latin-ext,latin"},"Slabo 27px":{category:"serif",variants:"400",subsets:"latin-ext,latin"},Slackey:{category:"display",
variants:"400",subsets:"latin"},Smokum:{category:"display",variants:"400",subsets:"latin"},Smythe:{category:"display",variants:"400",subsets:"latin"},Sniglet:{category:"display",variants:"400,800",subsets:"latin-ext,latin"},Snippet:{category:"sans-serif",variants:"400",subsets:"latin"},"Snowburst One":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Sofadi One":{category:"display",variants:"400",subsets:"latin"},Sofia:{category:"handwriting",variants:"400",subsets:"latin"},Solway:{category:"serif",
variants:"300,400,500,700,800",subsets:"latin"},"Song Myung":{category:"serif",variants:"400",subsets:"latin,korean"},"Sonsie One":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Sorts Mill Goudy":{category:"serif",variants:"400,400i",subsets:"latin-ext,latin"},"Source Code Pro":{category:"monospace",variants:"200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,900,900i",subsets:"cyrillic-ext,greek,latin-ext,latin,vietnamese,cyrillic"},"Source Sans Pro":{category:"sans-serif",variants:"200,200i,300,300i,400,400i,600,600i,700,700i,900,900i",
subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Source Serif Pro":{category:"serif",variants:"400,600,700",subsets:"latin-ext,latin"},"Space Mono":{category:"monospace",variants:"400,400i,700,700i",subsets:"latin-ext,latin,vietnamese"},"Special Elite":{category:"display",variants:"400",subsets:"latin"},Spectral:{category:"serif",variants:"200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i",subsets:"latin-ext,latin,vietnamese,cyrillic"},"Spectral SC":{category:"serif",
variants:"200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i",subsets:"latin-ext,latin,vietnamese,cyrillic"},"Spicy Rice":{category:"display",variants:"400",subsets:"latin"},Spinnaker:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Spirax:{category:"display",variants:"400",subsets:"latin"},"Squada One":{category:"display",variants:"400",subsets:"latin"},"Sree Krushnadevaraya":{category:"serif",variants:"400",subsets:"latin,telugu"},Sriracha:{category:"handwriting",variants:"400",
subsets:"thai,latin-ext,latin,vietnamese"},Srisakdi:{category:"display",variants:"400,700",subsets:"thai,latin-ext,latin,vietnamese"},Staatliches:{category:"display",variants:"400",subsets:"latin-ext,latin"},Stalemate:{category:"handwriting",variants:"400",subsets:"latin-ext,latin"},"Stalinist One":{category:"display",variants:"400",subsets:"latin-ext,latin,cyrillic"},"Stardos Stencil":{category:"display",variants:"400,700",subsets:"latin"},"Stint Ultra Condensed":{category:"display",variants:"400",
subsets:"latin-ext,latin"},"Stint Ultra Expanded":{category:"display",variants:"400",subsets:"latin-ext,latin"},Stoke:{category:"serif",variants:"300,400",subsets:"latin-ext,latin"},Strait:{category:"sans-serif",variants:"400",subsets:"latin"},Stylish:{category:"sans-serif",variants:"400",subsets:"latin,korean"},"Sue Ellen Francisco":{category:"handwriting",variants:"400",subsets:"latin"},"Suez One":{category:"serif",variants:"400",subsets:"hebrew,latin-ext,latin"},"Sulphur Point":{category:"sans-serif",
variants:"300,400,700",subsets:"latin-ext,latin"},Sumana:{category:"serif",variants:"400,700",subsets:"devanagari,latin-ext,latin"},Sunflower:{category:"sans-serif",variants:"300,500,700",subsets:"latin,korean"},Sunshiney:{category:"handwriting",variants:"400",subsets:"latin"},"Supermercado One":{category:"display",variants:"400",subsets:"latin"},Sura:{category:"serif",variants:"400,700",subsets:"devanagari,latin-ext,latin"},Suranna:{category:"serif",variants:"400",subsets:"latin,telugu"},Suravaram:{category:"serif",
variants:"400",subsets:"latin,telugu"},Suwannaphum:{category:"display",variants:"400",subsets:"khmer"},"Swanky and Moo Moo":{category:"handwriting",variants:"400",subsets:"latin"},Syncopate:{category:"sans-serif",variants:"400,700",subsets:"latin"},Tajawal:{category:"sans-serif",variants:"200,300,400,500,700,800,900",subsets:"latin,arabic"},Tangerine:{category:"handwriting",variants:"400,700",subsets:"latin"},Taprom:{category:"display",variants:"400",subsets:"khmer"},Tauri:{category:"sans-serif",
variants:"400",subsets:"latin-ext,latin"},Taviraj:{category:"serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"thai,latin-ext,latin,vietnamese"},Teko:{category:"sans-serif",variants:"300,400,500,600,700",subsets:"devanagari,latin-ext,latin"},Telex:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Tenali Ramakrishna":{category:"sans-serif",variants:"400",subsets:"latin,telugu"},"Tenor Sans":{category:"sans-serif",variants:"400",
subsets:"latin-ext,latin,cyrillic"},"Text Me One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Thasadith:{category:"sans-serif",variants:"400,400i,700,700i",subsets:"thai,latin-ext,latin,vietnamese"},"The Girl Next Door":{category:"handwriting",variants:"400",subsets:"latin"},Tienne:{category:"serif",variants:"400,700,900",subsets:"latin"},Tillana:{category:"handwriting",variants:"400,500,600,700,800",subsets:"devanagari,latin-ext,latin"},Timmana:{category:"sans-serif",variants:"400",
subsets:"latin,telugu"},Tinos:{category:"serif",variants:"400,400i,700,700i",subsets:"cyrillic-ext,greek,hebrew,greek-ext,latin-ext,latin,vietnamese,cyrillic"},"Titan One":{category:"display",variants:"400",subsets:"latin-ext,latin"},"Titillium Web":{category:"sans-serif",variants:"200,200i,300,300i,400,400i,600,600i,700,700i,900",subsets:"latin-ext,latin"},Tomorrow:{category:"sans-serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"latin-ext,latin"},
"Trade Winds":{category:"display",variants:"400",subsets:"latin"},Trirong:{category:"serif",variants:"100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i",subsets:"thai,latin-ext,latin,vietnamese"},Trocchi:{category:"serif",variants:"400",subsets:"latin-ext,latin"},Trochut:{category:"display",variants:"400,400i,700",subsets:"latin"},Trykker:{category:"serif",variants:"400",subsets:"latin-ext,latin"},"Tulpen One":{category:"display",variants:"400",subsets:"latin"},"Turret Road":{category:"display",
variants:"200,300,400,500,700,800",subsets:"latin-ext,latin"},Ubuntu:{category:"sans-serif",variants:"300,300i,400,400i,500,500i,700,700i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,cyrillic"},"Ubuntu Condensed":{category:"sans-serif",variants:"400",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,cyrillic"},"Ubuntu Mono":{category:"monospace",variants:"400,400i,700,700i",subsets:"cyrillic-ext,greek,greek-ext,latin-ext,latin,cyrillic"},Ultra:{category:"serif",variants:"400",subsets:"latin"},
"Uncial Antiqua":{category:"display",variants:"400",subsets:"latin"},Underdog:{category:"display",variants:"400",subsets:"latin-ext,latin,cyrillic"},"Unica One":{category:"display",variants:"400",subsets:"latin-ext,latin"},UnifrakturCook:{category:"display",variants:"700",subsets:"latin"},UnifrakturMaguntia:{category:"display",variants:"400",subsets:"latin"},Unkempt:{category:"display",variants:"400,700",subsets:"latin"},Unlock:{category:"display",variants:"400",subsets:"latin"},Unna:{category:"serif",
variants:"400,400i,700,700i",subsets:"latin-ext,latin"},VT323:{category:"monospace",variants:"400",subsets:"latin-ext,latin,vietnamese"},"Vampiro One":{category:"display",variants:"400",subsets:"latin-ext,latin"},Varela:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Varela Round":{category:"sans-serif",variants:"400",subsets:"hebrew,latin-ext,latin,vietnamese"},"Vast Shadow":{category:"display",variants:"400",subsets:"latin"},"Vesper Libre":{category:"serif",variants:"400,500,700,900",
subsets:"devanagari,latin-ext,latin"},Vibes:{category:"display",variants:"400",subsets:"latin,arabic"},Vibur:{category:"handwriting",variants:"400",subsets:"latin"},Vidaloka:{category:"serif",variants:"400",subsets:"latin"},Viga:{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},Voces:{category:"display",variants:"400",subsets:"latin-ext,latin"},Volkhov:{category:"serif",variants:"400,400i,700,700i",subsets:"latin"},Vollkorn:{category:"serif",variants:"400,400i,600,600i,700,700i,900,900i",
subsets:"cyrillic-ext,greek,latin-ext,latin,vietnamese,cyrillic"},"Vollkorn SC":{category:"serif",variants:"400,600,700,900",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},Voltaire:{category:"sans-serif",variants:"400",subsets:"latin"},"Waiting for the Sunrise":{category:"handwriting",variants:"400",subsets:"latin"},Wallpoet:{category:"display",variants:"400",subsets:"latin"},"Walter Turncoat":{category:"handwriting",variants:"400",subsets:"latin"},Warnes:{category:"display",variants:"400",
subsets:"latin-ext,latin"},Wellfleet:{category:"display",variants:"400",subsets:"latin-ext,latin"},"Wendy One":{category:"sans-serif",variants:"400",subsets:"latin-ext,latin"},"Wire One":{category:"sans-serif",variants:"400",subsets:"latin"},"Work Sans":{category:"sans-serif",variants:"100,200,300,400,500,600,700,800,900",subsets:"latin-ext,latin"},"Yanone Kaffeesatz":{category:"sans-serif",variants:"200,300,400,500,600,700",subsets:"latin-ext,latin,vietnamese,cyrillic"},Yantramanav:{category:"sans-serif",
variants:"100,300,400,500,700,900",subsets:"devanagari,latin-ext,latin"},"Yatra One":{category:"display",variants:"400",subsets:"devanagari,latin-ext,latin"},Yellowtail:{category:"handwriting",variants:"400",subsets:"latin"},"Yeon Sung":{category:"display",variants:"400",subsets:"latin,korean"},"Yeseva One":{category:"display",variants:"400",subsets:"cyrillic-ext,latin-ext,latin,vietnamese,cyrillic"},Yesteryear:{category:"handwriting",variants:"400",subsets:"latin"},Yrsa:{category:"serif",variants:"300,400,500,600,700",
subsets:"latin-ext,latin"},"ZCOOL KuaiLe":{category:"display",variants:"400",subsets:"latin,chinese-simplified"},"ZCOOL QingKe HuangYou":{category:"display",variants:"400",subsets:"latin,chinese-simplified"},"ZCOOL XiaoWei":{category:"serif",variants:"400",subsets:"latin,chinese-simplified"},Zeyada:{category:"handwriting",variants:"400",subsets:"latin"},"Zhi Mang Xing":{category:"handwriting",variants:"400",subsets:"latin,chinese-simplified"},"Zilla Slab":{category:"serif",variants:"300,300i,400,400i,500,500i,600,600i,700,700i",
subsets:"latin-ext,latin"},"Zilla Slab Highlight":{category:"display",variants:"400,700",subsets:"latin-ext,latin"}},w={en:{selectFont:"Select a font",search:"Search",allLangs:"All languages",favFonts:"Favorite fonts",localFonts:"Local fonts",googleFonts:"Google fonts",select:"Select",styles:"styles",sampleText:"The quick brown fox jumps over the lazy dog.",sampleTextEditable:"Sample text, editable"},nl:{selectFont:"Kies een lettertype",search:"Zoek",allLangs:"Alle talen",favFonts:"Favoriete lettertypen",
localFonts:"Lokale lettertypen",googleFonts:"Google lettertypen",select:"Kies",styles:"stijlen",sampleText:"Wazig tv-filmpje rond chique skybox.",sampleTextEditable:"Voorbeeldtekst, bewerkbaar"},de:{selectFont:"Schriftart w\u00e4hlen",search:"Suchen",allLangs:"Alle Sprachen",favFonts:"Favorisierte Schriftarten",localFonts:"Lokale Schriftarten",googleFonts:"Google Schriftarten",select:"W\u00e4hlen",styles:"stile",sampleText:"Vogel Quax zwickt Johnys Pferd Bim.",sampleTextEditable:"Beispieltext, editierbar"},
es:{selectFont:"Seleccionar fuente",search:"Buscar",allLangs:"Todos los idiomas",favFonts:"Fuentes favoritas",localFonts:"Fuentes locales",googleFonts:"Fuentes de Google",select:"Seleccionar",styles:"estilos",sampleText:"La cig\u00fce\u00f1a tocaba cada vez mejor el saxof\u00f3n y el b\u00faho ped\u00eda kiwi y queso",sampleTextEditable:"Texto de ejemplo, editable"}},x={lang:"en",variants:!0,nrRecents:3,lazyLoad:!0,debug:!1,localFontsUrl:"/fonts/",parentElement:"body",localFonts:{Arial:{category:"sans-serif",
variants:"400,400i,600,600i"},"Courier New":{category:"monospace",variants:"400,400i,600,600i"},Georgia:{category:"serif",variants:"400,400i,600,600i"},Tahoma:{category:"sans-serif",variants:"400,400i,600,600i"},"Times New Roman":{category:"serif",variants:"400,400i,600,600i"},"Trebuchet MS":{category:"sans-serif",variants:"400,400i,600,600i"},Verdana:{category:"sans-serif",variants:"400,400i,600,600i"}}},y=function(){function k(b,c){if(c.googleFonts&&Array.isArray(c.googleFonts)){for(var d={},h,
g=0;g<c.googleFonts.length;g++)h=c.googleFonts[g],d[h]=p[h];c.googleFonts=d}else!1!==c.googleFonts&&(c.googleFonts=p);c.localFonts||(c.localFonts=[]);w[c.lang]||(c.lang="en");this.dictionary=w[c.lang];this.allFonts={google:c.googleFonts,local:c.localFonts};this.options=c;this.$original=a(b);this.setupHtml();this.bindEvents()}k.prototype={loadFont:function(b,c){if(!e[c])switch(e[c]=!0,b){case "google":b="https://fonts.googleapis.com/css?family="+c.replace(/ /g,"+")+":"+this.options.googleFonts[c].variants+
"&display=swap";this.options.debug&&console.log("Loading Google font "+c+" from "+b);a("head").append(a("<link>",{href:b,rel:"stylesheet",type:"text/css"}));break;case "local":this.options.debug&&console.log("Loading local font "+c),a("head").append("<style> @font-face { font-family:'"+c+"'; src:local('"+c+"'), url('"+this.options.localFontsUrl+c+".woff') format('woff'); } </style>")}},showSample:function(b){a(".fp-sample",this.$element).css({fontFamily:"'"+b.data("font-family")+"'",fontStyle:b.data("font-italic")?
"italic":"normal",fontWeight:b.data("font-weight")||400})},keyDown:function(b,c){function d(a){a.preventDefault();a.stopPropagation()}c=a("li.fp-active:visible",this.$results);if(49<=b.keyCode&&57>=b.keyCode||97<=b.keyCode&&105>=b.keyCode)d(b),a(".fp-pill[data-font-weight="+100*(b.keyCode-(97<=b.keyCode?96:48))+"]",c).trigger("click");else switch(b.keyCode){case 73:d(b);a(".fp-pill.italic:visible",c).trigger("click");break;case 38:d(b);$prevLi=c.prevAll(":not(.fp-divider):visible:first");0==$prevLi.length&&
($prevLi=a("li:not(.fp-divider):visible:last",this.$results));$prevLi.trigger("mouseenter").trigger("click");m($prevLi[0]);break;case 40:d(b);$nextLi=c.nextAll(":not(.fp-divider):visible:first");0==$nextLi.length&&($nextLi=a("li:not(.fp-divider):visible:first",this.$results));$nextLi.trigger("mouseenter").trigger("click");m($nextLi[0]);break;case 13:d(b);a("li.fp-active",this.$results).find("button.apply").trigger("click");break;case 27:d(b),a(".fp-close",this.$modal).trigger("click")}},mouseEnter:function(b,
c){b=a(c);a("li.fp-hover",this.$results).removeClass("fp-hover");b.addClass("fp-hover");this.loadFont(b.data("font-type"),b.data("font-family"));this.showSample(b)},click:function(b,c){var d=a(c),h=this,g=d.data("font-type"),e=d.data("font-family"),f=d.data("font-italic")||!1,k=d.data("font-weight")||400,l=a("li[data-font-family='"+e+"']",this.$results),m=(b=n("favs"))?b.split(","):[];a("li.fp-active",this.$results).removeClass("fp-active").find(".fp-variants,.fp-btns").remove();d.addClass("fp-active");
b=a('<div class="fp-btns">');c=-1!=m.indexOf(g+":"+e);b.append(a('<span class="fp-favorite'+(c?" checked":"")+'"></span>').on("click",function(b){b.stopPropagation();b=m.indexOf(g+":"+e);a(this).is(".checked")?-1!=b&&m.splice(b,1):-1==b&&m.push(g+":"+e);a(this).toggleClass("checked");n("favs",m.join(","))}),a('<button type="button" class="fp-btn apply">').html(this.dictionary.select).on("click",function(a){a.stopPropagation();f=d.data("font-italic");k=d.data("font-weight")||400;a=e;h.options.variants&&
(a+=":"+k+(f?"i":""));h.$select.css({fontFamily:e,fontStyle:f?"italic":"normal",fontWeight:k}).find("span").html(a);h.$original.val(a).change();h.toggleModal("hide");if(h.options.nrRecents){a=n("recents");var b=d.data("font-type")+":"+e;a=a?a.split(","):[];-1==a.indexOf(b)&&a.unshift(b);a=a.slice(0,h.options.nrRecents);n("recents",a.join(","))}}));b.appendTo(d);b=this.allFonts[g][e];var q=b.variants?b.variants.split(","):[];if(this.options.variants&&1<q.length){b=a('<div class="fp-variants">');c=
!1;for(var r={},t=0;t<q.length;r={$jscomp$loop$prop$fontWeight$1:r.$jscomp$loop$prop$fontWeight$1},t++)if(/i$/.test(q[t]))c||(c=!0);else{var p=q[t];r.$jscomp$loop$prop$fontWeight$1=+p.replace(/i$/,"");0<t&&b.append(" ");a('<span data-font-weight="'+r.$jscomp$loop$prop$fontWeight$1+'" class="fp-pill weight'+(k==r.$jscomp$loop$prop$fontWeight$1?" checked":"")+'">').text(p).on("click",function(b){return function(c){c.stopPropagation();-1==q.indexOf(b.$jscomp$loop$prop$fontWeight$1+"i")?(a(".fp-pill.italic",
d).removeClass("checked").css("display","none"),f=!1,d.data("font-italic",f)):a(".fp-pill.italic",d).css("display","");a("span.fp-pill.weight",d).removeClass("checked");a(this).addClass("checked");l.data("font-weight",b.$jscomp$loop$prop$fontWeight$1);h.showSample(d)}}(r)).appendTo(b)}c&&(b.append(" "),a('<span class="fp-pill italic '+(f?" checked":"")+'">').css("display",-1==q.indexOf(k+"i")?"none":"").html("italic").on("click",function(b){b.stopPropagation();f=!f;a(this).toggleClass("checked");
l.data("font-italic",f);h.showSample(d)}).appendTo(b));d.append(b)}},fontSpecToComponents:function(a){var b=a.split(":");a=b[0];var d=b[1]||"400";b=!1;/(\d+)i$/.test(d)?(b=!0,d=+RegExp.$1):d=+d;return{family:a,weight:d,italic:b}},applyFontToOriginalInput:function(a){var b=this.fontSpecToComponents(a);this.loadFont(p[b.family]?"google":"local",b.family);this.$select.css({fontFamily:b.family,fontStyle:b.italic?"italic":"normal",fontWeight:b.weight}).find("span").html(a)},bindEvents:function(){var b=
this;this.$results.on("keydown",function(a){b.keyDown(a,this)}).on("mouseenter","li:not(.fp-divider):visible",function(a){b.mouseEnter(a,this)}).on("click","li:not(.fp-divider):visible",function(a){b.click(a,this)}).on("dblclick","li:not(.fp-divider):visible",function(b){a("li.fp-active",this.$results).find("button.apply").trigger("click")});this.$original.on("change",function(a){b.applyFontToOriginalInput(this.value)})},lazyLoad:function(){if(window.IntersectionObserver){var b=this,c,d=new IntersectionObserver(function(h){[].forEach.call(h,
function(g){0<g.intersectionRatio&&(d.unobserve(g.target),c=a(g.target),b.loadFont(c.data("font-type"),c.data("font-family")),c.css("fontFamily","'"+c.data("font-family")+"'"))})});a("li:not(.fp-divider)",this.$results).each(function(){d.observe(this)})}},toggleModal:function(b){b||(b=this.$modal.is(":visible")?"hide":"show");if("hide"==b)a(".fp-fav,.fp-variants,.fp-btns").remove(),this.$modal.css("display","none"),a(".fp-modal-backdrop",this.$element).remove(),a(this.options.parentElement).removeClass("fp-modal-open"),
a("span",this.$select).focus();else{a(this.options.parentElement).addClass("fp-modal-open");this.$element.append(a('<div class="fp-modal-backdrop">').on("click",function(){a(".fp-close",this.$modal).trigger("click")}));this.$modal.css("display","flex");this.getFavorites();if(b=this.$original.val()){b=this.fontSpecToComponents(b);var c=a("li[data-font-family='"+b.family+"']",this.$results);0<c.length&&(c.data({"font-italic":b.italic,"font-weight":b.weight}).eq(0).trigger("click"),m(c[0]))}else this.$results.scrollTop(0);
this.options.lazyLoad&&this.lazyLoad();this.$results.focus()}},applyFilter:function(){var b=this.$lang.val(),c=this.$search.val().trim(),d=[];a(".fp-category",this.$filter).each(function(){a(this).hasClass("checked")&&d.push(a(this).data("category"))});n("lang",""===b?!1:b);n("cats",d.join(","));for(var h in this.allFonts)for(var g in this.allFonts[h]){var e=this.allFonts[h][g],f=e.subsets?e.subsets.split(","):[],k=a("li[data-font-family='"+g+"']",this.$results);e=e.category||"other";""!=b&&-1==f.indexOf(b)||
-1==d.indexOf(e)||""!=c&&-1==g.toLowerCase().indexOf(c.toLowerCase())?k.hide():k.show()}},getFilterUI:function(){var b=this,c=a('<div class="fp-search-wrap">');this.$filter=a('<div class="fp-filter">');this.$search=a("<input>",{"class":"fp-search",type:"text",placeholder:this.dictionary.search,spellcheck:!1}).on("keyup",function(){b.applyFilter()}).appendTo(c);a('<div class="fp-clear">').html("&times;").on("click",function(){b.$search.val("").focus();b.applyFilter()}).appendTo(c);var d=['<option value="">'+
this.dictionary.allLangs+"</option>"],e;for(e in f)d.push('<option value="'+e+'">'+f[e]+"</option>");this.$lang=a('<select class="fp-lang">').on("change",function(){b.applyFilter()}).html(d.join(""));this.$filter.append(a('<div class="fp-row">').append(c,this.$lang));a('<div class="hr">').appendTo(this.$filter);c=l.slice(0);c.push("other");for(d=0;d<c.length;d++)a('<span class="fp-category fp-pill checked">').data("category",c[d]).text(c[d]).on("click",function(){a(this).toggleClass("checked");b.applyFilter()}).appendTo(this.$filter)},
getFontsList:function(){function b(b,e){var f=c.allFonts[b][e],h="";if(f.category||f.variants)h=[],f.category&&h.push(f.category),c.options.variants&&f.variants&&(f=f.variants.split(",").length,1<f&&h.push(f+" "+c.dictionary.styles)),h=" <small>"+h.join(", ")+"</small>";g=a("<li>",{"data-font-type":b,"data-font-family":e}).html(e+h);d.append(g[0])}var c=this,d=document.createDocumentFragment(),e;if(0<Object.keys(this.options.localFonts).length){var g=a('<li class="fp-divider">'+this.dictionary.localFonts+
"</li>");d.append(g[0]);for(e in this.options.localFonts)b("local",e)}if(0<Object.keys(this.options.googleFonts).length)for(e in g=a('<li class="fp-divider">'+this.dictionary.googleFonts+"</li>"),d.append(g[0]),this.options.googleFonts)b("google",e);this.$results=a("<ul>",{"class":"fp-results",tabindex:0}).append(d)},getFavorites:function(){var b=n("favs"),c=n("recents");b=b?b.split(","):[];c=this.options.nrRecents&&c?c.split(","):[];c=c.slice(0);for(var d=0;d<b.length;d++)-1==c.indexOf(b[d])&&c.push(b[d]);
b=document.createDocumentFragment();var e=null;for(d=0;d<c.length;d++){var f=c[d].split(":");fontType=f[0];fontFamily=f[1];if(font=this.allFonts[fontType][fontFamily])f=a("[data-font-family='"+fontFamily+"']",this.$results),0<f.length&&(e=f.clone().addClass("fp-fav"),b.append(e[0]))}null!==e&&(b.prepend(a('<li class="fp-fav fp-divider">'+this.dictionary.favFonts+"</li>")[0]),this.$results.prepend(b))},setupHtml:function(){var b=this,c=this.$original.val();this.$original.hide();this.$select=a('<div class="font-picker fp-select">').on("click",
function(){b.toggleModal("show")}).on("keydown",function(a){32==a.keyCode&&(a.stopPropagation(),a.preventDefault(),b.toggleModal("show"))}).append(a('<span tabindex="0">'+(c?c:this.dictionary.selectFont)+"</span>"));this.$original.after(this.$select);this.$element=a("<div>",{"class":"font-picker"});this.$modal=a('<div class="fp-modal">').appendTo(this.$element);this.$modal.append(a('<div class="fp-header">').append(a('<div class="fp-icons">').append(a('<span class="fp-close">&times</span>').on("click",
function(){b.toggleModal("hide")})),a("<h5>").text(this.dictionary.selectFont)));this.getFilterUI();this.$modal.append(this.$filter);this.$sample=a("<div>",{"class":"fp-sample",contenteditable:!0,spellcheck:!1,title:this.dictionary.sampleTextEditable}).html(this.dictionary.sampleText).appendTo(this.$modal);this.getFontsList();this.$modal.append(this.$results);var d=n("lang"),e=n("cats");d&&this.$lang.val(d);e&&(e=e.split(","),a(".fp-category",this.$filter).each(function(){-1==e.indexOf(a(this).data("category"))?
a(this).removeClass("checked"):a(this).addClass("checked")}));(d||e)&&b.applyFilter();c&&b.applyFontToOriginalInput(c);a(this.options.parentElement).append(this.$element)},show:function(){var b=a(this).data("plugin_fontpicker");if(!b.$select)throw Error("jquery.fontpicker: Cannot show, as I've been destroyed.");b.toggleModal("show")},hide:function(){var b=a(this).data("plugin_fontpicker");if(!b.$select)throw Error("jquery.fontpicker: Cannot hide, as I've been destroyed.");b.toggleModal("hide")},destroy:function(){var b=
a(this).data("plugin_fontpicker");if(!b.$select)throw Error("jquery.fontpicker: Cannot destroy, as I've been destroyed already.");b.toggleModal("hide");b.$select.remove();b.$element.remove();b.$original.off("setFont");b.$original.show();b.$select=b.$element=b.$original=b.$modal=null;a(b).removeData("plugin_fontpicker")}};return k}();if("string"===typeof arguments[0]){var u=arguments[0],z=Array.prototype.slice.call(arguments,1),v;this.each(function(){if(a.data(this,"plugin_fontpicker")&&"function"===
typeof a.data(this,"plugin_fontpicker")[u])v=a.data(this,"plugin_fontpicker")[u].apply(this,z);else throw Error("jquery.fontpicker: Method "+u+" does not exist.");});return void 0!==v?v:this}return this.each(function(){a.data(this,"plugin_fontpicker")||(k&&a.extend(x,k),a.data(this,"plugin_fontpicker",new y(this,x)))})}})(jQuery);

var jsdom,virtualWindow,fabric=fabric||{version:"5.3.0"};function resizeCanvasIfNeeded(t){var e=t.targetCanvas,i=e.width,r=e.height,n=t.destinationWidth,t=t.destinationHeight;i===n&&r===t||(e.width=n,e.height=t)}function copyGLTo2DDrawImage(t,e){var t=t.canvas,e=e.targetCanvas,i=e.getContext("2d"),r=(i.translate(0,e.height),i.scale(1,-1),t.height-e.height);i.drawImage(t,0,r,e.width,e.height,0,0,e.width,e.height)}function copyGLTo2DPutImageData(t,e){var i=e.targetCanvas.getContext("2d"),r=e.destinationWidth,e=e.destinationHeight,n=r*e*4,s=new Uint8Array(this.imageBuffer,0,n),n=new Uint8ClampedArray(this.imageBuffer,0,n),t=(t.readPixels(0,0,r,e,t.RGBA,t.UNSIGNED_BYTE,s),new ImageData(n,r,e));i.putImageData(t,0,0)}"undefined"!=typeof exports?exports.fabric=fabric:"function"==typeof define&&define.amd&&define([],function(){return fabric}),"undefined"!=typeof document&&"undefined"!=typeof window?(document instanceof("undefined"!=typeof HTMLDocument?HTMLDocument:Document)?fabric.document=document:fabric.document=document.implementation.createHTMLDocument(""),fabric.window=window):(jsdom=require("jsdom"),virtualWindow=new jsdom.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window,fabric.document=virtualWindow.document,fabric.jsdomImplForWrapper=require("jsdom/lib/jsdom/living/generated/utils").implForWrapper,fabric.nodeCanvas=require("jsdom/lib/jsdom/utils").Canvas,fabric.window=virtualWindow,DOMParser=fabric.window.DOMParser),fabric.isTouchSupported="ontouchstart"in fabric.window||"ontouchstart"in fabric.document||fabric.window&&fabric.window.navigator&&0<fabric.window.navigator.maxTouchPoints,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",fabric.commaWsp="(?:\\s+,?\\s*|,\\s*)",fabric.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,fabric.reNonWord=/[ \n\.,;!\?\-]/,fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.svgNS="http://www.w3.org/2000/svg",fabric.perfLimitSizeTotal=2097152,fabric.maxCacheSideLimit=4096,fabric.minCacheSideLimit=256,fabric.charWidthsCache={},fabric.textureSize=2048,fabric.disableStyleCopyPaste=!1,fabric.enableGLFiltering=!0,fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,fabric.browserShadowBlurConstant=1,fabric.arcToSegmentsCache={},fabric.boundsOfCurveCache={},fabric.cachesBoundsOfCurve=!0,fabric.forceGLPutImageData=!1,fabric.initFilterBackend=function(){return fabric.enableGLFiltering&&fabric.isWebglSupported&&fabric.isWebglSupported(fabric.textureSize)?(console.log("max texture size: "+fabric.maxTextureSize),new fabric.WebglFilterBackend({tileSize:fabric.textureSize})):fabric.Canvas2dFilterBackend?new fabric.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=fabric),function(){function r(t,e){this.__eventListeners[t]&&(t=this.__eventListeners[t],e?t[t.indexOf(e)]=!1:fabric.util.array.fill(t,!1))}function n(t,e){var i=function(){e.apply(this,arguments),this.off(t,i)}.bind(this);this.on(t,i)}fabric.Observable={fire:function(t,e){if(!this.__eventListeners)return this;var i=this.__eventListeners[t];if(!i)return this;for(var r=0,n=i.length;r<n;r++)i[r]&&i[r].call(this,e||{});return this.__eventListeners[t]=i.filter(function(t){return!1!==t}),this},on:function(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this},once:function(t,e){if(1===arguments.length)for(var i in t)n.call(this,i,t[i]);else n.call(this,t,e);return this},off:function(t,e){if(!this.__eventListeners)return this;if(0===arguments.length)for(t in this.__eventListeners)r.call(this,t);else if(1===arguments.length&&"object"==typeof arguments[0])for(var i in t)r.call(this,i,t[i]);else r.call(this,t,e);return this}}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,i){var r=this._objects;return i?r[e]=t:r.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,i=!1,r=0,n=arguments.length;r<n;r++)-1!==(t=e.indexOf(arguments[r]))&&(i=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[r]));return this.renderOnAddRemove&&i&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),r=0,n=i.length;r<n;r++)t.call(e,i[r],r,i);return this},getObjects:function(e){return void 0===e?this._objects.concat():this._objects.filter(function(t){return t.type===e})},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(e,t){return-1<this._objects.indexOf(e)||!!t&&this._objects.some(function(t){return"function"==typeof t.contains&&t.contains(e,!0)})},complexity:function(){return this._objects.reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},fabric.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof fabric.Gradient||this.set(e,new fabric.Gradient(t))},_initPattern:function(t,e,i){!t||!t.source||t instanceof fabric.Pattern?i&&i():this.set(e,new fabric.Pattern(t,i))},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(s){var o=Math.sqrt,a=Math.atan2,c=Math.pow,h=Math.PI/180,i=Math.PI/2;fabric.util={cos:function(t){if(0===t)return 1;switch((t=t<0?-t:t)/i){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=t<0?-1:1;switch(t/i){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(t)},removeFromArray:function(t,e){e=t.indexOf(e);return-1!==e&&t.splice(e,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*h},radiansToDegrees:function(t){return t/h},rotatePoint:function(t,e,i){t=new fabric.Point(t.x-e.x,t.y-e.y),t=fabric.util.rotateVector(t,i);return new fabric.Point(t.x,t.y).addEquals(e)},rotateVector:function(t,e){var i=fabric.util.sin(e),e=fabric.util.cos(e);return{x:t.x*e-t.y*i,y:t.x*i+t.y*e}},createVector:function(t,e){return new fabric.Point(e.x-t.x,e.y-t.y)},calcAngleBetweenVectors:function(t,e){return Math.acos((t.x*e.x+t.y*e.y)/(Math.hypot(t.x,t.y)*Math.hypot(e.x,e.y)))},getHatVector:function(t){return new fabric.Point(t.x,t.y).multiply(1/Math.hypot(t.x,t.y))},getBisector:function(t,e,i){e=fabric.util.createVector(t,e),t=fabric.util.createVector(t,i),i=fabric.util.calcAngleBetweenVectors(e,t),t=fabric.util.calcAngleBetweenVectors(fabric.util.rotateVector(e,i),t);return{vector:fabric.util.getHatVector(fabric.util.rotateVector(e,i*(0===t?1:-1)/2)),angle:i}},projectStrokeOnPoints:function(o,a,c){function h(t){var e=u/Math.hypot(t.x,t.y);return new fabric.Point(t.x*e*f.x,t.y*e*f.y)}var l=[],u=a.strokeWidth/2,f=a.strokeUniform?new fabric.Point(1/a.scaleX,1/a.scaleY):new fabric.Point(1,1);return o.length<=1||o.forEach(function(t,e){var i,r,t=new fabric.Point(t.x,t.y),e=(0===e?(s=o[e+1],n=c?h(fabric.util.createVector(s,t)).addEquals(t):o[o.length-1]):s=e===o.length-1?(n=o[e-1],c?h(fabric.util.createVector(n,t)).addEquals(t):o[0]):(n=o[e-1],o[e+1]),fabric.util.getBisector(t,n,s)),n=e.vector,s=e.angle;if("miter"===a.strokeLineJoin&&(i=-u/Math.sin(s/2),r=new fabric.Point(n.x*i*f.x,n.y*i*f.y),Math.hypot(r.x,r.y)/u<=a.strokeMiterLimit))return l.push(t.add(r)),void l.push(t.subtract(r));i=-u*Math.SQRT2,r=new fabric.Point(n.x*i*f.x,n.y*i*f.y),l.push(t.add(r)),l.push(t.subtract(r))}),l},transformPoint:function(t,e,i){return i?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var i=0;i<t.length;i++)t[i]=fabric.util.transformPoint(t[i],e);var r=[t[0].x,t[1].x,t[2].x,t[3].x],n=fabric.util.array.min(r),r=fabric.util.array.max(r)-n,s=[t[0].y,t[1].y,t[2].y,t[3].y],o=fabric.util.array.min(s);return{left:n,top:o,width:r,height:fabric.util.array.max(s)-o}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),e=[e*t[3],-e*t[1],-e*t[2],e*t[0]],t=fabric.util.transformPoint({x:t[4],y:t[5]},e,!0);return e[4]=-t.x,e[5]=-t.y,e},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),r=parseFloat(t);switch(e=e||fabric.Text.DEFAULT_SVG_FONT_SIZE,i[0]){case"mm":return r*fabric.DPI/25.4;case"cm":return r*fabric.DPI/2.54;case"in":return r*fabric.DPI;case"pt":return r*fabric.DPI/72;case"pc":return r*fabric.DPI/72*12;case"em":return r*e;default:return r}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":e=e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":e=e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":e=e.concat(["offset","stop-color","stop-opacity"])}return e},resolveNamespace:function(t){if(!t)return fabric;for(var e=t.split("."),i=e.length,r=s||fabric.window,n=0;n<i;++n)r=r[e[n]];return r},loadImage:function(t,e,i,r){var n,s;t?((n=fabric.util.createImage()).onload=s=function(){e&&e.call(i,n,!1),n=n.onload=n.onerror=null},n.onerror=function(){fabric.log("Error loading "+n.src),e&&e.call(i,null,!0),n=n.onload=n.onerror=null},0!==t.indexOf("data")&&null!=r&&(n.crossOrigin=r),"data:image/svg"===t.substring(0,14)&&(n.onload=null,fabric.util.loadImageInDom(n,s)),n.src=t):e&&e.call(i,t)},loadImageInDom:function(t,e){var i=fabric.document.createElement("div");i.style.width=i.style.height="1px",i.style.left=i.style.top="-100%",i.style.position="absolute",i.appendChild(t),fabric.document.querySelector("body").appendChild(i),t.onload=function(){e(),i.parentNode.removeChild(i),i=null}},enlivenObjects:function(t,e,n,s){var o=[],i=0,r=(t=t||[]).length;function a(){++i===r&&e&&e(o.filter(function(t){return t}))}r?t.forEach(function(i,r){i&&i.type?fabric.util.getKlass(i.type,n).fromObject(i,function(t,e){e||(o[r]=t),s&&s(i,t,e),a()}):a()}):e&&e(o)},enlivenObjectEnlivables:function(e,n,t){var s=fabric.Object.ENLIVEN_PROPS.filter(function(t){return!!e[t]});fabric.util.enlivenObjects(s.map(function(t){return e[t]}),function(i){var r={};s.forEach(function(t,e){r[t]=i[e],n&&(n[t]=i[e])}),t&&t(r)})},enlivenPatterns:function(t,e){function i(){++n===s&&e&&e(r)}var r=[],n=0,s=(t=t||[]).length;s?t.forEach(function(t,e){t&&t.source?new fabric.Pattern(t,function(t){r[e]=t,i()}):(r[e]=t,i())}):e&&e(r)},groupSVGElements:function(t,e,i){return t&&1===t.length?(void 0!==i&&(t[0].sourcePath=i),t[0]):(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),t=new fabric.Group(t,e),void 0!==i&&(t.sourcePath=i),t)},populateWithProperties:function(t,e,i){if(i&&Array.isArray(i))for(var r=0,n=i.length;r<n;r++)i[r]in t&&(e[i[r]]=t[i[r]])},createCanvasElement:function(){return fabric.document.createElement("canvas")},copyCanvasElement:function(t){var e=fabric.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},toDataURL:function(t,e,i){return t.toDataURL("image/"+e,i)},createImage:function(){return fabric.document.createElement("img")},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var e=a(t[1],t[0]),i=c(t[0],2)+c(t[1],2),r=o(i),n=(t[0]*t[3]-t[2]*t[1])/r,i=a(t[0]*t[2]+t[1]*t[3],i);return{angle:e/h,scaleX:r,scaleY:n,skewX:i/h,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return fabric.iMatrix.concat();var t=fabric.util.degreesToRadians(t.angle),e=fabric.util.cos(t),t=fabric.util.sin(t);return[e,t,-t,e,0,0]},calcDimensionsMatrix:function(t){var e=void 0===t.scaleX?1:t.scaleX,i=void 0===t.scaleY?1:t.scaleY,e=[t.flipX?-e:e,0,0,t.flipY?-i:i,0,0],i=fabric.util.multiplyTransformMatrices,r=fabric.util.degreesToRadians;return t.skewX&&(e=i(e,[1,0,Math.tan(r(t.skewX)),1],!0)),e=t.skewY?i(e,[1,Math.tan(r(t.skewY)),0,1],!0):e},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],i=fabric.util.multiplyTransformMatrices;return t.angle&&(e=i(e,fabric.util.calcRotateMatrix(t))),e=1!==t.scaleX||1!==t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY?i(e,fabric.util.calcDimensionsMatrix(t)):e},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,e,i,r){0<r&&(r<e?e-=r:e=0,r<i?i-=r:i=0);for(var n=!0,s=t.getImageData(e,i,2*r||1,2*r||1),o=s.data.length,a=3;a<o&&!1!=(n=s.data[a]<=0);a+=4);return s=null,n},parsePreserveAspectRatioAttribute:function(t){var e,i="meet",t=t.split(" ");return t&&t.length&&("meet"!==(i=t.pop())&&"slice"!==i?(e=i,i="meet"):t.length&&(e=t.pop())),{meetOrSlice:i,alignX:"none"!==e?e.slice(1,4):"none",alignY:"none"!==e?e.slice(5,8):"none"}},clearFabricFontCache:function(t){(t=(t||"").toLowerCase())?fabric.charWidthsCache[t]&&delete fabric.charWidthsCache[t]:fabric.charWidthsCache={}},limitDimsByArea:function(t,e){t=Math.sqrt(e*t),e=Math.floor(e/t);return{x:Math.floor(t),y:e}},capValue:function(t,e,i){return Math.max(t,Math.min(e,i))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map(function(t){return fabric.util.toFixed(t,fabric.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(t,e){e=fabric.util.invertTransform(e),e=fabric.util.multiplyTransformMatrices(e,t.calcOwnMatrix());fabric.util.applyTransformToObject(t,e)},addTransformToObject:function(t,e){fabric.util.applyTransformToObject(t,fabric.util.multiplyTransformMatrices(e,t.calcOwnMatrix()))},applyTransformToObject:function(t,e){var e=fabric.util.qrDecompose(e),i=new fabric.Point(e.translateX,e.translateY);t.flipX=!1,t.flipY=!1,t.set("scaleX",e.scaleX),t.set("scaleY",e.scaleY),t.skewX=e.skewX,t.skewY=e.skewY,t.angle=e.angle,t.setPositionByOrigin(i,"center","center")},sizeAfterTransform:function(t,e,i){t/=2,e/=2,t=[{x:-t,y:-e},{x:t,y:-e},{x:-t,y:e},{x:t,y:e}],e=fabric.util.calcDimensionsMatrix(i),i=fabric.util.makeBoundingBoxFromPoints(t,e);return{x:i.width,y:i.height}},mergeClipPaths:function(t,e){var i=t,r=e,e=(i.inverted&&!r.inverted&&(i=e,r=t),fabric.util.applyTransformToObject(r,fabric.util.multiplyTransformMatrices(fabric.util.invertTransform(i.calcTransformMatrix()),r.calcTransformMatrix())),i.inverted&&r.inverted);return e&&(i.inverted=r.inverted=!1),new fabric.Group([i],{clipPath:r,inverted:e})},hasStyleChanged:function(t,e,i){return i=i||!1,t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.textBackgroundColor!==e.textBackgroundColor||t.deltaY!==e.deltaY||i&&(t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough)},stylesToArray:function(t,e){for(var t=fabric.util.object.clone(t,!0),i=e.split("\n"),r=-1,n={},s=[],o=0;o<i.length;o++)if(t[o])for(var a=0;a<i[o].length;a++){r++;var c=t[o][a];c&&0<Object.keys(c).length&&(fabric.util.hasStyleChanged(n,c,!0)?s.push({start:r,end:r+1,style:c}):s[s.length-1].end++),n=c||{}}else r+=i[o].length;return s},stylesFromArray:function(t,e){if(!Array.isArray(t))return t;for(var i=e.split("\n"),r=-1,n=0,s={},o=0;o<i.length;o++)for(var a=0;a<i[o].length;a++)r++,t[n]&&t[n].start<=r&&r<t[n].end&&(s[o]=s[o]||{},s[o][a]=Object.assign({},t[n].style),r===t[n].end-1&&n++);return s}}}("undefined"!=typeof exports?exports:this),function(){var w=Array.prototype.join,T={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},O={m:"l",M:"L"};function d(t,e,i,r,n,s,o){for(var a,c,h,l,u,f,d,g,p,m,v,b,y,_=Math.PI,o=o*_/180,x=fabric.util.sin(o),C=fabric.util.cos(o),S=0,T=0,o=-C*t*.5-x*e*.5,w=-C*e*.5+x*t*.5,O=(i=Math.abs(i))*i,P=(r=Math.abs(r))*r,L=w*w,R=o*o,k=O*P-O*L-P*R,E=0,j=(k<0?(i*=j=Math.sqrt(1-k/(O*P)),r*=j):E=(n===s?-1:1)*Math.sqrt(k/(O*L+P*R)),E*i*w/r),n=-E*r*o/i,B=C*j-x*n+.5*t,X=x*j+C*n+.5*e,A=H(1,0,(o-j)/i,(w-n)/r),k=H((o-j)/i,(w-n)/r,(-o-j)/i,(-w-n)/r),W=(0===s&&0<k?k-=2*_:1===s&&k<0&&(k+=2*_),Math.ceil(Math.abs(k/_*2))),D=[],M=k/W,Y=8/3*Math.sin(M/4)*Math.sin(M/4)/Math.sin(M/2),F=A+M,I=0;I<W;I++)D[I]=(a=A,c=F,h=C,l=x,u=i,f=r,d=B,g=X,p=Y,m=S,v=T,y=b=void 0,b=fabric.util.cos(a),a=fabric.util.sin(a),y=fabric.util.cos(c),c=fabric.util.sin(c),["C",m+p*(-h*u*a-l*f*b),v+p*(-l*u*a+h*f*b),(d=h*u*y-l*f*c+d)+p*(h*u*c+l*f*y),(g=l*u*y+h*f*c+g)+p*(l*u*c-h*f*y),d,g]),S=D[I][5],T=D[I][6],A=F,F+=M;return D}function H(t,e,i,r){e=Math.atan2(e,t),t=Math.atan2(r,i);return e<=t?t-e:2*Math.PI-(e-t)}function g(t,e,i,r){return Math.sqrt((i-t)*(i-t)+(r-e)*(r-e))}function p(t,e,i){for(var r,n={x:e,y:i},s=0,o=1;o<=100;o+=1)r=t(o/100),s+=g(n.x,n.y,r.x,r.y),n=r;return s}function h(t,e){for(var i,r,n,s=0,o=0,a=t.iterator,c={x:t.x,y:t.y},h=.01,t=t.angleFinder;o<e&&1e-4<h;)i=a(s),n=s,e<(r=g(c.x,c.y,i.x,i.y))+o?(s-=h,h/=2):(c=i,s+=h,o+=r);return i.angle=t(n),i}function l(t){for(var e,i,r,n,s=0,o=t.length,a=0,c=0,h=0,l=0,u=[],f=0;f<o;f++){switch(r={x:a,y:c,command:(e=t[f])[0]},e[0]){case"M":r.length=0,h=a=e[1],l=c=e[2];break;case"L":r.length=g(a,c,e[1],e[2]),a=e[1],c=e[2];break;case"C":i=function(n,s,o,a,c,h,l,u){return function(t){var e=t*t*t,i=3*t*t*(1-t),r=3*t*(1-t)*(1-t),t=(1-t)*(1-t)*(1-t);return{x:l*e+c*i+o*r+n*t,y:u*e+h*i+a*r+s*t}}}(a,c,e[1],e[2],e[3],e[4],e[5],e[6]),n=function(i,r,n,s,o,a,c,h){return function(t){var e=1-t;return Math.atan2(3*e*e*(s-r)+6*e*t*(a-s)+3*t*t*(h-a),3*e*e*(n-i)+6*e*t*(o-n)+3*t*t*(c-o))}}(a,c,e[1],e[2],e[3],e[4],e[5],e[6]),r.iterator=i,r.angleFinder=n,r.length=p(i,a,c),a=e[5],c=e[6];break;case"Q":i=function(r,n,s,o,a,c){return function(t){var e=t*t,i=2*t*(1-t),t=(1-t)*(1-t);return{x:a*e+s*i+r*t,y:c*e+o*i+n*t}}}(a,c,e[1],e[2],e[3],e[4]),n=function(i,r,n,s,o,a){return function(t){var e=1-t;return Math.atan2(2*e*(s-r)+2*t*(a-s),2*e*(n-i)+2*t*(o-n))}}(a,c,e[1],e[2],e[3],e[4]),r.iterator=i,r.angleFinder=n,r.length=p(i,a,c),a=e[3],c=e[4];break;case"Z":case"z":r.destX=h,r.destY=l,r.length=g(a,c,h,l),a=h,c=l}s+=r.length,u.push(r)}return u.push({length:s,x:a,y:c}),u}fabric.util.joinPath=function(t){return t.map(function(t){return t.join(" ")}).join(" ")},fabric.util.parsePath=function(t){var e,i,r,n,s=[],o=[],a=fabric.rePathCommand,c="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",h="("+c+")"+fabric.commaWsp,l="([01])"+fabric.commaWsp+"?",u=new RegExp(h+"?"+h+"?"+h+l+l+h+"?("+c+")","g");if(!t||!t.match)return s;for(var f,d=0,g=(f=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;d<g;d++){n=(e=f[d]).slice(1).trim(),o.length=0;var p,m=e.charAt(0),v=[m];if("a"===m.toLowerCase())for(;p=u.exec(n);)for(var b=1;b<p.length;b++)o.push(p[b]);else for(;r=a.exec(n);)o.push(r[0]);for(var b=0,y=o.length;b<y;b++)i=parseFloat(o[b]),isNaN(i)||v.push(i);var _=T[m.toLowerCase()],x=O[m]||m;if(v.length-1>_)for(var C=1,S=v.length;C<S;C+=_)s.push([m].concat(v.slice(C,C+_))),m=x;else s.push(v)}return s},fabric.util.makePathSimpler=function(t){for(var e,i,r,n,s,o=0,a=0,c=t.length,h=0,l=0,u=[],f=0;f<c;++f){switch(i=!1,(e=t[f].slice(0))[0]){case"l":e[0]="L",e[1]+=o,e[2]+=a;case"L":o=e[1],a=e[2];break;case"h":e[1]+=o;case"H":e[0]="L",e[2]=a,o=e[1];break;case"v":e[1]+=a;case"V":e[0]="L",a=e[1],e[1]=o,e[2]=a;break;case"m":e[0]="M",e[1]+=o,e[2]+=a;case"M":o=e[1],a=e[2],h=e[1],l=e[2];break;case"c":e[0]="C",e[1]+=o,e[2]+=a,e[3]+=o,e[4]+=a,e[5]+=o,e[6]+=a;case"C":n=e[3],s=e[4],o=e[5],a=e[6];break;case"s":e[0]="S",e[1]+=o,e[2]+=a,e[3]+=o,e[4]+=a;case"S":s="C"===r?(n=2*o-n,2*a-s):(n=o,a),o=e[3],a=e[4],e[0]="C",e[5]=e[3],e[6]=e[4],e[3]=e[1],e[4]=e[2],e[1]=n,e[2]=s,n=e[3],s=e[4];break;case"q":e[0]="Q",e[1]+=o,e[2]+=a,e[3]+=o,e[4]+=a;case"Q":n=e[1],s=e[2],o=e[3],a=e[4];break;case"t":e[0]="T",e[1]+=o,e[2]+=a;case"T":s="Q"===r?(n=2*o-n,2*a-s):(n=o,a),e[0]="Q",o=e[1],a=e[2],e[1]=n,e[2]=s,e[3]=o,e[4]=a;break;case"a":e[0]="A",e[6]+=o,e[7]+=a;case"A":i=!0,u=u.concat(function(t,e,i){for(var r=i[1],n=i[2],s=i[3],o=i[4],a=i[5],c=d(i[6]-t,i[7]-e,r,n,o,a,s),h=0,l=c.length;h<l;h++)c[h][1]+=t,c[h][2]+=e,c[h][3]+=t,c[h][4]+=e,c[h][5]+=t,c[h][6]+=e;return c}(o,a,e)),o=e[6],a=e[7];break;case"z":case"Z":o=h,a=l}i||u.push(e),r=e[0]}return u},fabric.util.getSmoothPathFromPoints=function(t,e){var i,r,n=[],s=new fabric.Point(t[0].x,t[0].y),o=new fabric.Point(t[1].x,t[1].y),a=t.length,c=1,h=0,l=2<a;for(l&&(c=t[2].x<o.x?-1:t[2].x===o.x?0:1,h=t[2].y<o.y?-1:t[2].y===o.y?0:1),n.push(["M",s.x-c*(e=e||0),s.y-h*e]),i=1;i<a;i++)s.eq(o)||(r=s.midPointFrom(o),n.push(["Q",s.x,s.y,r.x,r.y])),s=t[i],i+1<t.length&&(o=t[i+1]);return l&&(c=s.x>t[i-2].x?1:s.x===t[i-2].x?0:-1,h=s.y>t[i-2].y?1:s.y===t[i-2].y?0:-1),n.push(["L",s.x+c*e,s.y+h*e]),n},fabric.util.getPathSegmentsInfo=l,fabric.util.getBoundsOfCurve=function(t,e,i,r,n,s,o,a){var c;if(fabric.cachesBoundsOfCurve&&(c=w.call(arguments),fabric.boundsOfCurveCache[c]))return fabric.boundsOfCurveCache[c];for(var h,l,u,f=Math.sqrt,d=Math.min,g=Math.max,p=Math.abs,m=[],v=[[],[]],b=6*t-12*i+6*n,y=-3*t+9*i-9*n+3*o,_=3*i-3*t,x=0;x<2;++x)0<x&&(b=6*e-12*r+6*s,y=-3*e+9*r-9*s+3*a,_=3*r-3*e),p(y)<1e-12?p(b)<1e-12||0<(h=-_/b)&&h<1&&m.push(h):(u=b*b-4*_*y)<0||(0<(l=(-b+(u=f(u)))/(2*y))&&l<1&&m.push(l),0<(l=(-b-u)/(2*y))&&l<1&&m.push(l));for(var C,S=m.length,T=S;S--;)h=m[S],v[0][S]=(C=1-h)*C*C*t+3*C*C*h*i+3*C*h*h*n+h*h*h*o,v[1][S]=C*C*C*e+3*C*C*h*r+3*C*h*h*s+h*h*h*a;return v[0][T]=t,v[1][T]=e,v[0][T+1]=o,v[1][T+1]=a,T=[{x:d.apply(null,v[0]),y:d.apply(null,v[1])},{x:g.apply(null,v[0]),y:g.apply(null,v[1])}],fabric.cachesBoundsOfCurve&&(fabric.boundsOfCurveCache[c]=T),T},fabric.util.getPointOnPath=function(t,e,i){i=i||l(t);for(var r=0;0<e-i[r].length&&r<i.length-2;)e-=i[r].length,r++;var n,s=i[r],o=e/s.length,a=s.command,c=t[r];switch(a){case"M":return{x:s.x,y:s.y,angle:0};case"Z":case"z":return(n=new fabric.Point(s.x,s.y).lerp(new fabric.Point(s.destX,s.destY),o)).angle=Math.atan2(s.destY-s.y,s.destX-s.x),n;case"L":return(n=new fabric.Point(s.x,s.y).lerp(new fabric.Point(c[1],c[2]),o)).angle=Math.atan2(c[2]-s.y,c[1]-s.x),n;case"C":case"Q":return h(s,e)}},fabric.util.transformPath=function(t,n,e){return e&&(n=fabric.util.multiplyTransformMatrices(n,[1,0,0,1,-e.x,-e.y])),t.map(function(t){for(var e=t.slice(0),i={},r=1;r<t.length-1;r+=2)i.x=t[r],i.y=t[r+1],i=fabric.util.transformPoint(i,n),e[r]=i.x,e[r+1]=i.y;return e})}}(),function(){var o=Array.prototype.slice;function i(t,e,i){if(t&&0!==t.length){var r=t.length-1,n=e?t[r][e]:t[r];if(e)for(;r--;)i(t[r][e],n)&&(n=t[r][e]);else for(;r--;)i(t[r],n)&&(n=t[r]);return n}}fabric.util.array={fill:function(t,e){for(var i=t.length;i--;)t[i]=e;return t},invoke:function(t,e){for(var i=o.call(arguments,2),r=[],n=0,s=t.length;n<s;n++)r[n]=i.length?t[n][e].apply(t[n],i):t[n][e].call(t[n]);return r},min:function(t,e){return i(t,e,function(t,e){return t<e})},max:function(t,e){return i(t,e,function(t,e){return e<=t})}}}(),function(){function o(t,e,i){if(i)if(!fabric.isLikelyNode&&e instanceof Element)t=e;else if(e instanceof Array){t=[];for(var r=0,n=e.length;r<n;r++)t[r]=o({},e[r],i)}else if(e&&"object"==typeof e)for(var s in e)"canvas"===s||"group"===s?t[s]=null:e.hasOwnProperty(s)&&(t[s]=o({},e[s],i));else t=e;else for(var s in e)t[s]=e[s];return t}fabric.util.object={extend:o,clone:function(t,e){return o({},t,e)}},fabric.util.object.extend(fabric.util,fabric.Observable)}(),fabric.util.string={camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(t){for(var e,i=0,r=[],i=0;i<t.length;i++)!1!==(e=function(t,e){var i=t.charCodeAt(e);if(isNaN(i))return"";if(i<55296||57343<i)return t.charAt(e);if(55296<=i&&i<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";i=t.charCodeAt(e+1);if(i<56320||57343<i)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";i=t.charCodeAt(e-1);if(i<55296||56319<i)throw"Low surrogate without preceding high surrogate";return!1}(t,i))&&r.push(e);return r}},function(){function s(){}var o=Array.prototype.slice,a=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}();function c(){}function h(t){for(var e=null,i=this;i.constructor.superclass;){var r=i.constructor.superclass.prototype[t];if(i[t]!==r){e=r;break}i=i.constructor.superclass.prototype}return e?1<arguments.length?e.apply(this,o.call(arguments,1)):e.call(this):console.log("tried to callSuper "+t+", method not found in prototype chain",this)}fabric.util.createClass=function(){var t=null,e=o.call(arguments,0);function i(){this.initialize.apply(this,arguments)}"function"==typeof e[0]&&(t=e.shift()),i.superclass=t,i.subclasses=[],t&&(c.prototype=t.prototype,i.prototype=new c,t.subclasses.push(i));for(var r=0,n=e.length;r<n;r++)!function(t,r,n){for(var e in r)e in t.prototype&&"function"==typeof t.prototype[e]&&-1<(r[e]+"").indexOf("callSuper")?t.prototype[e]=function(i){return function(){var t=this.constructor.superclass,e=(this.constructor.superclass=n,r[i].apply(this,arguments));if(this.constructor.superclass=t,"initialize"!==i)return e}}(e):t.prototype[e]=r[e],a&&(r.toString!==Object.prototype.toString&&(t.prototype.toString=r.toString),r.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=r.valueOf))}(i,e[r],t);return i.prototype.initialize||(i.prototype.initialize=s),(i.prototype.constructor=i).prototype.callSuper=h,i}}(),function(){var n=!!fabric.document.createElement("div").attachEvent,e=["touchstart","touchmove","touchend"];fabric.util.addListener=function(t,e,i,r){t&&t.addEventListener(e,i,!n&&r)},fabric.util.removeListener=function(t,e,i,r){t&&t.removeEventListener(e,i,!n&&r)},fabric.util.getPointer=function(t){var e=t.target,e=fabric.util.getScrollLeftTop(e),i=(i=(t=t).changedTouches)&&i[0]?i[0]:t;return{x:i.clientX+e.left,y:i.clientY+e.top}},fabric.util.isTouchEvent=function(t){return-1<e.indexOf(t.type)||"touch"===t.pointerType}}(),function(){var t=fabric.document.createElement("div"),e="string"==typeof t.style.opacity,t="string"==typeof t.style.filter,r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(t){return t};e?s=function(t,e){return t.style.opacity=e,t}:t&&(s=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),r.test(i.filter)?i.filter=i.filter.replace(r,e=.9999<=e?"":"alpha(opacity="+100*e+")"):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=function(t,e){var i,r,n=t.style;if(!n)return t;if("string"==typeof e)return t.style.cssText+=";"+e,-1<e.indexOf("opacity")?s(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(i in e)"opacity"===i?s(t,e[i]):(r="float"===i||"cssFloat"===i?void 0===n.styleFloat?"cssFloat":"styleFloat":i,n.setProperty(r,e[i]));return t}}(),function(){var e=Array.prototype.slice;var a,t,i,r=function(t){return e.call(t,0)};try{t=r(fabric.document.childNodes)instanceof Array}catch(t){}function n(t,e){var i,r=fabric.document.createElement(t);for(i in e)"class"===i?r.className=e[i]:"for"===i?r.htmlFor=e[i]:r.setAttribute(i,e[i]);return r}function c(t){for(var e=0,i=0,r=fabric.document.documentElement,n=fabric.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===fabric.document?(e=n.scrollLeft||r.scrollLeft||0,i=n.scrollTop||r.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||"fixed"!==t.style.position););return{left:e,top:i}}t||(r=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e}),a=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){t=fabric.document.defaultView.getComputedStyle(t,null);return t?t[e]:void 0}:function(t,e){var i=t.style[e];return i=!i&&t.currentStyle?t.currentStyle[e]:i},t=fabric.document.documentElement.style,i="userSelect"in t?"userSelect":"MozUserSelect"in t?"MozUserSelect":"WebkitUserSelect"in t?"WebkitUserSelect":"KhtmlUserSelect"in t?"KhtmlUserSelect":"",fabric.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),i?t.style[i]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t},fabric.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),i?t.style[i]="":"string"==typeof t.unselectable&&(t.unselectable=""),t},fabric.util.setImageSmoothing=function(t,e){t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=e},fabric.util.getById=function(t){return"string"==typeof t?fabric.document.getElementById(t):t},fabric.util.toArray=r,fabric.util.addClass=function(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},fabric.util.makeElement=n,fabric.util.wrapElement=function(t,e,i){return"string"==typeof e&&(e=n(e,i)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},fabric.util.getScrollLeftTop=c,fabric.util.getElementOffset=function(t){var e,i,r=t&&t.ownerDocument,n={left:0,top:0},s={left:0,top:0},o={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return s;for(i in o)s[o[i]]+=parseInt(a(t,i),10)||0;return r=r.documentElement,void 0!==t.getBoundingClientRect&&(n=t.getBoundingClientRect()),e=c(t),{left:n.left+e.left-(r.clientLeft||0)+s.left,top:n.top+e.top-(r.clientTop||0)+s.top}},fabric.util.getNodeCanvas=function(t){return(t=fabric.jsdomImplForWrapper(t))._canvas||t._image},fabric.util.cleanUpJsdomNode=function(t){!fabric.isLikelyNode||(t=fabric.jsdomImplForWrapper(t))&&(t._image=null,t._canvas=null,t._currentSrc=null,t._attributes=null,t._classList=null)}}(),function(){function a(){}fabric.util.request=function(t,e){var i,r=(e=e||{}).method?e.method.toUpperCase():"GET",n=e.onComplete||function(){},s=new fabric.window.XMLHttpRequest,o=e.body||e.parameters;return s.onreadystatechange=function(){4===s.readyState&&(n(s),s.onreadystatechange=a)},"GET"===r&&(o=null,"string"==typeof e.parameters&&(i=t,e=e.parameters,t=i+(/\?/.test(i)?"&":"?")+e)),s.open(r,t,!0),"POST"!==r&&"PUT"!==r||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(o),s}}(),fabric.log=console.log,fabric.warn=console.warn,function(){var t=fabric.util.object.extend,i=fabric.util.object.clone,e=[];function r(){return!1}function n(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e}fabric.util.object.extend(e,{cancelAll:function(){var t=this.splice(0);return t.forEach(function(t){t.cancel()}),t},cancelByCanvas:function(e){if(!e)return[];var t=this.filter(function(t){return"object"==typeof t.target&&t.target.canvas===e});return t.forEach(function(t){t.cancel()}),t},cancelByTarget:function(t){t=this.findAnimationsByTarget(t);return t.forEach(function(t){t.cancel()}),t},findAnimationIndex:function(t){return this.indexOf(this.findAnimation(t))},findAnimation:function(e){return this.find(function(t){return t.cancel===e})},findAnimationsByTarget:function(e){return e?this.filter(function(t){return t.target===e}):[]}});var s=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){return fabric.window.setTimeout(t,1e3/60)},o=fabric.window.cancelAnimationFrame||fabric.window.clearTimeout;function _(){return s.apply(fabric.window,arguments)}fabric.util.animate=function(e){function v(){var t=fabric.runningAnimations.indexOf(y);return-1<t&&fabric.runningAnimations.splice(t,1)[0]}var b=!1,y=t(i(e=e||{}),{cancel:function(){return b=!0,v()},currentValue:"startValue"in e?e.startValue:0,completionRate:0,durationRate:0});return fabric.runningAnimations.push(y),_(function(t){var s,o=t||+new Date,a=e.duration||500,c=o+a,h=e.onChange||r,l=e.abort||r,u=e.onComplete||r,f=e.easing||n,d="startValue"in e&&0<e.startValue.length,g="startValue"in e?e.startValue:0,p="endValue"in e?e.endValue:100,m=e.byValue||(d?g.map(function(t,e){return p[e]-g[e]}):p-g);e.onStart&&e.onStart(),function t(e){s=e||+new Date;var i=c<s?a:s-o,e=i/a,r=d?g.map(function(t,e){return f(i,g[e],m[e],a)}):f(i,g,m,a),n=d?Math.abs((r[0]-g[0])/m[0]):Math.abs((r-g)/m);y.currentValue=d?r.slice():r,y.completionRate=n,y.durationRate=e,b||(l(r,n,e)?v():c<s?(y.currentValue=d?p.slice():p,y.completionRate=1,y.durationRate=1,h(d?p.slice():p,1,1),u(p,1,1),v()):(h(r,n,e),_(t)))}(o)}),y.cancel},fabric.util.requestAnimFrame=_,fabric.util.cancelAnimFrame=function(){return o.apply(fabric.window,arguments)},fabric.runningAnimations=e}(),function(){function a(t,e,i){var r="rgba("+parseInt(t[0]+i*(e[0]-t[0]),10)+","+parseInt(t[1]+i*(e[1]-t[1]),10)+","+parseInt(t[2]+i*(e[2]-t[2]),10);return r+(","+(t&&e?parseFloat(t[3]+i*(e[3]-t[3])):1))+")"}fabric.util.animateColor=function(t,e,i,n){var t=new fabric.Color(t).getSource(),r=new fabric.Color(e).getSource(),s=n.onComplete,o=n.onChange;return n=n||{},fabric.util.animate(fabric.util.object.extend(n,{duration:i||500,startValue:t,endValue:r,byValue:r,easing:function(t,e,i,r){return a(e,i,n.colorEasing?n.colorEasing(t,r):1-Math.cos(t/r*(Math.PI/2)))},onComplete:function(t,e,i){if(s)return s(a(r,r,0),e,i)},onChange:function(t,e,i){if(o){if(Array.isArray(t))return o(a(t,t,0),e,i);o(t,e,i)}}}))}}(),function(){function s(t,e,i,r){return r=t<Math.abs(e)?(t=e,i/4):0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:r}}function o(t,e,i){return t.a*Math.pow(2,10*--e)*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function n(t,e,i,r){return i-a(r-t,0,i,r)+e}function a(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}fabric.util.ease={easeInQuad:function(t,e,i,r){return i*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,r){return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,r){return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,i,r){return 0===t?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,r){var n=0;return 0===t?e:1===(t/=r)?e+i:-o(s(i,i,n=n||.3*r,1.70158),t,r)+e},easeOutElastic:function(t,e,i,r){return 0===t?e:1===(t/=r)?e+i:(i=s(i,i,0||.3*r,1.70158)).a*Math.pow(2,-10*t)*Math.sin((t*r-i.s)*(2*Math.PI)/i.p)+i.c+e},easeInOutElastic:function(t,e,i,r){return 0===t?e:2===(t/=r/2)?e+i:(i=s(i,i,0||r*(.3*1.5),1.70158),t<1?-.5*o(i,t,r)+e:i.a*Math.pow(2,-10*--t)*Math.sin((t*r-i.s)*(2*Math.PI)/i.p)*.5+i.c+e)},easeInBack:function(t,e,i,r,n){return i*(t/=r)*t*(((n=void 0===n?1.70158:n)+1)*t-n)+e},easeOutBack:function(t,e,i,r,n){return i*((t=t/r-1)*t*(((n=void 0===n?1.70158:n)+1)*t+n)+1)+e},easeInOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),(t/=r/2)<1?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},easeInBounce:n,easeOutBounce:a,easeInOutBounce:function(t,e,i,r){return t<r/2?.5*n(2*t,0,i,r)+e:.5*a(2*t-r,0,i,r)+.5*i+e}}}(),function(t){"use strict";var u,e,f,i,r,y=t.fabric||(t.fabric={}),g=y.util.object.extend,d=y.util.object.clone,p=y.util.toFixed,_=y.util.parseUnit,m=y.util.multiplyTransformMatrices,v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},x="font-size",C="clip-path";function n(t){return new RegExp("^("+t.join("|")+")\\b","i")}function S(t,e){for(var i,r=[],n=0,s=e.length;n<s;n++)i=e[n],i=t.getElementsByTagName(i),r=r.concat(Array.prototype.slice.call(i));return r}function T(t,e,i){t[i]=Math.tan(y.util.degreesToRadians(e[0]))}function w(t,e){var i,r={};for(i in y.cssRules[e])if(function(t,e){var i,r=!0;(i=s(t,e.pop()))&&e.length&&(r=function(t,e){var i,r=!0;for(;t.parentNode&&1===t.parentNode.nodeType&&e.length;)r&&(i=e.pop()),t=t.parentNode,r=s(t,i);return 0===e.length}(t,e));return i&&r&&0===e.length}(t,i.split(" ")))for(var n in y.cssRules[e][i])r[n]=y.cssRules[e][i][n];return r}function s(t,e){var i,r=t.nodeName,n=t.getAttribute("class"),t=t.getAttribute("id"),s=new RegExp("^"+r,"i");if(e=e.replace(s,""),t&&e.length&&(s=new RegExp("#"+t+"(?![a-zA-Z\\-]+)","i"),e=e.replace(s,"")),n&&e.length)for(i=(n=n.split(" ")).length;i--;)s=new RegExp("\\."+n[i]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(s,"");return 0===e.length}function O(t,e){var i;if(i=t.getElementById?t.getElementById(e):i)return i;for(var r,n=t.getElementsByTagName("*"),s=0,o=n.length;s<o;s++)if(e===(r=n[s]).getAttribute("id"))return r}y.svgValidTagNamesRegEx=n(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),y.svgViewBoxElementsRegEx=n(["symbol","image","marker","pattern","view","svg"]),y.svgInvalidAncestorsRegEx=n(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),y.svgValidParentsRegEx=n(["symbol","g","a","svg","clipPath","defs"]),y.cssRules={},y.gradientDefs={},y.clipPaths={},y.parseTransformAttribute=(u=y.iMatrix,t=y.reNum,e=y.commaWsp,f="(?:"+("(?:(matrix)\\s*\\(\\s*("+t+")"+e+"("+t+")"+e+"("+t+")"+e+"("+t+")"+e+"("+t+")"+e+"("+t+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+t+")(?:"+e+"("+t+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+t+")(?:"+e+"("+t+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+t+")(?:"+e+"("+t+")"+e+"("+t+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+t+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+t+")\\s*\\))")+")",i=new RegExp("^\\s*(?:"+("(?:"+f+"(?:"+e+"*"+f+")*)")+"?)\\s*$"),r=new RegExp(f,"g"),function(t){var h=u.concat(),l=[];if(!t||!i.test(t))return h;t.replace(r,function(t){var e,i,r,n,s,o,t=new RegExp(f).exec(t).filter(function(t){return!!t}),a=t[1],c=t.slice(2).map(parseFloat);switch(a){case"translate":o=c,(s=h)[4]=o[0],2===o.length&&(s[5]=o[1]);break;case"rotate":c[0]=y.util.degreesToRadians(c[0]),s=h,o=c,e=y.util.cos(o[0]),i=y.util.sin(o[0]),n=r=0,3===o.length&&(r=o[1],n=o[2]),s[0]=e,s[1]=i,s[2]=-i,s[3]=e,s[4]=r-(e*r-i*n),s[5]=n-(i*r+e*n);break;case"scale":i=h,e=(r=c)[0],r=2===r.length?r[1]:r[0],i[0]=e,i[3]=r;break;case"skewX":T(h,c,2);break;case"skewY":T(h,c,1);break;case"matrix":h=c}l.push(h.concat()),h=u.concat()});for(var e=l[0];1<l.length;)l.shift(),e=y.util.multiplyTransformMatrices(e,l[0]);return e});var P=new RegExp("^\\s*("+y.reNum+"+)\\s*,?\\s*("+y.reNum+"+)\\s*,?\\s*("+y.reNum+"+)\\s*,?\\s*("+y.reNum+"+)\\s*$");function k(t){if(!y.svgViewBoxElementsRegEx.test(t.nodeName))return{};var e,i,r,n=t.getAttribute("viewBox"),s=1,o=1,a=t.getAttribute("width"),c=t.getAttribute("height"),h=t.getAttribute("x")||0,l=t.getAttribute("y")||0,u=t.getAttribute("preserveAspectRatio")||"",f=!n||!(n=n.match(P)),d=!a||!c||"100%"===a||"100%"===c,g=f&&d,p={},m="",v=0,b=0;if(p.width=0,p.height=0,p.toBeParsed=g,f&&(h||l)&&t.parentNode&&"#document"!==t.parentNode.nodeName&&(m=" translate("+_(h)+" "+_(l)+") ",i=(t.getAttribute("transform")||"")+m,t.setAttribute("transform",i),t.removeAttribute("x"),t.removeAttribute("y")),g)return p;if(f)return p.width=_(a),p.height=_(c),p;if(g=-parseFloat(n[1]),f=-parseFloat(n[2]),e=parseFloat(n[3]),n=parseFloat(n[4]),p.minX=g,p.minY=f,p.viewBoxWidth=e,p.viewBoxHeight=n,d?(p.width=e,p.height=n):(p.width=_(a),p.height=_(c),s=p.width/e,o=p.height/n),"none"!==(u=y.util.parsePreserveAspectRatioAttribute(u)).alignX&&("meet"===u.meetOrSlice&&(o=s=o<s?o:s),"slice"===u.meetOrSlice&&(o=s=o<s?s:o),v=p.width-e*s,b=p.height-n*s,"Mid"===u.alignX&&(v/=2),"Mid"===u.alignY&&(b/=2),"Min"===u.alignX&&(v=0),"Min"===u.alignY&&(b=0)),1===s&&1===o&&0==g&&0==f&&0===h&&0===l)return p;if(i=(m=(h||l)&&"#document"!==t.parentNode.nodeName?" translate("+_(h)+" "+_(l)+") ":m)+" matrix("+s+" 0 0 "+o+" "+(g*s+v)+" "+(f*o+b)+") ","svg"===t.nodeName){for(r=t.ownerDocument.createElementNS(y.svgNS,"g");t.firstChild;)r.appendChild(t.firstChild);t.appendChild(r)}else(r=t).removeAttribute("x"),r.removeAttribute("y"),i=r.getAttribute("transform")+i;return r.setAttribute("transform",i),p}y.parseSVGDocument=function(t,i,e,r){if(t){!function(t){for(var e=S(t,["use","svg:use"]),i=0;e.length&&i<e.length;){var r=e[i],n=r.getAttribute("xlink:href")||r.getAttribute("href");if(null===n)return;var s,n=n.slice(1),o=r.getAttribute("x")||0,a=r.getAttribute("y")||0,c=O(t,n).cloneNode(!0),h=(c.getAttribute("transform")||"")+" translate("+o+", "+a+")",n=e.length,l=y.svgNS;if(k(c),/^svg$/i.test(c.nodeName)){for(var u,f=c.ownerDocument.createElementNS(l,"g"),d=0,g=(u=c.attributes).length;d<g;d++)s=u.item(d),f.setAttributeNS(l,s.nodeName,s.nodeValue);for(;c.firstChild;)f.appendChild(c.firstChild);c=f}for(d=0,g=(u=r.attributes).length;d<g;d++)"x"!==(s=u.item(d)).nodeName&&"y"!==s.nodeName&&"xlink:href"!==s.nodeName&&"href"!==s.nodeName&&("transform"===s.nodeName?h=s.nodeValue+" "+h:c.setAttribute(s.nodeName,s.nodeValue));c.setAttribute("transform",h),c.setAttribute("instantiated_by_use","1"),c.removeAttribute("id"),r.parentNode.replaceChild(c,r),e.length===n&&i++}}(t);var n=y.Object.__uid++,s=k(t),o=y.util.toArray(t.getElementsByTagName("*"));if(s.crossOrigin=r&&r.crossOrigin,s.svgUid=n,0===o.length&&y.isLikelyNode){for(var a=[],c=0,h=(o=t.selectNodes('//*[name(.)!="svg"]')).length;c<h;c++)a[c]=o[c];o=a}var l,u=o.filter(function(t){return k(t),y.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))&&!function(t,e){for(;t=t&&t.parentNode;)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return 1}(t,y.svgInvalidAncestorsRegEx)});u&&u.length?(l={},o.filter(function(t){return"clipPath"===t.nodeName.replace("svg:","")}).forEach(function(t){var e=t.getAttribute("id");l[e]=y.util.toArray(t.getElementsByTagName("*")).filter(function(t){return y.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))})}),y.gradientDefs[n]=y.getGradientDefs(t),y.cssRules[n]=y.getCSSRules(t),y.clipPaths[n]=l,y.parseElements(u,function(t,e){i&&(i(t,s,e,o),delete y.gradientDefs[n],delete y.cssRules[n],delete y.clipPaths[n])},d(s),e,r)):i&&i([],{})}};var o=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+y.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+y.reNum+"))?\\s+(.*)");g(y,{parseFontDeclaration:function(t,e){var i,r,n,s,t=t.match(o);t&&(i=t[1],r=t[3],n=t[4],s=t[5],t=t[6],i&&(e.fontStyle=i),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),n&&(e.fontSize=_(n)),t&&(e.fontFamily=t),s&&(e.lineHeight="normal"===s?1:s))},getGradientDefs:function(t){for(var e,i=S(t,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),r=0,n={},r=i.length;r--;)(e=i[r]).getAttribute("xlink:href")&&!function t(e,i){var r="xlink:href",n=O(e,i.getAttribute(r).slice(1));if(n&&n.getAttribute(r)&&t(e,n),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(t){n&&!i.hasAttribute(t)&&n.hasAttribute(t)&&i.setAttribute(t,n.getAttribute(t))}),!i.children.length)for(var s=n.cloneNode(!0);s.firstChild;)i.appendChild(s.firstChild);i.removeAttribute(r)}(t,e),n[e.getAttribute("id")]=e;return n},parseAttributes:function(i,t,e){if(i){var r,n,s={},o=(void 0===e&&(e=i.getAttribute("svgUid")),i.parentNode&&y.svgValidParentsRegEx.test(i.parentNode.nodeName)&&(s=y.parseAttributes(i.parentNode,t,e)),t.reduce(function(t,e){return(r=i.getAttribute(e))&&(t[e]=r),t},{})),t=g(w(i,e),y.parseStyleAttribute(i)),o=g(o,t);t[C]&&i.setAttribute(C,t[C]),n=e=s.fontSize||y.Text.DEFAULT_SVG_FONT_SIZE,o[x]&&(o[x]=n=_(o[x],e));var a,c,h,l={};for(c in o)a=function(t,e,i,r){var n,s=Array.isArray(e);if("fill"!==t&&"stroke"!==t||"none"!==e){if("strokeUniform"===t)return"non-scaling-stroke"===e;if("strokeDashArray"===t)e="none"===e?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===t)e=i&&i.transformMatrix?m(i.transformMatrix,y.parseTransformAttribute(e)):y.parseTransformAttribute(e);else if("visible"===t)e="none"!==e&&"hidden"!==e,i&&!1===i.visible&&(e=!1);else if("opacity"===t)e=parseFloat(e),i&&void 0!==i.opacity&&(e*=i.opacity);else if("textAnchor"===t)e="start"===e?"left":"end"===e?"right":"center";else if("charSpacing"===t)n=_(e,r)/r*1e3;else if("paintFirst"===t){var i=e.indexOf("fill"),o=e.indexOf("stroke"),e="fill";(-1<i&&-1<o&&o<i||-1===i&&-1<o)&&(e="stroke")}else{if("href"===t||"xlink:href"===t||"font"===t)return e;if("imageSmoothing"===t)return"optimizeQuality"===e;n=s?e.map(_):_(e,r)}}else e="";return!s&&isNaN(n)?e:n}(h=(h=c)in v?v[h]:h,o[c],s,n),l[h]=a;l&&l.font&&y.parseFontDeclaration(l.font,l);var u,t=g(s,l);if(y.svgValidParentsRegEx.test(i.nodeName))return t;var f,d=t;for(f in b)if(void 0!==d[b[f]]&&""!==d[f]){if(void 0===d[f]){if(!y.Object.prototype[f])continue;d[f]=y.Object.prototype[f]}0!==d[f].indexOf("url(")&&(u=new y.Color(d[f]),d[f]=u.setAlpha(p(u.getAlpha()*d[b[f]],2)).toRgba())}return d}},parseElements:function(t,e,i,r,n){new y.ElementsParser(t,e,i,r,n).parse()},parseStyleAttribute:function(t){var e,i,r,n={},t=t.getAttribute("style");if(!t)return n;if("string"==typeof t)e=n,t.replace(/;\s*$/,"").split(";").forEach(function(t){t=t.split(":");i=t[0].trim().toLowerCase(),r=t[1].trim(),e[i]=r});else{var s,o,a,c=t,h=n;for(a in c)void 0!==c[a]&&(s=a.toLowerCase(),o=c[a],h[s]=o)}return n},parsePointsAttribute:function(t){if(!t)return null;for(var e=[],i=0,r=(t=(t=t.replace(/,/g," ").trim()).split(/\s+/)).length;i<r;i+=2)e.push({x:parseFloat(t[i]),y:parseFloat(t[i+1])});return e},getCSSRules:function(t){for(var e=t.getElementsByTagName("style"),o={},a=0,c=e.length;a<c;a++){var i=e[a].textContent;""!==(i=i.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&i.split("}").filter(function(t){return t.trim()}).forEach(function(t){var e=t.split("{"),i={},r=e[1].trim().split(";").filter(function(t){return t.trim()});for(a=0,c=r.length;a<c;a++){var n=r[a].split(":"),s=n[0].trim(),n=n[1].trim();i[s]=n}(t=e[0].trim()).split(",").forEach(function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(o[t]?y.util.object.extend(o[t],i):o[t]=y.util.object.clone(i))})})}return o},loadSVGFromURL:function(t,n,e,i){t=t.replace(/^\n\s*/,"").trim(),new y.util.request(t,{method:"get",onComplete:function(t){t=t.responseXML;if(!t||!t.documentElement)return n&&n(null),!1;y.parseSVGDocument(t.documentElement,function(t,e,i,r){n&&n(t,e,i,r)},e,i)}})},loadSVGFromString:function(t,n,e,i){t=(new y.window.DOMParser).parseFromString(t.trim(),"text/xml");y.parseSVGDocument(t.documentElement,function(t,e,i,r){n(t,e,i,r)},e,i)}})}("undefined"!=typeof exports?exports:this),fabric.ElementsParser=function(t,e,i,r,n,s){this.elements=t,this.callback=e,this.options=i,this.reviver=r,this.svgUid=i&&i.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s},function(t){t.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},t.createObjects=function(){var i=this;this.elements.forEach(function(t,e){t.setAttribute("svgUid",i.svgUid),i.createObject(t,e)})},t.findTag=function(t){return fabric[fabric.util.string.capitalize(t.tagName.replace("svg:",""))]},t.createObject=function(t,e){var i=this.findTag(t);if(i&&i.fromElement)try{i.fromElement(t,this.createCallback(e,t),this.options)}catch(t){fabric.log(t)}else this.checkIfDone()},t.createCallback=function(i,r){var n=this;return function(t){var e;n.resolveGradient(t,r,"fill"),n.resolveGradient(t,r,"stroke"),t instanceof fabric.Image&&t._originalElement&&(e=t.parsePreserveAspectRatioAttribute(r)),t._removeTransformMatrix(e),n.resolveClipPath(t,r),n.reviver&&n.reviver(r,t),n.instances[i]=t,n.checkIfDone()}},t.extractPropertyDefinition=function(t,e,i){var t=t[e],e=this.regexUrl;if(e.test(t))return e.lastIndex=0,t=e.exec(t)[1],e.lastIndex=0,fabric[i][this.svgUid][t]},t.resolveGradient=function(t,e,i){var r=this.extractPropertyDefinition(t,i,"gradientDefs");r&&(e=e.getAttribute(i+"-opacity"),r=fabric.Gradient.fromElement(r,t,e,this.options),t.set(i,r))},t.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},t.resolveClipPath=function(t,e){var i,r=this.extractPropertyDefinition(t,"clipPath","clipPaths");if(r){for(var n=[],s=fabric.util.invertTransform(t.calcTransformMatrix()),o=r[0].parentNode,a=e;a.parentNode&&a.getAttribute("clip-path")!==t.clipPath;)a=a.parentNode;a.parentNode.appendChild(o);for(var c=0;c<r.length;c++)i=r[c],this.findTag(i).fromElement(i,this.createClipPathCallback(t,n),this.options);r=1===n.length?n[0]:new fabric.Group(n),e=fabric.util.multiplyTransformMatrices(s,r.calcTransformMatrix()),r.clipPath&&this.resolveClipPath(r,a);o=fabric.util.qrDecompose(e);r.flipX=!1,r.flipY=!1,r.set("scaleX",o.scaleX),r.set("scaleY",o.scaleY),r.angle=o.angle,r.skewX=o.skewX,r.skewY=0,r.setPositionByOrigin({x:o.translateX,y:o.translateY},"center","center"),t.clipPath=r}else delete t.clipPath},t.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances,this.elements))}}(fabric.ElementsParser.prototype),function(t){"use strict";t=t.fabric||(t.fabric={});function i(t,e){this.x=t,this.y=e}t.Point?t.warn("fabric.Point is already defined"):(t.Point=i).prototype={type:"point",constructor:i,add:function(t){return new i(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new i(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new i(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new i(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new i(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new i(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return void 0===e&&(e=.5),e=Math.max(Math.min(1,e),0),new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,t=this.y-t.y;return Math.sqrt(e*e+t*t)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new i(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new i(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone:function(){return new i(this.x,this.y)}}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var a=t.fabric||(t.fabric={});function c(t){this.status=t,this.points=[]}a.Intersection?a.warn("fabric.Intersection is already defined"):(a.Intersection=c,a.Intersection.prototype={constructor:c,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},a.Intersection.intersectLineLine=function(t,e,i,r){var n,s=(r.x-i.x)*(t.y-i.y)-(r.y-i.y)*(t.x-i.x),o=(e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x),r=(r.y-i.y)*(e.x-t.x)-(r.x-i.x)*(e.y-t.y);return 0!=r?(i=o/r,0<=(r=s/r)&&r<=1&&0<=i&&i<=1?(n=new c("Intersection")).appendPoint(new a.Point(t.x+r*(e.x-t.x),t.y+r*(e.y-t.y))):n=new c):n=new c(0==s||0==o?"Coincident":"Parallel"),n},a.Intersection.intersectLinePolygon=function(t,e,i){for(var r,n,s=new c,o=i.length,a=0;a<o;a++)n=i[a],r=i[(a+1)%o],n=c.intersectLineLine(t,e,n,r),s.appendPoints(n.points);return 0<s.points.length&&(s.status="Intersection"),s},a.Intersection.intersectPolygonPolygon=function(t,e){for(var i=new c,r=t.length,n=0;n<r;n++){var s=t[n],o=t[(n+1)%r],s=c.intersectLinePolygon(s,o,e);i.appendPoints(s.points)}return 0<i.points.length&&(i.status="Intersection"),i},a.Intersection.intersectPolygonRectangle=function(t,e,i){var r=e.min(i),e=e.max(i),i=new a.Point(e.x,r.y),n=new a.Point(r.x,e.y),s=c.intersectLinePolygon(r,i,t),i=c.intersectLinePolygon(i,e,t),e=c.intersectLinePolygon(e,n,t),n=c.intersectLinePolygon(n,r,t),r=new c;return r.appendPoints(s.points),r.appendPoints(i.points),r.appendPoints(e.points),r.appendPoints(n.points),0<r.points.length&&(r.status="Intersection"),r})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var h=t.fabric||(t.fabric={});function a(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function c(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}h.Color?h.warn("fabric.Color is already defined."):(h.Color=a,h.Color.prototype={_tryParsingColor:function(t){var e;(e=(e=(e=(e=(e="transparent"===(t=t in a.colorNameMap?a.colorNameMap[t]:t)?[255,255,255,0]:e)||a.sourceFromHex(t))||a.sourceFromRgb(t))||a.sourceFromHsl(t))||[0,0,0,1])&&this.setSource(e)},_rgbToHsl:function(t,e,i){var r,n=h.util.array.max([t/=255,e/=255,i/=255]),s=h.util.array.min([t,e,i]),o=(n+s)/2;if(n===s)r=c=0;else{var a=n-s,c=.5<o?a/(2-n-s):a/(n+s);switch(n){case t:r=(e-i)/a+(e<i?6:0);break;case e:r=(i-t)/a+2;break;case i:r=(t-e)/a+4}r/=6}return[Math.round(360*r),Math.round(100*c),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),t=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+t[0]+","+t[1]+"%,"+t[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e=this.getSource(),i=e[0].toString(16);return i=1===i.length?"0"+i:i,t=1===(t=e[1].toString(16)).length?"0"+t:t,e=1===(e=e[2].toString(16)).length?"0"+e:e,i.toUpperCase()+t.toUpperCase()+e.toUpperCase()},toHexa:function(){var t=this.getSource(),t=Math.round(255*t[3]);return t=1===(t=t.toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),t=t[3];return this.setSource([e,e,e,t]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),e=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,e]),this},overlayWith:function(t){t instanceof a||(t=new a(t));for(var e=[],i=this.getAlpha(),r=this.getSource(),n=t.getSource(),s=0;s<3;s++)e.push(Math.round(.5*r[s]+.5*n[s]));return e[3]=i,this.setSource(e),this}},h.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,h.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,h.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,h.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},h.Color.fromRgb=function(t){return a.fromSource(a.sourceFromRgb(t))},h.Color.sourceFromRgb=function(t){var e,i,r,t=t.match(a.reRGBa);if(t)return e=parseInt(t[1],10)/(/%$/.test(t[1])?100:1)*(/%$/.test(t[1])?255:1),i=parseInt(t[2],10)/(/%$/.test(t[2])?100:1)*(/%$/.test(t[2])?255:1),r=parseInt(t[3],10)/(/%$/.test(t[3])?100:1)*(/%$/.test(t[3])?255:1),[parseInt(e,10),parseInt(i,10),parseInt(r,10),t[4]?parseFloat(t[4]):1]},h.Color.fromRgba=a.fromRgb,h.Color.fromHsl=function(t){return a.fromSource(a.sourceFromHsl(t))},h.Color.sourceFromHsl=function(t){var e,i,r,n,s,o,t=t.match(a.reHSLa);if(t)return e=(parseFloat(t[1])%360+360)%360/360,r=parseFloat(t[2])/(/%$/.test(t[2])?100:1),i=parseFloat(t[3])/(/%$/.test(t[3])?100:1),0==r?n=s=o=i:(n=c(r=2*i-(i=i<=.5?i*(1+r):i+r-i*r),i,e+1/3),s=c(r,i,e),o=c(r,i,e-1/3)),[Math.round(255*n),Math.round(255*s),Math.round(255*o),t[4]?parseFloat(t[4]):1]},h.Color.fromHsla=a.fromHsl,h.Color.fromHex=function(t){return a.fromSource(a.sourceFromHex(t))},h.Color.sourceFromHex=function(t){var e,i,r,n,s;if(t.match(a.reHex))return e=3===(t=t.slice(t.indexOf("#")+1)).length||4===t.length,s=8===t.length||4===t.length,i=e?t.charAt(0)+t.charAt(0):t.substring(0,2),r=e?t.charAt(1)+t.charAt(1):t.substring(2,4),n=e?t.charAt(2)+t.charAt(2):t.substring(4,6),s=s?e?t.charAt(3)+t.charAt(3):t.substring(6,8):"FF",[parseInt(i,16),parseInt(r,16),parseInt(n,16),parseFloat((parseInt(s,16)/255).toFixed(2))]},h.Color.fromSource=function(t){var e=new a;return e.setSource(t),e})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var a=t.fabric||(t.fabric={}),n=["e","se","s","sw","w","nw","n","ne","e"],s=["ns","nesw","ew","nwse"],o={},c="left",h="top",l="right",u="bottom",f="center",d={top:u,bottom:h,left:l,right:c,center:f},g=a.util.radiansToDegrees,p=Math.sign||function(t){return(0<t)-(t<0)||+t};function m(t,e){t=t.angle+g(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function v(t,e){var i=e.transform.target,r=i.canvas,n=a.util.object.clone(e);n.target=i,r&&r.fire("object:"+t,n),i.fire(t,e)}function b(t,e){e=e.canvas,t=t[e.uniScaleKey];return e.uniformScaling&&!t||!e.uniformScaling&&t}function y(t){return t.originX===f&&t.originY===f}function _(t,e,i){var r=t.lockScalingX,t=t.lockScalingY;return!(!r||!t)||(!(e||!r&&!t||!i)||(!(!r||"x"!==e)||!(!t||"y"!==e)))}function x(t,e,i,r){return{e:t,transform:e,pointer:{x:i,y:r}}}function C(o){return function(t,e,i,r){var n=e.target,s=n.getCenterPoint(),s=n.translateToOriginPoint(s,e.originX,e.originY),t=o(t,e,i,r);return n.setPositionByOrigin(s,e.originX,e.originY),t}}function S(s,o){return function(t,e,i,r){var n=o(t,e,i,r);return n&&v(s,x(t,e,i,r)),n}}function T(t,e,i,r,n){var s=t.target,t=s.controls[t.corner],o=s.canvas.getZoom(),o=s.padding/o,s=s.toLocalPoint(new a.Point(r,n),e,i);return s.x>=o&&(s.x-=o),s.x<=-o&&(s.x+=o),s.y>=o&&(s.y-=o),s.y<=o&&(s.y+=o),s.x-=t.offsetX,s.y-=t.offsetY,s}function w(t){return t.flipX!==t.flipY}function O(t,e,i,r,n){0!==t[e]&&(e=n/t._getTransformedDimensions()[r]*t[i],t.set(i,e))}function P(t,e,i,r){var n,s=e.target,o=s._getTransformedDimensions(0,s.skewY),i=T(e,e.originX,e.originY,i,r),r=Math.abs(2*i.x)-o.x,i=s.skewX,r=(r<2?n=0:(n=g(Math.atan2(r/s.scaleX,o.y/s.scaleY)),e.originX===c&&e.originY===u&&(n=-n),e.originX===l&&e.originY===h&&(n=-n),w(s)&&(n=-n)),i!==n);return r&&(o=s._getTransformedDimensions().y,s.set("skewX",n),O(s,"skewY","scaleY","y",o)),r}function k(t,e,i,r){var n,s=e.target,o=s._getTransformedDimensions(s.skewX,0),i=T(e,e.originX,e.originY,i,r),r=Math.abs(2*i.y)-o.y,i=s.skewY,r=(r<2?n=0:(n=g(Math.atan2(r/s.scaleY,o.x/s.scaleX)),e.originX===c&&e.originY===u&&(n=-n),e.originX===l&&e.originY===h&&(n=-n),w(s)&&(n=-n)),i!==n);return r&&(o=s._getTransformedDimensions().x,s.set("skewY",n),O(s,"skewX","scaleX","x",o)),r}function E(t,e,i,r,n){var s=e.target,o=s.lockScalingX,a=s.lockScalingY,n=(n=n||{}).by,t=b(t,s),c=_(s,n,t),h=e.gestureScale;if(c)return!1;if(h)l=e.scaleX*h,u=e.scaleY*h;else{if(c=T(e,e.originX,e.originY,i,r),h="y"!==n?p(c.x):1,i="x"!==n?p(c.y):1,e.signX||(e.signX=h),e.signY||(e.signY=i),s.lockScalingFlip&&(e.signX!==h||e.signY!==i))return!1;var l,u,r=s._getTransformedDimensions();u=t&&!n?(t=Math.abs(c.x)+Math.abs(c.y),f=e.original,t=t/(Math.abs(r.x*f.scaleX/s.scaleX)+Math.abs(r.y*f.scaleY/s.scaleY)),l=f.scaleX*t,f.scaleY*t):(l=Math.abs(c.x*s.scaleX/r.x),Math.abs(c.y*s.scaleY/r.y)),y(e)&&(l*=2,u*=2),e.signX!==h&&"y"!==n&&(e.originX=d[e.originX],l*=-1,e.signX=h),e.signY!==i&&"x"!==n&&(e.originY=d[e.originY],u*=-1,e.signY=i)}var f=s.scaleX,t=s.scaleY;return n?("x"===n&&s.set("scaleX",l),"y"===n&&s.set("scaleY",u)):(o||s.set("scaleX",l),a||s.set("scaleY",u)),f!==s.scaleX||t!==s.scaleY}o.scaleCursorStyleHandler=function(t,e,i){var t=b(t,i),r="";return 0!==e.x&&0===e.y?r="x":0===e.x&&0!==e.y&&(r="y"),_(i,r,t)?"not-allowed":(r=m(i,e),n[r]+"-resize")},o.skewCursorStyleHandler=function(t,e,i){var r="not-allowed";return 0!==e.x&&i.lockSkewingY||0!==e.y&&i.lockSkewingX?r:(r=m(i,e)%4,s[r]+"-resize")},o.scaleSkewCursorStyleHandler=function(t,e,i){return t[i.canvas.altActionKey]?o.skewCursorStyleHandler(t,e,i):o.scaleCursorStyleHandler(t,e,i)},o.rotationWithSnapping=S("rotating",C(function(t,e,i,r){var n=e.target,s=n.translateToOriginPoint(n.getCenterPoint(),e.originX,e.originY);if(n.lockRotation)return!1;var o=Math.atan2(e.ey-s.y,e.ex-s.x),r=Math.atan2(r-s.y,i-s.x),i=g(r-o+e.theta);return 0<n.snapAngle&&(s=n.snapAngle,r=n.snapThreshold||s,o=Math.ceil(i/s)*s,e=Math.floor(i/s)*s,Math.abs(i-e)<r?i=e:Math.abs(i-o)<r&&(i=o)),i<0&&(i=360+i),s=n.angle!==(i%=360),n.angle=i,s})),o.scalingEqually=S("scaling",C(function(t,e,i,r){return E(t,e,i,r)})),o.scalingX=S("scaling",C(function(t,e,i,r){return E(t,e,i,r,{by:"x"})})),o.scalingY=S("scaling",C(function(t,e,i,r){return E(t,e,i,r,{by:"y"})})),o.scalingYOrSkewingX=function(t,e,i,r){return t[e.target.canvas.altActionKey]?o.skewHandlerX(t,e,i,r):o.scalingY(t,e,i,r)},o.scalingXOrSkewingY=function(t,e,i,r){return t[e.target.canvas.altActionKey]?o.skewHandlerY(t,e,i,r):o.scalingX(t,e,i,r)},o.changeWidth=S("resizing",C(function(t,e,i,r){var n=e.target,i=T(e,e.originX,e.originY,i,r),r=n.strokeWidth/(n.strokeUniform?n.scaleX:1),e=y(e)?2:1,s=n.width,i=Math.abs(i.x*e/n.scaleX)-r;return n.set("width",Math.max(i,0)),s!==i})),o.skewHandlerX=function(t,e,i,r){var n,s=e.target,o=s.skewX,a=e.originY;return!s.lockSkewingX&&(0===o?n=0<T(e,f,f,i,r).x?c:l:(0<o&&(n=a===h?c:l),o<0&&(n=a===h?l:c),w(s)&&(n=n===c?l:c)),e.originX=n,S("skewing",C(P))(t,e,i,r))},o.skewHandlerY=function(t,e,i,r){var n,s=e.target,o=s.skewY,a=e.originX;return!s.lockSkewingY&&(0===o?n=0<T(e,f,f,i,r).y?h:u:(0<o&&(n=a===c?h:u),o<0&&(n=a===c?u:h),w(s)&&(n=n===h?u:h)),e.originY=n,S("skewing",C(k))(t,e,i,r))},o.dragHandler=function(t,e,i,r){var n=e.target,s=i-e.offsetX,o=r-e.offsetY,a=!n.get("lockMovementX")&&n.left!==s,c=!n.get("lockMovementY")&&n.top!==o;return a&&n.set("left",s),c&&n.set("top",o),(a||c)&&v("moving",x(t,e,i,r)),a||c},o.scaleOrSkewActionName=function(t,e,i){return t=t[i.canvas.altActionKey],0===e.x?t?"skewX":"scaleY":0===e.y?t?"skewY":"scaleX":void 0},o.rotationStyleHandler=function(t,e,i){return i.lockRotation?"not-allowed":e.cursorStyle},o.fireEvent=v,o.wrapWithFixedAnchor=C,o.wrapWithFireEvent=S,o.getLocalPoint=T,a.controlsUtils=o}("undefined"!=typeof exports?exports:this),function(t){"use strict";var t=t.fabric||(t.fabric={}),u=t.util.degreesToRadians,t=t.controlsUtils;t.renderCircleControl=function(t,e,i,r,n){r=r||{};var s,o=this.sizeX||r.cornerSize||n.cornerSize,a=this.sizeY||r.cornerSize||n.cornerSize,c=(h=(void 0!==r.transparentCorners?r:n).transparentCorners)?"stroke":"fill",h=!h&&(r.cornerStrokeColor||n.cornerStrokeColor),l=e,u=i;t.save(),t.fillStyle=r.cornerColor||n.cornerColor,t.strokeStyle=r.cornerStrokeColor||n.cornerStrokeColor,a<o?(t.scale(1,a/(s=o)),u=i*o/a):o<a?(t.scale(o/(s=a),1),l=e*a/o):s=o,t.lineWidth=1,t.beginPath(),t.arc(l,u,s/2,0,2*Math.PI,!1),t[c](),h&&t.stroke(),t.restore()},t.renderSquareControl=function(t,e,i,r,n){r=r||{};var s=this.sizeX||r.cornerSize||n.cornerSize,o=this.sizeY||r.cornerSize||n.cornerSize,a=(c=(void 0!==r.transparentCorners?r:n).transparentCorners)?"stroke":"fill",c=!c&&(r.cornerStrokeColor||n.cornerStrokeColor),h=s/2,l=o/2;t.save(),t.fillStyle=r.cornerColor||n.cornerColor,t.strokeStyle=r.cornerStrokeColor||n.cornerStrokeColor,t.lineWidth=1,t.translate(e,i),t.rotate(u(n.angle)),t[a+"Rect"](-h,-l,s,o),c&&t.strokeRect(-h,-l,s,o),t.restore()}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var f=t.fabric||(t.fabric={});f.Control=function(t){for(var e in t)this[e]=t[e]},f.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(t,e){return e.cursorStyle},getActionName:function(t,e){return e.actionName},getVisibility:function(t,e){t=t._controlsVisibility;return t&&void 0!==t[e]?t[e]:this.visible},setVisibility:function(t){this.visible=t},positionHandler:function(t,e){return f.util.transformPoint({x:this.x*t.x+this.offsetX,y:this.y*t.y+this.offsetY},e)},calcCornerCoords:function(t,e,i,r,n){var s,o,a,c,h,l,u=n?this.touchSizeX:this.sizeX,n=n?this.touchSizeY:this.sizeY;return u&&n&&u!==n?(c=Math.atan2(n,u),h=Math.sqrt(u*u+n*n)/2,l=c-f.util.degreesToRadians(t),c=Math.PI/2-c-f.util.degreesToRadians(t),s=h*f.util.cos(l),o=h*f.util.sin(l),a=h*f.util.cos(c),c=h*f.util.sin(c)):(h=.7071067812*(u&&n?u:e),l=f.util.degreesToRadians(45-t),s=a=h*f.util.cos(l),o=c=h*f.util.sin(l)),{tl:{x:i-c,y:r-a},tr:{x:i+s,y:r-o},bl:{x:i-s,y:r+o},br:{x:i+c,y:r+a}}},render:function(t,e,i,r,n){("circle"===((r=r||{}).cornerStyle||n.cornerStyle)?f.controlsUtils.renderCircleControl:f.controlsUtils.renderSquareControl).call(this,t,e,i,r,n)}}}("undefined"!=typeof exports?exports:this),function(){var p=fabric.util.object.clone;fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(e){(e=e||{}).coords||(e.coords={});var t,i=this;Object.keys(e).forEach(function(t){i[t]=e[t]}),this.id?this.id+="_"+fabric.Object.__uid++:this.id=fabric.Object.__uid++,t={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},"radial"===this.type&&(t.r1=e.coords.r1||0,t.r2=e.coords.r2||0),this.coords=t,this.colorStops=e.colorStops.slice()},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform&&this.gradientTransform.concat()};return fabric.util.populateWithProperties(this,e,t),e},toSVG:function(t,e){var i,r=p(this.coords,!0),e=e||{},n=p(this.colorStops,!0),s=r.r1>r.r2,o=(this.gradientTransform||fabric.iMatrix).concat(),a=-this.offsetX,c=-this.offsetY,h=!!e.additionalTransform,l="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(n.sort(function(t,e){return t.offset-e.offset}),"objectBoundingBox"==l?(a/=t.width,c/=t.height):(a+=t.width/2,c+=t.height/2),"path"===t.type&&"percentage"!==this.gradientUnits&&(a-=t.pathOffset.x,c-=t.pathOffset.y),o[4]-=a,o[5]-=c,t='id="SVGID_'+this.id+'" gradientUnits="'+l+'"',t+=' gradientTransform="'+(h?e.additionalTransform+" ":"")+fabric.util.matrixToSVG(o)+'" ',"linear"===this.type?i=["<linearGradient ",t,' x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,'">\n']:"radial"===this.type&&(i=["<radialGradient ",t,' cx="',s?r.x1:r.x2,'" cy="',s?r.y1:r.y2,'" r="',s?r.r1:r.r2,'" fx="',s?r.x2:r.x1,'" fy="',s?r.y2:r.y1,'">\n']),"radial"===this.type){if(s)for((n=n.concat()).reverse(),f=0,d=n.length;f<d;f++)n[f].offset=1-n[f].offset;a=Math.min(r.r1,r.r2);if(0<a)for(var u=a/Math.max(r.r1,r.r2),f=0,d=n.length;f<d;f++)n[f].offset+=u*(1-n[f].offset)}for(f=0,d=n.length;f<d;f++){var g=n[f];i.push("<stop ",'offset="',100*g.offset+"%",'" style="stop-color:',g.color,void 0!==g.opacity?";stop-opacity: "+g.opacity:";",'"/>\n')}return i.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),i.join("")},toLive:function(t){var e,i,r,n=fabric.util.object.clone(this.coords);if(this.type){for("linear"===this.type?e=t.createLinearGradient(n.x1,n.y1,n.x2,n.y2):"radial"===this.type&&(e=t.createRadialGradient(n.x1,n.y1,n.r1,n.x2,n.y2,n.r2)),i=0,r=this.colorStops.length;i<r;i++){var s=this.colorStops[i].color,o=this.colorStops[i].opacity,a=this.colorStops[i].offset;void 0!==o&&(s=new fabric.Color(s).setAlpha(o).toRgba()),e.addColorStop(a,s)}return e}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(t,e,i,r){for(var n,s,o,a,c,h,l,u=(u=parseFloat(i)/(/%$/.test(i)?100:1))<0?0:1<u?1:u,f=(isNaN(u)&&(u=1),t.getElementsByTagName("stop")),i="userSpaceOnUse"===t.getAttribute("gradientUnits")?"pixels":"percentage",d=t.getAttribute("gradientTransform")||"",g=[],p=0,m=0,v="linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?(n="linear",{x1:(s=t).getAttribute("x1")||0,y1:s.getAttribute("y1")||0,x2:s.getAttribute("x2")||"100%",y2:s.getAttribute("y2")||0}):(n="radial",{x1:(s=t).getAttribute("fx")||s.getAttribute("cx")||"50%",y1:s.getAttribute("fy")||s.getAttribute("cy")||"50%",r1:0,x2:s.getAttribute("cx")||"50%",y2:s.getAttribute("cy")||"50%",r2:s.getAttribute("r")||"50%"}),b=f.length;b--;)g.push(function(t,e){var i,r,n,s=t.getAttribute("style"),o=t.getAttribute("offset")||0;if(o=(o=parseFloat(o)/(/%$/.test(o)?100:1))<0?0:1<o?1:o,s){var a=s.split(/\s*;\s*/);for(""===a[a.length-1]&&a.pop(),n=a.length;n--;){var c=a[n].split(/\s*:\s*/),h=c[0].trim(),c=c[1].trim();"stop-color"===h?i=c:"stop-opacity"===h&&(r=c)}}return i=i||t.getAttribute("stop-color")||"rgb(0,0,0)",r=r||t.getAttribute("stop-opacity"),s=(i=new fabric.Color(i)).getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=s*e,{offset:o,color:i.toRgb(),opacity:r}}(f[b],u));return d=fabric.parseTransformAttribute(d),o=v,a=r,c=i,Object.keys(o).forEach(function(t){"Infinity"===(h=o[t])?l=1:"-Infinity"===h?l=0:(l=parseFloat(o[t],10),"string"==typeof h&&/^(\d+\.\d+)%|(\d+)%$/.test(h)&&(l*=.01,"pixels"===c&&("x1"!==t&&"x2"!==t&&"r2"!==t||(l*=a.viewBoxWidth||a.width),"y1"!==t&&"y2"!==t||(l*=a.viewBoxHeight||a.height)))),o[t]=l}),"pixels"==i&&(p=-e.left,m=-e.top),new fabric.Gradient({id:t.getAttribute("id"),type:n,coords:v,colorStops:g,gradientUnits:i,gradientTransform:d,offsetX:p,offsetY:m})}})}(),function(){"use strict";var r=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(t,i){var r;t=t||{},this.id=fabric.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!=typeof t.source?i&&i(this):((r=this).source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t,e){r.source=t,i&&i(r,e)},null,this.crossOrigin))},toObject:function(t){var e,i=fabric.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?e=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(e=this.source.toDataURL()),e={type:"pattern",source:e,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:r(this.offsetX,i),offsetY:r(this.offsetY,i),patternTransform:this.patternTransform?this.patternTransform.concat():null},fabric.util.populateWithProperties(this,e,t),e},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.width,r=e.height/t.height,n=this.offsetX/t.width,t=this.offsetY/t.height,s="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(r=1,t&&(r+=Math.abs(t))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,n&&(i+=Math.abs(n))),e.src?s=e.src:e.toDataURL&&(s=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+n+'" y="'+t+'" width="'+i+'" height="'+r+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+s+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e=this.source;if(!e)return"";if(void 0!==e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var o=t.fabric||(t.fabric={}),a=o.util.toFixed;o.Shadow?o.warn("fabric.Shadow is already defined."):(o.Shadow=o.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var e in t="string"==typeof t?this._parseShadow(t):t)this[e]=t[e];this.id=o.Object.__uid++},_parseShadow:function(t){var t=t.trim(),e=o.Shadow.reOffsetsAndBlur.exec(t)||[];return{color:(t.replace(o.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(e[1],10)||0,offsetY:parseFloat(e[2],10)||0,blur:parseFloat(e[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var e=40,i=40,r=o.Object.NUM_FRACTION_DIGITS,n=o.util.rotateVector({x:this.offsetX,y:this.offsetY},o.util.degreesToRadians(-t.angle)),s=new o.Color(this.color);return t.width&&t.height&&(e=100*a((Math.abs(n.x)+this.blur)/t.width,r)+20,i=100*a((Math.abs(n.y)+this.blur)/t.height,r)+20),t.flipX&&(n.x*=-1),t.flipY&&(n.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+i+'%" height="'+(100+2*i)+'%" x="-'+e+'%" width="'+(100+2*e)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+a(this.blur?this.blur/2:0,r)+'"></feGaussianBlur>\n\t<feOffset dx="'+a(n.x,r)+'" dy="'+a(n.y,r)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+s.toRgb()+'" flood-opacity="'+s.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var e={},i=o.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(t){this[t]!==i[t]&&(e[t]=this[t])},this),e}}),o.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}("undefined"!=typeof exports?exports:this),function(){"use strict";var n,t,h,a,s,o,i,r,e;fabric.StaticCanvas?fabric.warn("fabric.StaticCanvas is already defined."):(n=fabric.util.object.extend,t=fabric.util.getElementOffset,h=fabric.util.removeFromArray,a=fabric.util.toFixed,s=fabric.util.transformPoint,o=fabric.util.invertTransform,i=fabric.util.getNodeCanvas,r=fabric.util.createCanvasElement,e=new Error("Could not initialize `canvas` element"),fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(t,e){e=e||{},this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var i=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,i),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,i),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,i),e.overlayColor&&this.setOverlayColor(e.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return 1<fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,fabric.devicePixelRatio):1},_initRetinaScaling:function(){var t;this._isRetinaScaling()&&(t=fabric.devicePixelRatio,this.__initRetinaScaling(t,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(t,this.upperCanvasEl,this.contextTop))},__initRetinaScaling:function(t,e,i){e.setAttribute("width",this.width*t),e.setAttribute("height",this.height*t),i.scale(t,t)},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},__setBgOverlayImage:function(r,t,n,s){return"string"==typeof t?fabric.util.loadImage(t,function(t,e){var i;t&&(i=new fabric.Image(t,s),(this[r]=i).canvas=this),n&&n(t,e)},this,s&&s.crossOrigin):(s&&t.setOptions(s),(this[r]=t)&&(t.canvas=this),n&&n(t,!1)),this},__setBgOverlayColor:function(t,e,i){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,i),this},_createCanvasElement:function(){var t=r();if(!t)throw e;if(t.style||(t.style={}),void 0===t.getContext)throw e;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+"px",e.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i,r;for(r in e=e||{},t)i=t[r],e.cssOnly||(this._setBackstoreDimension(r,t[r]),i+="px",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(r,i);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,i,r,n=this._activeObject,s=this.backgroundImage,o=this.overlayImage;for(this.viewportTransform=t,i=0,r=this._objects.length;i<r;i++)(e=this._objects[i]).group||e.setCoords(!0);return n&&n.setCoords(),s&&s.setCoords(!0),o&&o.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var i=t,r=this.viewportTransform.slice(0),e=(t=s(t,o(this.viewportTransform)),r[0]=e,r[3]=e,s(t,r));return r[4]+=i.x-e.x,r[5]+=i.y-e.y,this.setViewportTransform(r)},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=fabric.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,i=this.height,r=o(this.viewportTransform);return t.tl=s({x:0,y:0},r),t.br=s({x:e,y:i},r),t.tr=new fabric.Point(t.br.x,t.tl.y),t.bl=new fabric.Point(t.tl.x,t.br.y),this.vptCoords=t},cancelRequestedRender:function(){this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var i=this.viewportTransform,r=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),fabric.util.setImageSmoothing(t,this.imageSmoothingEnabled),this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),r&&(r.canvas=this,r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,i=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation="destination-in",i.transform(t),t.scale(1/i.zoomX,1/i.zoomY),t.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),t.restore()},_renderObjects:function(t,e){for(var i=0,r=e.length;i<r;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i=this[e+"Color"],r=this[e+"Image"],n=this.viewportTransform,e=this[e+"Vpt"];(i||r)&&(i&&(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=i.toLive?i.toLive(t,this):i,e&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0),(i=i.gradientTransform||i.patternTransform)&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t.fill(),t.restore()),r&&(t.save(),e&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),r.render(t),t.restore()))},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new fabric.Point(this.width/2,this.height/2)},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenterPoint().x,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(t){var e=this.getCenterPoint();return this._centerObject(t,e)},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenterPoint(),e=o(this.viewportTransform);return s(t,e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(t,e){var i=this.clipPath,r={version:fabric.version,objects:this._toObjects(t,e)};return i&&!i.excludeFromExport&&(r.clipPath=this._toObject(this.clipPath,t,e)),n(r,this.__serializeBgOverlay(t,e)),fabric.util.populateWithProperties(this,r,e),r},_toObjects:function(e,i){return this._objects.filter(function(t){return!t.excludeFromExport}).map(function(t){return this._toObject(t,e,i)},this)},_toObject:function(t,e,i){this.includeDefaultValues||(r=t.includeDefaultValues,t.includeDefaultValues=!1);var r,e=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=r),e},__serializeBgOverlay:function(t,e){var i={},r=this.backgroundImage,n=this.overlayImage,s=this.backgroundColor,o=this.overlayColor;return s&&s.toObject?s.excludeFromExport||(i.background=s.toObject(e)):s&&(i.background=s),o&&o.toObject?o.excludeFromExport||(i.overlay=o.toObject(e)):o&&(i.overlay=o),r&&!r.excludeFromExport&&(i.backgroundImage=this._toObject(r,t,e)),n&&!n.excludeFromExport&&(i.overlayImage=this._toObject(n,t,e)),i},svgViewportTransformation:!0,toSVG:function(t,e){(t=t||{}).reviver=e;var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this.clipPath&&i.push("</g>\n"),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,r=e.width||this.width,n=e.height||this.height,s='viewBox="0 0 '+this.width+" "+this.height+'" ',o=fabric.Object.NUM_FRACTION_DIGITS;e.viewBox?s='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,s='viewBox="'+a(-i[4]/i[0],o)+" "+a(-i[5]/i[3],o)+" "+a(this.width/i[0],o)+" "+a(this.height/i[3],o)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',n,'" ',s,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId="CLIPPATH_"+fabric.Object.__uid++,'<clipPath id="'+e.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(t.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var n=this;return["background","overlay"].map(function(t){var e,i,r=n[t+"Color"];if(r&&r.toLive)return t=n[t+"Vpt"],e=n.viewportTransform,i={width:n.width/(t?e[0]:1),height:n.height/(t?e[3]:1)},r.toSVG(i,{additionalTransform:t?fabric.util.matrixToSVG(e):""})}).join("")},createSVGFontFacesMarkup:function(){var t,e,i,r,n,s,o,a,c,h="",l={},u=fabric.fontPaths,f=[];for(this._objects.forEach(function t(e){f.push(e),e._objects&&e._objects.forEach(t)}),o=0,a=f.length;o<a;o++)if(e=(t=f[o]).fontFamily,-1!==t.type.indexOf("text")&&!l[e]&&u[e]&&(l[e]=!0,t.styles))for(n in i=t.styles)for(s in r=i[n])!l[e=r[s].fontFamily]&&u[e]&&(l[e]=!0);for(c in l)h+=["\t\t@font-face {\n","\t\t\tfont-family: '",c,"';\n","\t\t\tsrc: url('",u[c],"');\n","\t\t}\n"].join("");return h=h&&['\t<style type="text/css">',"<![CDATA[\n",h,"]]>","</style>\n"].join("")},_setSVGObjects:function(t,e){for(var i,r=this._objects,n=0,s=r.length;n<s;n++)(i=r[n]).excludeFromExport||this._setSVGObject(t,i,e)},_setSVGObject:function(t,e,i){t.push(e.toSVG(i))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){var i,r=this[e+"Color"],n=this.viewportTransform,s=this.width,o=this.height;r&&(r.toLive?(i=r.repeat,n=fabric.util.invertTransform(n),e=this[e+"Vpt"]?fabric.util.matrixToSVG(n):"",t.push('<rect transform="'+e+" translate(",s/2,",",o/2,')"',' x="',r.offsetX-s/2,'" y="',r.offsetY-o/2,'" ','width="',"repeat-y"===i||"no-repeat"===i?r.source.width:s,'" height="',"repeat-x"===i||"no-repeat"===i?r.source.height:o,'" fill="url(#SVGID_'+r.id+')"',"></rect>\n")):t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',"></rect>\n"))},sendToBack:function(t){if(!t)return this;var e,i,r,n=this._activeObject;if(t===n&&"activeSelection"===t.type)for(e=(r=n._objects).length;e--;)i=r[e],h(this._objects,i),this._objects.unshift(i);else h(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,i,r,n=this._activeObject;if(t===n&&"activeSelection"===t.type)for(r=n._objects,e=0;e<r.length;e++)i=r[e],h(this._objects,i),this._objects.push(i);else h(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var i,r,n,s,o,a=this._activeObject,c=0;if(t===a&&"activeSelection"===t.type)for(o=a._objects,i=0;i<o.length;i++)r=o[i],0+c<(n=this._objects.indexOf(r))&&(s=n-1,h(this._objects,r),this._objects.splice(s,0,r)),c++;else 0!==(n=this._objects.indexOf(t))&&(s=this._findNewLowerIndex(t,n,e),h(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,i){var r,n;if(i){for(n=(r=e)-1;0<=n;--n)if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){r=n;break}}else r=e-1;return r},bringForward:function(t,e){if(!t)return this;var i,r,n,s,o,a=this._activeObject,c=0;if(t===a&&"activeSelection"===t.type)for(i=(o=a._objects).length;i--;)r=o[i],(n=this._objects.indexOf(r))<this._objects.length-1-c&&(s=n+1,h(this._objects,r),this._objects.splice(s,0,r)),c++;else(n=this._objects.indexOf(t))!==this._objects.length-1&&(s=this._findNewUpperIndex(t,n,e),h(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,i){var r,n,s;if(i){for(n=(r=e)+1,s=this._objects.length;n<s;++n)if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){r=n;break}}else r=e+1;return r},moveTo:function(t,e){return h(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),fabric.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),fabric.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),n(fabric.StaticCanvas.prototype,fabric.Observable),n(fabric.StaticCanvas.prototype,fabric.Collection),n(fabric.StaticCanvas.prototype,fabric.DataURLExporter),n(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=r();if(!e||!e.getContext)return null;e=e.getContext("2d");return!e||"setLineDash"!==t?null:void 0!==e.setLineDash}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject,fabric.isLikelyNode&&(fabric.StaticCanvas.prototype.createPNGStream=function(){var t=i(this.lowerCanvasEl);return t&&t.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){var e=i(this.lowerCanvasEl);return e&&e.createJPEGStream(t)}))}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(t){t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){var t,e,i,r;this.shadow&&(t=this.canvas,e=this.shadow,i=t.contextTop,r=t.getZoom(),t&&t._isRetinaScaling()&&(r*=fabric.devicePixelRatio),i.shadowColor=e.color,i.shadowBlur=e.blur*r,i.shadowOffsetX=e.offsetX*r,i.shadowOffsetY=e.offsetY*r)},needsFullRender:function(){return new fabric.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_isOutSideCanvas:function(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}),fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(t){this.canvas=t,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(t,e,i){i=e.midPointFrom(i);return t.quadraticCurveTo(e.x,e.y,i.x,i.y),i},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){var i;this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||this._captureDrawingPath(t)&&1<this._points.length&&(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this._render()):(t=(e=this._points).length,i=this.canvas.contextTop,this._saveAndTransform(i),this.oldEnd&&(i.beginPath(),i.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(i,e[t-2],e[t-1],!0),i.stroke(),i.restore())))},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){t=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)},_addPoint:function(t){return!(1<this._points.length&&t.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&1<this._points.length&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(t),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(t){t=new fabric.Point(t.x,t.y);return this._addPoint(t)},_render:function(t){var e,i,r,n=this._points[0],s=this._points[1];for(t=t||this.canvas.contextTop,this._saveAndTransform(t),t.beginPath(),2===this._points.length&&n.x===s.x&&n.y===s.y&&(r=this.width/1e3,n=new fabric.Point(n.x,n.y),s=new fabric.Point(s.x,s.y),n.x-=r,s.x+=r),t.moveTo(n.x,n.y),e=1,i=this._points.length;e<i;e++)this._drawSegment(t,n,s),n=this._points[e],s=this._points[e+1];t.lineTo(n.x,n.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=this.width/1e3;return fabric.util.getSmoothPathFromPoints(t,e)},_isEmptySVGPath:function(t){return"M 0 0 Q 0 0 0 0 L 0 0"===fabric.util.joinPath(t)},createPath:function(t){t=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new fabric.Shadow(this.shadow)),t},decimatePoints:function(t,e){if(t.length<=2)return t;for(var i=this.canvas.getZoom(),r=Math.pow(e/i,2),n=t.length-1,s=t[0],o=[s],a=1;a<n-1;a++)r<=Math.pow(s.x-t[a].x,2)+Math.pow(s.y-t[a].y,2)&&(s=t[a],o.push(s));return o.push(t[n]),o},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var t=this.convertPointsToSVGPath(this._points);this._isEmptySVGPath(t)?this.canvas.requestRenderAll():(t=this.createPath(t),this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t}))}}),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var t=this.addPoint(t),e=this.canvas.contextTop;this._saveAndTransform(e),this.dot(e,t),e.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,i=this.canvas.contextTop,r=this.points;for(this._saveAndTransform(i),t=0,e=r.length;t<e;t++)this.dot(i,r[t]);i.restore()},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))},onMouseUp:function(){for(var t=this.canvas.renderOnAddRemove,e=(this.canvas.renderOnAddRemove=!1,[]),i=0,r=this.points.length;i<r;i++){var n=this.points[i],n=new fabric.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&(n.shadow=new fabric.Shadow(this.shadow)),e.push(n)}var s=new fabric.Group(e);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},addPoint:function(t){var t=new fabric.Point(t.x,t.y),e=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return t.radius=e,t.fill=i,this.points.push(t),t}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.render(this.sprayChunkPoints))},onMouseUp:function(){for(var t=this.canvas.renderOnAddRemove,e=(this.canvas.renderOnAddRemove=!1,[]),i=0,r=this.sprayChunks.length;i<r;i++)for(var n=this.sprayChunks[i],s=0,o=n.length;s<o;s++){var a=new fabric.Rect({width:n[s].width,height:n[s].width,left:n[s].x+1,top:n[s].y+1,originX:"center",originY:"center",fill:this.color});e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var c=new fabric.Group(e);this.shadow&&c.set("shadow",new fabric.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){for(var e,i={},r=0,n=t.length;r<n;r++)i[e=t[r].left+""+t[r].top]||(i[e]=t[r]);var s=[];for(e in i)s.push(i[e]);return s},render:function(t){var e,i,r=this.canvas.contextTop;for(r.fillStyle=this.color,this._saveAndTransform(r),e=0,i=t.length;e<i;e++){var n=t[e];void 0!==n.opacity&&(r.globalAlpha=n.opacity),r.fillRect(n.x,n.y,n.width,n.width)}r.restore()},_render:function(){var t,e,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);i.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e=this.width/2,i=0;i<this.density;i++){var r=fabric.util.getRandomInt(t.x-e,t.x+e),n=fabric.util.getRandomInt(t.y-e,t.y+e),s=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth,r=new fabric.Point(r,n);r.width=s,this.randomOpacity&&(r.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(r)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=fabric.util.createCanvasElement(),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(t){return t.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(t){this.callSuper("_setBrushStyles",t),t.strokeStyle=this.getPattern(t)},createPath:function(t){var t=this.callSuper("createPath",t),e=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-e.x,offsetY:-e.y}),t}}),function(){var t,o=fabric.util.getPointer,c=fabric.util.degreesToRadians,h=fabric.util.isTouchEvent;for(t in fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e=e||{},this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e=this.getActiveObjects();if(0<e.length&&!this.preserveObjectStacking){for(var i=[],r=[],n=0,s=this._objects.length;n<s;n++)t=this._objects[n],(-1===e.indexOf(t)?i:r).push(t);1<e.length&&(this._activeObject._objects=r),i.push.apply(i,r)}else i=this._objects;return i},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){t=t.calcTransformMatrix(),t=fabric.util.invertTransform(t),e=this.restorePointerVpt(e);return fabric.util.transformPoint(e,t)},isTargetTransparent:function(t,e,i){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject)return n=this._normalizePointer(t,{x:e,y:i}),r=Math.max(t.cacheTranslationX+n.x*t.zoomX,0),n=Math.max(t.cacheTranslationY+n.y*t.zoomY,0),fabric.util.isTransparent(t._cacheContext,Math.round(r),Math.round(n),this.targetFindTolerance);var r=this.contextCache,n=t.selectionBackgroundColor,s=this.viewportTransform;return t.selectionBackgroundColor="",this.clearContext(r),r.save(),r.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t.render(r),r.restore(),t.selectionBackgroundColor=n,fabric.util.isTransparent(r,e,i,this.targetFindTolerance)},_isSelectionKeyPressed:function(e){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(t){return!0===e[t]}):e[this.selectionKey]},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),r=this._activeObject;return!e||r&&1<i.length&&-1===i.indexOf(e)&&r!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&r&&r!==e},_shouldCenterTransform:function(t,e,i){var r;if(t)return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?r=this.centeredScaling||t.centeredScaling:"rotate"===e&&(r=this.centeredRotation||t.centeredRotation),r?!i:i},_getOriginFromCorner:function(t,e){t={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?t.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(t.x="left"),"tl"===e||"mt"===e||"tr"===e?t.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(t.y="top"),t},_getActionFromCorner:function(t,e,i,r){if(!e||!t)return"drag";t=r.controls[e];return t.getActionName(i,t,r)},_setupCurrentTransform:function(t,e,i){var r,n,s,o,a;e&&(r=this.getPointer(t),n=e.__corner,a=e.controls[n],a=i&&n?a.getActionHandler(t,e,a):fabric.controlsUtils.dragHandler,i=this._getActionFromCorner(i,n,t,e),s=this._getOriginFromCorner(e,n),o=t[this.centeredKey],a={target:e,action:i,actionHandler:a,corner:n,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:r.x-e.left,offsetY:r.y-e.top,originX:s.x,originY:s.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:c(e.angle),width:e.width*e.scaleX,shiftKey:t.shiftKey,altKey:o,original:fabric.util.saveObjectTransform(e)},this._shouldCenterTransform(e,i,o)&&(a.originX="center",a.originY="center"),a.original.originX=s.x,a.original.originY=s.y,this._currentTransform=a,this._beforeTransform(t))},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,i=new fabric.Point(e.ex,e.ey),i=fabric.util.transformPoint(i,this.viewportTransform),e=new fabric.Point(e.ex+e.left,e.ey+e.top),e=fabric.util.transformPoint(e,this.viewportTransform),r=Math.min(i.x,e.x),n=Math.min(i.y,e.y),s=Math.max(i.x,e.x),i=Math.max(i.y,e.y),e=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(r,n,s-r,i-n)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,r+=e,n+=e,s-=e,i-=e,fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(r,n,s-r,i-n))},findTarget:function(t,e){if(!this.skipTargetFind){var i,r,n=this.getPointer(t,!0),s=this._activeObject,o=this.getActiveObjects(),a=h(t),c=1<o.length&&!e||1===o.length;if(this.targets=[],c&&s._findTargetCorner(n,a))return s;if(1<o.length&&!e&&s===this._searchPossibleTargets([s],n))return s;if(1===o.length&&s===this._searchPossibleTargets([s],n)){if(!this.preserveObjectStacking)return s;i=s,r=this.targets,this.targets=[]}c=this._searchPossibleTargets(this._objects,n);return t[this.altSelectionKey]&&c&&i&&c!==i&&(c=i,this.targets=r),c}},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&e.containsPoint(t))return!((this.perPixelTargetFind||e.perPixelTargetFind)&&!e.isEditing)||(!this.isTargetTransparent(e,i.x,i.y)||void 0)},_searchPossibleTargets:function(t,e){for(var i,r=t.length;r--;){var n=t[r],s=n.group?this._normalizePointer(n.group,e):e;if(this._checkTarget(s,n,e)){(i=t[r]).subTargetCheck&&i instanceof fabric.Group&&(s=this._searchPossibleTargets(i._objects,e))&&this.targets.push(s);break}}return i},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(t,e){if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;var t=o(t),i=this.upperCanvasEl,r=i.getBoundingClientRect(),n=r.width||0,s=r.height||0,r=(n&&s||("top"in r&&"bottom"in r&&(s=Math.abs(r.top-r.bottom)),"right"in r&&"left"in r&&(n=Math.abs(r.right-r.left))),this.calcOffset(),t.x=t.x-this._offset.left,t.y=t.y-this._offset.top,e||(t=this.restorePointerVpt(t)),this.getRetinaScaling());return 1!==r&&(t.x/=r,t.y/=r),e=0===n||0===s?{width:1,height:1}:{width:i.width/n,height:i.height/s},{x:t.x*e.width,y:t.y*e.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),fabric.util.addClass(i,"upper-canvas "+t),this.wrapperEl.appendChild(i),this._copyCanvasStyle(e,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(e,i){var r=!1,n=this.getActiveObjects(),s=[],o=[];e.forEach(function(t){-1===n.indexOf(t)&&(r=!0,t.fire("deselected",{e:i,target:t}),o.push(t))}),n.forEach(function(t){-1===e.indexOf(t)&&(r=!0,t.fire("selected",{e:i,target:t}),s.push(t))}),0<e.length&&0<n.length?r&&this.fire("selection:updated",{e:i,selected:s,deselected:o}):0<n.length?this.fire("selection:created",{e:i,selected:s}):0<e.length&&this.fire("selection:cleared",{e:i,deselected:o})},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&(!!this._discardActiveObject(e,t)&&(!t.onSelect({e:e})&&(this._activeObject=t,!0)))},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),i=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:i,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(t){fabric.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,fabric.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var r=this._realizeGroupTransformOnObject(t),e=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,r),e},_realizeGroupTransformOnObject:function(e){var i;return e.group&&"activeSelection"===e.group.type&&this._activeObject===e.group?(i={},["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(t){i[t]=e[t]}),fabric.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),i):null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var r=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,r)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),fabric.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),fabric.StaticCanvas)"prototype"!==t&&(fabric.Canvas[t]=fabric.StaticCanvas[t])}(),function(){var r=fabric.util.addListener,n=fabric.util.removeListener,s={passive:!1};function h(t,e){return t.button&&t.button===e-1}fabric.util.object.extend(fabric.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(r,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var i=this.upperCanvasEl,r=this._getEventPrefix();t(fabric.window,"resize",this._onResize),t(i,r+"down",this._onMouseDown),t(i,r+"move",this._onMouseMove,s),t(i,r+"out",this._onMouseOut),t(i,r+"enter",this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,s),"undefined"!=typeof eventjs&&e in eventjs&&(eventjs[e](i,"gesture",this._onGesture),eventjs[e](i,"drag",this._onDrag),eventjs[e](i,"orientation",this._onOrientationChange),eventjs[e](i,"shake",this._onShake),eventjs[e](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove");var t=this._getEventPrefix();n(fabric.document,t+"up",this._onMouseUp),n(fabric.document,"touchend",this._onTouchEnd,s),n(fabric.document,t+"move",this._onMouseMove,s),n(fabric.document,"touchmove",this._onMouseMove,s)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(e){var i=this._hoveredTarget,r=(this.fire("mouse:out",{target:i,e:e}),this._hoveredTarget=null,i&&i.fire("mouseout",{e:e}),this);this._hoveredTargets.forEach(function(t){r.fire("mouse:out",{target:i,e:e}),t&&i.fire("mouseout",{e:e})}),this._hoveredTargets=[]},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onDrop:function(t){return this._simpleEventHandler("drop:before",t),this._simpleEventHandler("drop",t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||(!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(t){t.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var t=this.upperCanvasEl,e=this._getEventPrefix();r(fabric.document,"touchend",this._onTouchEnd,s),r(fabric.document,"touchmove",this._onMouseMove,s),n(t,e+"down",this._onMouseDown)},_onMouseDown:function(t){this.__onMouseDown(t),this._resetTransformEventData();var t=this.upperCanvasEl,e=this._getEventPrefix();n(t,e+"move",this._onMouseMove,s),r(fabric.document,e+"up",this._onMouseUp),r(fabric.document,e+"move",this._onMouseMove,s)},_onTouchEnd:function(t){var e,i;0<t.touches.length||(this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null,e=this._getEventPrefix(),n(fabric.document,"touchend",this._onTouchEnd,s),n(fabric.document,"touchmove",this._onMouseMove,s),(i=this)._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){r(i.upperCanvasEl,e+"down",i._onMouseDown),i._willAddMouseDown=0},400))},_onMouseUp:function(t){this.__onMouseUp(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();this._isMainEvent(t)&&(n(fabric.document,i+"up",this._onMouseUp),n(fabric.document,i+"move",this._onMouseMove,s),r(e,i+"move",this._onMouseMove,s))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!=!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,i,r,n,s,o=this._currentTransform,a=this._groupSelector,c=!1,a=!a||0===a.left&&0===a.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),h(t,3))this.fireRightClick&&this._handleEvent(t,"up",3,a);else{if(h(t,2))return this.fireMiddleClick&&this._handleEvent(t,"up",2,a),void this._resetTransformEventData();this.isDrawingMode&&this._isCurrentlyDrawing?this._onMouseUpInDrawingMode(t):this._isMainEvent(t)&&(o&&(this._finalizeCurrentTransform(t),c=o.actionPerformed),a||(r=e===this._activeObject,this._maybeGroupObjects(t),c=c||this._shouldRender(e)||!r&&e===this._activeObject),e&&(n=e._findTargetCorner(this.getPointer(t,!0),fabric.util.isTouchEvent(t)),e.selectable&&e!==this._activeObject&&"up"===e.activeOn?(this.setActiveObject(e,t),c=!0):(r=(i=e.controls[n])&&i.getMouseUpHandler(t,e,i))&&r(t,o,(s=this.getPointer(t)).x,s.y),e.isMoving=!1),!o||o.target===e&&o.corner===n||(n=(r=o.target&&o.target.controls[o.corner])&&r.getMouseUpHandler(t,e,i),s=s||this.getPointer(t),n&&n(t,o,s.x,s.y)),this._setCursorFromEvent(t,e),this._handleEvent(t,"up",1,a),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),c?this.requestRenderAll():a||this.renderTop())}},_simpleEventHandler:function(t,e){var i=this.findTarget(e),r=this.targets,n={e:e,target:i,subTargets:r};if(this.fire(t,n),i&&i.fire(t,n),!r)return i;for(var s=0;s<r.length;s++)r[s].fire(t,n);return i},_handleEvent:function(t,e,i,r){var n=this._target,s=this.targets||[],o={e:t,target:n,subTargets:s,button:i||1,isClick:r||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===e&&(o.currentTarget=this.findTarget(t),o.currentSubTargets=this.targets),this.fire("mouse:"+e,o),n&&n.fire("mouse"+e,o);for(var a=0;a<s.length;a++)s[a].fire("mouse"+e,o)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,i=e.target,t={e:t,target:i,transform:e,action:e.action};i._scaling&&(i._scaling=!1),i.setCoords(),(e.actionPerformed||this.stateful&&i.hasStateChanged())&&this._fire("modified",t)},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){var e;this._isCurrentlyDrawing&&(e=this.getPointer(t),this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})),this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e,i,r,n,s,o=this._target;h(t,3)?this.fireRightClick&&this._handleEvent(t,"down",3):h(t,2)?this.fireMiddleClick&&this._handleEvent(t,"down",2):this.isDrawingMode?this._onMouseDownInDrawingMode(t):this._isMainEvent(t)&&!this._currentTransform&&(n=this._pointer,this._previousPointer=n,e=this._shouldRender(o),i=this._shouldGroup(t,o),this._shouldClearSelection(t,o)?this.discardActiveObject(t):i&&(this._handleGrouping(t,o),o=this._activeObject),!this.selection||o&&(o.selectable||o.isEditing||o===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),o&&(r=o===this._activeObject,o.selectable&&"down"===o.activeOn&&this.setActiveObject(o,t),s=o._findTargetCorner(this.getPointer(t,!0),fabric.util.isTouchEvent(t)),o.__corner=s,o!==this._activeObject||!s&&i||(this._setupCurrentTransform(t,o,r),r=o.controls[s],n=this.getPointer(t),(s=r&&r.getMouseDownHandler(t,o,r))&&s(t,this._currentTransform,n.x,n.y))),this._handleEvent(t,"down"),(e||i)&&this.requestRenderAll())},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e})},__onMouseMove:function(t){var e,i;this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode?this._onMouseMoveInDrawingMode(t):this._isMainEvent(t)&&((i=this._groupSelector)?(e=this._absolutePointer,i.left=e.x-i.ex,i.top=e.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData())},_fireOverOutEvents:function(t,e){var i=this._hoveredTarget,r=this._hoveredTargets,n=this.targets,s=Math.max(r.length,n.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var o=0;o<s;o++)this.fireSyntheticInOutEvents(n[o],e,{oldTarget:r[o],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var i=this._draggedoverTarget,r=this._hoveredTargets,n=this.targets,s=Math.max(r.length,n.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"dragleave",evtIn:"dragenter"});for(var o=0;o<s;o++)this.fireSyntheticInOutEvents(n[o],e,{oldTarget:r[o],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,i){var r,n,s=i.oldTarget,o=s!==t,a=i.canvasEvtIn,c=i.canvasEvtOut;o&&(r={e:e,target:t,previousTarget:s},n={e:e,target:s,nextTarget:t}),e=t&&o,s&&o&&(c&&this.fire(c,n),s.fire(i.evtOut,n)),e&&(a&&this.fire(a,r),t.fire(i.evtIn,r))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._performTransformAction(t,i,e),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,i){var r=i.x,i=i.y,n=e.action,s=!1,o=e.actionHandler;o&&(s=o(t,e,r,i)),"drag"===n&&s&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||s},_fire:fabric.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,r=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!r||!r.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this.setCursor(this.getCornerCursor(r,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map(function(t){i=t.hoverCursor||i}),this.setCursor(i))},getCornerCursor:function(t,e,i){t=e.controls[t];return t.cursorStyleHandler(i,t,e)}})}(),function(){var f=Math.min,d=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var i=this._activeObject;return i&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(i!==e||"activeSelection"===i.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var i=this._activeObject;i.__corner||(e!==i||(e=this.findTarget(t,!0))&&e.selectable)&&(i&&"activeSelection"===i.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var i=this._activeObject,r=i._objects.slice(0);i.contains(t)?(i.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),1===i.size()&&this._setActiveObject(i.item(0),e)):(i.addWithUpdate(t),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(r,e)},_createActiveSelection:function(t,e){var i=this.getActiveObjects(),t=this._createGroup(t);this._hoveredTarget=t,this._setActiveObject(t,e),this._fireSelectionEvents(i,e)},_createGroup:function(t){var e=this._objects,e=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.ActiveSelection(e,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects(t);1===e.length?this.setActiveObject(e[0],t):1<e.length&&(e=new fabric.ActiveSelection(e.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(e){for(var t,i=[],r=this._groupSelector.ex,n=this._groupSelector.ey,s=r+this._groupSelector.left,o=n+this._groupSelector.top,a=new fabric.Point(f(r,s),f(n,o)),c=new fabric.Point(d(r,s),d(n,o)),h=!this.selectionFullyContained,l=r===s&&n===o,u=this._objects.length;u--&&!((t=this._objects[u])&&t.selectable&&t.visible&&(h&&t.intersectsWithRect(a,c,!0)||t.isContainedWithinRect(a,c,!0)||h&&t.containsPoint(a,null,!0)||h&&t.containsPoint(c,null,!0))&&(i.push(t),l)););return i=1<i.length?i.filter(function(t){return!t.onSelect({e:e})}):i},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){var e=(t=t||{}).format||"png",i=t.quality||1,r=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(r,t);return fabric.util.toDataURL(r,e,i)},toCanvasElement:function(t,e){var i=((e=e||{}).width||this.width)*(t=t||1),r=(e.height||this.height)*t,n=this.getZoom(),s=this.width,o=this.height,n=n*t,a=this.viewportTransform,c=(a[4]-(e.left||0))*t,e=(a[5]-(e.top||0))*t,t=this.interactive,n=[n,0,0,n,c,e],c=this.enableRetinaScaling,e=fabric.util.createCanvasElement(),h=this.contextTop;return e.width=i,e.height=r,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=n,this.width=i,this.height=r,this.calcViewportBoundaries(),this.renderCanvas(e.getContext("2d"),this._objects),this.viewportTransform=a,this.width=s,this.height=o,this.calcViewportBoundaries(),this.interactive=t,this.enableRetinaScaling=c,this.contextTop=h,e}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromJSON:function(t,i,e){var r,n,s,o;if(t)return r="string"==typeof t?JSON.parse(t):fabric.util.object.clone(t),n=this,s=r.clipPath,o=this.renderOnAddRemove,this.renderOnAddRemove=!1,delete r.clipPath,this._enlivenObjects(r.objects,function(e){n.clear(),n._setBgOverlay(r,function(){s?n._enlivenObjects([s],function(t){n.clipPath=t[0],n.__setupCanvas.call(n,r,e,o,i)}):n.__setupCanvas.call(n,r,e,o,i)})},e),this},__setupCanvas:function(t,e,i,r){var n=this;e.forEach(function(t,e){n.insertAt(t,e)}),this.renderOnAddRemove=i,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),r&&r()},_setBgOverlay:function(t,e){var i,r={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};t.backgroundImage||t.overlayImage||t.background||t.overlay?(this.__setBgOverlay("backgroundImage",t.backgroundImage,r,i=function(){r.backgroundImage&&r.overlayImage&&r.backgroundColor&&r.overlayColor&&e&&e()}),this.__setBgOverlay("overlayImage",t.overlayImage,r,i),this.__setBgOverlay("backgroundColor",t.background,r,i),this.__setBgOverlay("overlayColor",t.overlay,r,i)):e&&e()},__setBgOverlay:function(e,t,i,r){var n=this;if(!t)return i[e]=!0,void(r&&r());"backgroundImage"===e||"overlayImage"===e?fabric.util.enlivenObjects([t],function(t){n[e]=t[0],i[e]=!0,r&&r()}):this["set"+fabric.util.string.capitalize(e,!0)](t,function(){i[e]=!0,r&&r()})},_enlivenObjects:function(t,e,i){t&&0!==t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},null,i):e&&e([])},_toDataURL:function(e,i){this.clone(function(t){i(t.toDataURL(e))})},_toDataURLWithMultiplier:function(e,i,r){this.clone(function(t){r(t.toDataURLWithMultiplier(e,i))})},clone:function(e,t){var i=JSON.stringify(this.toJSON(t));this.cloneWithoutData(function(t){t.loadFromJSON(i,function(){e&&e(t)})})},cloneWithoutData:function(t){var e=fabric.util.createCanvasElement(),i=(e.width=this.width,e.height=this.height,new fabric.Canvas(e));this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var g=t.fabric||(t.fabric={}),t=g.util.object.extend,s=g.util.object.clone,i=g.util.toFixed,e=g.util.string.capitalize,o=g.util.degreesToRadians,r=!g.isLikelyNode;g.Object||(g.Object=g.util.createClass(g.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:r,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=g.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var e=g.perfLimitSizeTotal,i=t.width,r=t.height,n=g.maxCacheSideLimit,s=g.minCacheSideLimit;if(i<=n&&r<=n&&i*r<=e)return i<s&&(t.width=s),r<s&&(t.height=s),t;var e=g.util.limitDimsByArea(i/r,e),o=g.util.capValue,a=o(s,e.x,n),o=o(s,e.y,n);return a<i&&(t.zoomX/=i/a,t.width=a,t.capped=!0),o<r&&(t.zoomY/=r/o,t.height=o,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),i=e.x*t.scaleX/this.scaleX,e=e.y*t.scaleY/this.scaleY;return{width:2+i,height:2+e,zoomX:t.scaleX,zoomY:t.scaleY,x:i,y:e}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var e=t._currentTransform.target,t=t._currentTransform.action;if(this===e&&t.slice&&"scale"===t.slice(0,5))return!1}var i,r,e=this._cacheCanvas,t=this._limitCacheSize(this._getCacheCanvasDimensions()),n=g.minCacheSideLimit,s=t.width,o=t.height,a=t.zoomX,c=t.zoomY,h=s!==this.cacheWidth||o!==this.cacheHeight,l=this.zoomX!==a||this.zoomY!==c,l=h||l,u=0,f=0,d=!1;return h&&(h=this._cacheCanvas.width,i=this._cacheCanvas.height,d=(r=h<s||i<o)||(s<.9*h||o<.9*i)&&n<h&&n<i,r&&!t.capped&&(n<s||n<o)&&(u=.1*s,f=.1*o)),this instanceof g.Text&&this.path&&(d=l=!0,u+=this.getHeightOfLine(0)*this.zoomX,f+=this.getHeightOfLine(0)*this.zoomY),!!l&&(d?(e.width=Math.ceil(s+u),e.height=Math.ceil(o+f)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,e.width,e.height)),h=t.x/2,i=t.y/2,this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-i)+i,this.cacheWidth=s,this.cacheHeight=o,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(a,c),this.zoomX=a,this.zoomY=c,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t){var e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,e=this.calcTransformMatrix(!e);t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},toObject:function(t){var e=g.Object.NUM_FRACTION_DIGITS,e={type:this.type,version:g.version,originX:this.originX,originY:this.originY,left:i(this.left,e),top:i(this.top,e),width:i(this.width,e),height:i(this.height,e),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,e),strokeDashArray:this.strokeDashArray&&this.strokeDashArray.concat(),strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:i(this.strokeMiterLimit,e),scaleX:i(this.scaleX,e),scaleY:i(this.scaleY,e),angle:i(this.angle,e),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:i(this.skewX,e),skewY:i(this.skewY,e)};return this.clipPath&&!this.clipPath.excludeFromExport&&(e.clipPath=this.clipPath.toObject(t),e.clipPath.inverted=this.clipPath.inverted,e.clipPath.absolutePositioned=this.clipPath.absolutePositioned),g.util.populateWithProperties(this,e,t),e=this.includeDefaultValues?e:this._removeDefaultValues(e)},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(e){var i=g.util.getKlass(e.type).prototype;return i.stateProperties.forEach(function(t){"left"!==t&&"top"!==t&&(e[t]===i[t]&&delete e[t],Array.isArray(e[t])&&Array.isArray(i[t])&&0===e[t].length&&0===i[t].length&&delete e[t])}),e},toString:function(){return"#<fabric."+e(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var t=g.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},getTotalObjectScaling:function(){var t,e,i=this.getObjectScaling(),r=i.scaleX,i=i.scaleY;return this.canvas&&(r*=(t=this.canvas.getZoom())*(e=this.canvas.getRetinaScaling()),i*=t*e),{scaleX:r,scaleY:i}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,e){var i=this[t]!==e;return("scaleX"===t||"scaleY"===t)&&(e=this._constrainScale(e)),"scaleX"===t&&e<0?(this.flipX=!this.flipX,e*=-1):"scaleY"===t&&e<0?(this.flipY=!this.flipY,e*=-1):"shadow"!==t||!e||e instanceof g.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",e):e=new g.Shadow(e),this[t]=e,i&&(e=this.group&&this.group.isOnACache(),-1<this.cacheProperties.indexOf(t)?(this.dirty=!0,e&&this.group.set("dirty",!0)):e&&-1<this.stateProperties.indexOf(t)&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:g.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t,e){var i;t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",e.absolutePositioned&&(i=g.util.invertTransform(this.calcTransformMatrix()),t.transform(i[0],i[1],i[2],i[3],i[4],i[5])),e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()},drawObject:function(t,e){var i=this.fill,r=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=i,this.stroke=r},_drawClipPath:function(t,e){e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){return!this.isNotVisible()&&(!(!this._cacheCanvas||!this._cacheContext||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties"))&&(this._cacheCanvas&&this._cacheContext&&!t&&(t=this.cacheWidth/this.zoomX,e=this.cacheHeight/this.zoomY,this._cacheContext.clearRect(-t/2,-e/2,t,e)),!0));var e},_renderBackground:function(t){var e;this.backgroundColor&&(e=this._getNonTransformedDimensions(),t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t))},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){var i=e.stroke;i&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):t.strokeStyle=e.stroke)},_setFillStyles:function(t,e){var i=e.fill;i&&(i.toLive?(t.fillStyle=i.toLive(t,this),this._applyPatternGradientTransform(t,e.fill)):t.fillStyle=i)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"},_setLineDash:function(t,e){e&&0!==e.length&&(1&e.length&&e.push.apply(e,e),t.setLineDash(e))},_renderControls:function(t,e){var i=this.getViewportTransform(),r=this.calcTransformMatrix(),n=(void 0!==(e=e||{}).hasBorders?e:this).hasBorders,s=(void 0!==e.hasControls?e:this).hasControls,r=g.util.multiplyTransformMatrices(i,r),i=g.util.qrDecompose(r);t.save(),t.translate(i.translateX,i.translateY),t.lineWidth=+this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(i.angle-=180),t.rotate(o((this.group?i:this).angle)),e.forActiveSelection||this.group?n&&this.drawBordersInGroup(t,i,e):n&&this.drawBorders(t,e),s&&this.drawControls(t,e),t.restore()},_setShadow:function(t){var e,i,r,n,s;this.shadow&&(e=this.shadow,r=(i=this.canvas)&&i.viewportTransform[0]||1,n=i&&i.viewportTransform[3]||1,s=e.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),i&&i._isRetinaScaling()&&(r*=g.devicePixelRatio,n*=g.devicePixelRatio),t.shadowColor=e.color,t.shadowBlur=e.blur*g.browserShadowBlurConstant*(r+n)*(s.scaleX+s.scaleY)/4,t.shadowOffsetX=e.offsetX*r*s.scaleX,t.shadowOffsetY=e.offsetY*n*s.scaleY)},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var i=e.gradientTransform||e.patternTransform,r=-this.width/2+e.offsetX||0,n=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,r,n):t.transform(1,0,0,1,r,n),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:r,offsetY:n}},_renderPaintInOrder:function(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._setFillStyles(t,this),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){var e;this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&this.group?(e=this.getObjectScaling(),t.scale(1/e.scaleX,1/e.scaleY)):this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY),this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore())},_applyPatternForTransformedGradient:function(t,e){var i,r=this._limitCacheSize(this._getCacheCanvasDimensions()),n=g.util.createCanvasElement(),s=this.canvas.getRetinaScaling(),o=r.x/this.scaleX/s,a=r.y/this.scaleY/s;n.width=o,n.height=a,(i=n.getContext("2d")).beginPath(),i.moveTo(0,0),i.lineTo(o,0),i.lineTo(o,a),i.lineTo(0,a),i.closePath(),i.translate(o/2,a/2),i.scale(r.zoomX/this.scaleX/s,r.zoomY/this.scaleY/s),this._applyPatternGradientTransform(i,e),i.fillStyle=e.toLive(t),i.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(s*this.scaleX/r.zoomX,s*this.scaleY/r.zoomY),t.strokeStyle=i.createPattern(n,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){var t;this.transformMatrix&&(t=g.util.qrDecompose(this.transformMatrix),this.flipX=!1,this.flipY=!1,this.set("scaleX",t.scaleX),this.set("scaleY",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0)},_removeTransformMatrix:function(t){var e=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),e=g.util.transformPoint(e,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,e.x+=t.offsetLeft,e.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(e,"center","center")},clone:function(t,e){e=this.toObject(e);this.constructor.fromObject?this.constructor.fromObject(e,t):g.Object._fromObject("Object",e,t)},cloneAsImage:function(t,e){e=this.toCanvasElement(e);return t&&t(new g.Image(e)),this},toCanvasElement:function(t){t=t||{};var e,i=g.util,r=i.saveObjectTransform(this),n=this.group,s=this.shadow,o=Math.abs,a=(t.multiplier||1)*(t.enableRetinaScaling?g.devicePixelRatio:1),i=(delete this.group,t.withoutTransform&&i.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null),g.util.createCanvasElement()),c=this.getBoundingRect(!0,!0),h=this.shadow,l={x:0,y:0},o=(h&&(e=h.blur,u=h.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),l.x=2*Math.round(o(h.offsetX)+e)*o(u.scaleX),l.y=2*Math.round(o(h.offsetY)+e)*o(u.scaleY)),h=c.width+l.x,e=c.height+l.y,i.width=Math.ceil(h),i.height=Math.ceil(e),new g.StaticCanvas(i,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1})),u=("jpeg"===t.format&&(o.backgroundColor="#fff"),this.setPositionByOrigin(new g.Point(o.width/2,o.height/2),"center","center"),this.canvas),c=(o.add(this),o.toCanvasElement(a||1,t));return this.shadow=s,this.set("canvas",u),n&&(this.group=n),this.set(r).setCoords(),o._objects=[],o.dispose(),o=null,c},toDataURL:function(t){return g.util.toDataURL(this.toCanvasElement(t=t||{}),t.format||"png",t.quality||1)},isType:function(t){return 1<arguments.length?Array.from(arguments).includes(this.type):this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},rotate:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,e){e=e||this.canvas.getPointer(t);t=new g.Point(e.x,e.y),e=this._getLeftTopCoords();return{x:(t=this.angle?g.util.rotatePoint(t,e,o(-this.angle)):t).x-e.x,y:t.y-e.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){g.runningAnimations&&g.runningAnimations.cancelByTarget(this)}}),g.util.createAccessors&&g.util.createAccessors(g.Object),t(g.Object.prototype,g.Observable),g.Object.NUM_FRACTION_DIGITS=2,g.Object.ENLIVEN_PROPS=["clipPath"],g.Object._fromObject=function(t,e,i,r){var n=g[t];e=s(e,!0),g.util.enlivenPatterns([e.fill,e.stroke],function(t){void 0!==t[0]&&(e.fill=t[0]),void 0!==t[1]&&(e.stroke=t[1]),g.util.enlivenObjectEnlivables(e,e,function(){var t=r?new n(e[r],e):new n(e);i&&i(t)})})},g.Object.__uid=0)}("undefined"!=typeof exports?exports:this),function(){var s=fabric.util.degreesToRadians,a={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(t,e,i,r,n){var s=t.x,o=t.y;return"string"==typeof e?e=a[e]:e-=.5,"string"==typeof r?r=a[r]:r-=.5,"string"==typeof i?i=c[i]:i-=.5,"string"==typeof n?n=c[n]:n-=.5,n=n-i,((i=r-e)||n)&&(r=this._getTransformedDimensions(),s=t.x+i*r.x,o=t.y+n*r.y),new fabric.Point(s,o)},translateToCenterPoint:function(t,e,i){e=this.translateToGivenOrigin(t,e,i,"center","center");return this.angle?fabric.util.rotatePoint(e,t,s(this.angle)):e},translateToOriginPoint:function(t,e,i){e=this.translateToGivenOrigin(t,"center","center",e,i);return this.angle?fabric.util.rotatePoint(e,t,s(this.angle)):e},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(t,e,i){var r=this.getCenterPoint(),e=void 0!==e&&void 0!==i?this.translateToGivenOrigin(r,"center","center",e,i):new fabric.Point(this.left,this.top),i=new fabric.Point(t.x,t.y);return(i=this.angle?fabric.util.rotatePoint(i,r,-s(this.angle)):i).subtractEquals(e)},setPositionByOrigin:function(t,e,i){t=this.translateToCenterPoint(t,e,i),e=this.translateToOriginPoint(t,this.originX,this.originY);this.set("left",e.x),this.set("top",e.y)},adjustPosition:function(t){var e=s(this.angle),i=this.getScaledWidth(),r=fabric.util.cos(e)*i,e=fabric.util.sin(e)*i,i="string"==typeof this.originX?a[this.originX]:this.originX-.5,n="string"==typeof t?a[t]:t-.5;this.left+=r*(n-i),this.top+=e*(n-i),this.setCoords(),this.originX=t},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var s=fabric.util,o=s.degreesToRadians,a=s.multiplyTransformMatrices,c=s.transformPoint;s.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(t,e){return t=this._getCoords(t,e),[new fabric.Point(t.tl.x,t.tl.y),new fabric.Point(t.tr.x,t.tr.y),new fabric.Point(t.br.x,t.br.y),new fabric.Point(t.bl.x,t.bl.y)]},intersectsWithRect:function(t,e,i,r){i=this.getCoords(i,r);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(i,t,e).status},intersectsWithObject:function(t,e,i){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var r=this.getCoords(e,i),i=e?t.aCoords:t.lineCoords,n=0,s=t._getImageLines(i);n<4;n++)if(!t.containsPoint(r[n],s))return!1;return!0},isContainedWithinRect:function(t,e,i,r){i=this.getBoundingRect(i,r);return i.left>=t.x&&i.left+i.width<=e.x&&i.top>=t.y&&i.top+i.height<=e.y},containsPoint:function(t,e,i,r){i=this._getCoords(i,r),e=e||this._getImageLines(i),r=this._findCrossPoints(t,e);return 0!==r&&r%2==1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.getCoords(!0,t).some(function(t){return t.x<=i.x&&t.x>=e.x&&t.y<=i.y&&t.y>=e.y})||(!!this.intersectsWithRect(e,i,!0,t)||this._containsCenterOfCanvas(e,i,t))},_containsCenterOfCanvas:function(t,e,i){t={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(t,null,!0,i)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,i,!0,t)||this.getCoords(!0,t).every(function(t){return(t.x>=i.x||t.x<=e.x)&&(t.y>=i.y||t.y<=e.y)})&&this._containsCenterOfCanvas(e,i,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,r,n,s=0;for(n in e)if(!((r=e[n]).o.y<t.y&&r.d.y<t.y||r.o.y>=t.y&&r.d.y>=t.y||((r.o.x===r.d.x&&r.o.x>=t.x?r.o.x:(i=(r.d.y-r.o.y)/(r.d.x-r.o.x),-(t.y-0*t.x-(r.o.y-i*r.o.x))/(0-i)))>=t.x&&(s+=1),2!==s)))break;return s},getBoundingRect:function(t,e){t=this.getCoords(t,e);return s.makeBoundingBoxFromPoints(t)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){e=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t,e){e=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/e)},calcLineCoords:function(){var t=this.getViewportTransform(),e=this.padding,i=o(this.angle),r=s.cos(i)*e,i=s.sin(i)*e,n=r+i,r=r-i,i=this.calcACoords(),i={tl:c(i.tl,t),tr:c(i.tr,t),bl:c(i.bl,t),br:c(i.br,t)};return e&&(i.tl.x-=r,i.tl.y-=n,i.tr.x+=n,i.tr.y-=r,i.bl.x-=n,i.bl.y+=r,i.br.x+=r,i.br.y+=n),i},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=this.getViewportTransform(),e=a(i,e),r=a(e,t),r=a(r,[1/i[0],0,0,1/i[3],0,0]),n=this._calculateCurrentDimensions(),s={};return this.forEachControl(function(t,e,i){s[e]=t.positionHandler(n,r,i)}),s},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),e=a(e,t),t=this._getTransformedDimensions(),i=t.x/2,t=t.y/2;return{tl:c({x:-i,y:-t},e),tr:c({x:i,y:-t},e),bl:c({x:-i,y:t},e),br:c({x:i,y:t},e)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",i="";return(i=!t&&this.group?this.group.transformMatrixKey(t)+e:i)+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var t=this.transformMatrixKey(t),i=this.matrixCache||(this.matrixCache={});return i.key===t?i.value:(this.group&&(e=a(this.group.calcTransformMatrix(!1),e)),i.key=t,i.value=e)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),e=this.ownMatrixCache||(this.ownMatrixCache={});if(e.key===t)return e.value;var i=this._calcTranslateMatrix(),i={angle:this.angle,translateX:i[4],translateY:i[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return e.key=t,e.value=s.composeMatrix(i),e.value},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var i,r=0===t&&0===e,n=this.strokeUniform?(i=this.width,this.height):(i=(n=this._getNonTransformedDimensions()).x,n.y);if(r)return this._finalizeDimensions(i*this.scaleX,n*this.scaleY);r=s.sizeAfterTransform(i,n,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:e});return this._finalizeDimensions(r.x,r.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return c(e,t,!0).scalarAdd(2*this.padding)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas&&this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas&&this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&"activeSelection"!==this.group.type?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas&&this.canvas.moveTo(this,t),this}}),function(){function u(t,e){var i;return e?e.toLive?t+": url(#SVGID_"+e.id+"); ":(i=t+": "+(e=new fabric.Color(e)).toRgb()+"; ",1!==(e=e.getAlpha())&&(i+=t+"-opacity: "+e.toString()+"; "),i):t+": none; "}var i=fabric.util.toFixed;fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(t){var e=this.fillRule||"nonzero",i=this.strokeWidth||"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",n=this.strokeDashOffset||"0",s=this.strokeLineCap||"butt",o=this.strokeLineJoin||"miter",a=this.strokeMiterLimit||"4",c=void 0!==this.opacity?this.opacity:"1",h=this.visible?"":" visibility: hidden;",t=t?"":this.getSvgFilter(),l=u("fill",this.fill);return[u("stroke",this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",n,"; ","stroke-linejoin: ",o,"; ","stroke-miterlimit: ",a,"; ",l,"fill-rule: ",e,"; ","opacity: ",c,";",t,h].join("")},getSvgSpanStyles:function(t,e){var i="; ",r=t.fontFamily?"font-family: "+(-1===t.fontFamily.indexOf("'")&&-1===t.fontFamily.indexOf('"')?"'"+t.fontFamily+"'":t.fontFamily)+i:"",n=t.strokeWidth?"stroke-width: "+t.strokeWidth+i:"",s=t.fontSize?"font-size: "+t.fontSize+"px"+i:"",o=t.fontStyle?"font-style: "+t.fontStyle+i:"",a=t.fontWeight?"font-weight: "+t.fontWeight+i:"",c=t.fill?u("fill",t.fill):"",h=t.stroke?u("stroke",t.stroke):"",l=this.getSvgTextDecoration(t);return[h,n,r,s,o,a,l=l&&"text-decoration: "+l+i,c,t.deltaY?"baseline-shift: "+-t.deltaY+"; ":"",e?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(e){return["overline","underline","line-through"].filter(function(t){return e[t.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(t,e){t=t?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+fabric.util.matrixToSVG(t)+(e||"")+'" '},_setSVGBg:function(t){var e;this.backgroundColor&&(e=fabric.Object.NUM_FRACTION_DIGITS,t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,e),'" y="',i(-this.height/2,e),'" width="',i(this.width,e),'" height="',i(this.height,e),'"></rect>\n'))},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){var i=(e=e||{}).reviver,e=e.additionalTransform||"",e=[this.getSvgTransform(!0,e),this.getSvgCommons()].join(""),r=t.indexOf("COMMON_PARTS");return t[r]=e,i?i(t.join("")):t.join("")},_createBaseSVGMarkup:function(t,e){var i,r=(e=e||{}).noStyle,n=e.reviver,s=r?"":'style="'+this.getSvgStyles()+'" ',o=e.withShadow?'style="'+this.getSvgFilter()+'" ':"",a=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=a&&a.absolutePositioned,l=this.stroke,u=this.fill,f=this.shadow,d=[],g=t.indexOf("COMMON_PARTS"),e=e.additionalTransform;return a&&(a.clipPathId="CLIPPATH_"+fabric.Object.__uid++,i='<clipPath id="'+a.clipPathId+'" >\n'+a.toClipPathSVG(n)+"</clipPath>\n"),h&&d.push("<g ",o,this.getSvgCommons()," >\n"),d.push("<g ",this.getSvgTransform(!1),h?"":o+this.getSvgCommons()," >\n"),o=[s,c,r?"":this.addPaintOrder()," ",e?'transform="'+e+'" ':""].join(""),t[g]=o,u&&u.toLive&&d.push(u.toSVG(this)),l&&l.toLive&&d.push(l.toSVG(this)),f&&d.push(f.toSVG(this)),a&&d.push(i),d.push(t.join("")),d.push("</g>\n"),h&&d.push("</g>\n"),n?n(d.join("")):d.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var n=fabric.util.object.extend,r="stateProperties";function s(e,t,i){var r={};i.forEach(function(t){r[t]=e[t]}),n(e[t],r,!0)}fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(t){var e="_"+(t=t||r);return Object.keys(this[e]).length<this[t].length||!function t(e,i,r){if(e===i)return 1;if(Array.isArray(e)){if(Array.isArray(i)&&e.length===i.length){for(var n=0,s=e.length;n<s;n++)if(!t(e[n],i[n]))return;return 1}}else if(e&&"object"==typeof e){var o,a=Object.keys(e);if(i&&"object"==typeof i&&(r||a.length===Object.keys(i).length)){for(n=0,s=a.length;n<s;n++)if("canvas"!==(o=a[n])&&"group"!==o&&!t(e[o],i[o]))return;return 1}}}(this[e],this,!0)},saveState:function(t){var e=t&&t.propertySet||r,i="_"+e;return this[i]?(s(this,i,this[e]),t&&t.stateProperties&&s(this,i,t.stateProperties),this):this.setupState(t)},setupState:function(t){var e=(t=t||{}).propertySet||r;return this["_"+(t.propertySet=e)]={},this.saveState(t),this}})}(),function(){var n=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_findTargetCorner:function(t,e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var i,r,n=t.x,s=t.y,o=Object.keys(this.oCoords),a=o.length-1;for(this.__corner=0;0<=a;a--)if(r=o[a],this.isControlVisible(r)&&(i=this._getImageLines(e?this.oCoords[r].touchCorner:this.oCoords[r].corner),0!==(i=this._findCrossPoints({x:n,y:s},i))&&i%2==1))return this.__corner=r;return!1},forEachControl:function(t){for(var e in this.controls)t(this.controls[e],e,this)},_setCornerCoords:function(){var t,e=this.oCoords;for(t in e){var i=this.controls[t];e[t].corner=i.calcCornerCoords(this.angle,this.cornerSize,e[t].x,e[t].y,!1),e[t].touchCorner=i.calcCornerCoords(this.angle,this.touchCornerSize,e[t].x,e[t].y,!0)}},drawSelectionBackground:function(t){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;t.save();var e=this.getCenterPoint(),i=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return t.translate(e.x,e.y),t.scale(1/r[0],1/r[3]),t.rotate(n(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore(),this},drawBorders:function(r,t){t=t||{};var e=this._calculateCurrentDimensions(),i=this.borderScaleFactor,n=e.x+i,s=e.y+i,e=(void 0!==t.hasControls?t:this).hasControls,o=!1;return r.save(),r.strokeStyle=t.borderColor||this.borderColor,this._setLineDash(r,t.borderDashArray||this.borderDashArray),r.strokeRect(-n/2,-s/2,n,s),e&&(r.beginPath(),this.forEachControl(function(t,e,i){t.withConnection&&t.getVisibility(i,e)&&(o=!0,r.moveTo(t.x*n,t.y*s),r.lineTo(t.x*n+t.offsetX,t.y*s+t.offsetY))}),o&&r.stroke()),r.restore(),this},drawBordersInGroup:function(t,e,i){i=i||{};var r=fabric.util.sizeAfterTransform(this.width,this.height,e),n=this.strokeWidth,s=this.strokeUniform,o=this.borderScaleFactor,a=r.x+n*(s?this.canvas.getZoom():e.scaleX)+o,r=r.y+n*(s?this.canvas.getZoom():e.scaleY)+o;return t.save(),this._setLineDash(t,i.borderDashArray||this.borderDashArray),t.strokeStyle=i.borderColor||this.borderColor,t.strokeRect(-a/2,-r/2,a,r),t.restore(),this},drawControls:function(r,n){n=n||{},r.save();var s,o,t=this.canvas.getRetinaScaling();return r.setTransform(t,0,0,t,0,0),r.strokeStyle=r.fillStyle=n.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=n.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,n.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(s=this.group.calcTransformMatrix()),this.forEachControl(function(t,e,i){o=i.oCoords[e],t.getVisibility(i,e)&&(s&&(o=fabric.util.transformPoint(o,s)),t.render(r,o.x,o.y,n,i))}),r.restore(),this},isControlVisible:function(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)},setControlVisible:function(t,e){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e,this},setControlsVisibility:function(t){for(var e in t=t||{})this.setControlVisible(e,t[e]);return this},onDeselect:function(){},onSelect:function(){}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){function i(){}var r=(t=t||{}).onComplete||i,n=t.onChange||i,s=this;return fabric.util.animate({target:this,startValue:e.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),s.requestRenderAll(),n()},onComplete:function(){e.setCoords(),r()}})},fxCenterObjectV:function(e,t){function i(){}var r=(t=t||{}).onComplete||i,n=t.onChange||i,s=this;return fabric.util.animate({target:this,startValue:e.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),s.requestRenderAll(),n()},onComplete:function(){e.setCoords(),r()}})},fxRemove:function(e,t){function i(){}var r=(t=t||{}).onComplete||i,n=t.onChange||i,s=this;return fabric.util.animate({target:this,startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){e.set("opacity",t),s.requestRenderAll(),n()},onComplete:function(){s.remove(e),r()}})}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[],r=[];for(t in arguments[0])i.push(t);for(var n=0,s=i.length;n<s;n++)t=i[n],e=n!==s-1,r.push(this._animate(t,arguments[0][t],arguments[1],e));return r}return this._animate.apply(this,arguments)},_animate:function(r,t,n,s){var o,a=this,e=(t=t.toString(),n=n?fabric.util.object.clone(n):{},~r.indexOf(".")&&(o=r.split(".")),-1<a.colorProperties.indexOf(r)||o&&-1<a.colorProperties.indexOf(o[1])),i=o?this.get(o[0])[o[1]]:this.get(r),i=("from"in n||(n.from=i),e||(t=~t.indexOf("=")?i+parseFloat(t.replace("=","")):parseFloat(t)),{target:this,startValue:n.from,endValue:t,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(t,e,i){return n.abort.call(a,t,e,i)},onChange:function(t,e,i){o?a[o[0]][o[1]]=t:a.set(r,t),s||n.onChange&&n.onChange(t,e,i)},onComplete:function(t,e,i){s||(a.setCoords(),n.onComplete&&n.onComplete(t,e,i))}});return e?fabric.util.animateColor(i.startValue,i.endValue,i.duration,i):fabric.util.animate(i)}}),function(t){"use strict";var n=t.fabric||(t.fabric={}),s=n.util.object.extend,r=n.util.object.clone,i={x1:1,x2:1,y1:1,y2:1};function e(t,e){var i=t.origin,r=t.axis1,n=t.axis2,s=t.dimension,o=e.nearest,a=e.center,c=e.farthest;return function(){switch(this.get(i)){case o:return Math.min(this.get(r),this.get(n));case a:return Math.min(this.get(r),this.get(n))+.5*this.get(s);case c:return Math.max(this.get(r),this.get(n))}}}n.Line?n.warn("fabric.Line is already defined"):(n.Line=n.util.createClass(n.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:n.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t=t||[0,0,0,0],this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t=t||{},this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),void 0!==i[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){t.beginPath();var e=this.calcLinePoints(),e=(t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth,t.strokeStyle);t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=e},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return s(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,r=e*this.height*.5;return{x1:i,x2:t*this.width*-.5,y1:r,y2:e*this.height*-.5}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,'" />\n']}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),n.Line.fromElement=function(t,e,i){i=i||{};var t=n.parseAttributes(t,n.Line.ATTRIBUTE_NAMES),r=[t.x1||0,t.y1||0,t.x2||0,t.y2||0];e(new n.Line(r,s(t,i)))},n.Line.fromObject=function(t,e){var i=r(t,!0);i.points=[t.x1,t.y1,t.x2,t.y2],n.Object._fromObject("Line",i,function(t){delete t.points,e&&e(t)},"points")})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var n=t.fabric||(t.fabric={}),s=n.util.degreesToRadians;n.Circle?n.warn("fabric.Circle is already defined."):(n.Circle=n.util.createClass(n.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:n.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,e,i,r=(this.endAngle-this.startAngle)%360;return 0==r?["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n']:(t=s(this.startAngle),e=s(this.endAngle),i=this.radius,['<path d="M '+n.util.cos(t)*i+" "+n.util.sin(t)*i," A "+i+" "+i," 0 ",+(180<r?"1":"0")+" 1"," "+n.util.cos(e)*i+" "+n.util.sin(e)*i,'" ',"COMMON_PARTS"," />\n"])},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,s(this.startAngle),s(this.endAngle),!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),n.Circle.fromElement=function(t,e){var i,t=n.parseAttributes(t,n.Circle.ATTRIBUTE_NAMES);if(!("radius"in(i=t)&&0<=i.radius))throw new Error("value of `r` attribute is required and can not be negative");t.left=(t.left||0)-t.radius,t.top=(t.top||0)-t.radius,e(new n.Circle(t))},n.Circle.fromObject=function(t,e){n.Object._fromObject("Circle",t,e)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var i=t.fabric||(t.fabric={});i.Triangle?i.warn("fabric.Triangle is already defined"):(i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)},_toSVG:function(){var t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-t+" "+e,"0 "+-e,t+" "+e].join(","),'" />']}}),i.Triangle.fromObject=function(t,e){return i.Object._fromObject("Triangle",t,e)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var i=t.fabric||(t.fabric={}),e=2*Math.PI;i.Ellipse?i.warn("fabric.Ellipse is already defined."):(i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,e,!1),t.restore(),this._renderPaintInOrder(t)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(t,e){t=i.parseAttributes(t,i.Ellipse.ATTRIBUTE_NAMES);t.left=(t.left||0)-t.rx,t.top=(t.top||0)-t.ry,e(new i.Ellipse(t))},i.Ellipse.fromObject=function(t,e){i.Object._fromObject("Ellipse",t,e)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var r=t.fabric||(t.fabric={}),n=r.util.object.extend;r.Rect?r.warn("fabric.Rect is already defined"):(r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,n=this.height,s=-this.width/2,o=-this.height/2,a=0!==e||0!==i,c=.4477152502;t.beginPath(),t.moveTo(s+e,o),t.lineTo(s+r-e,o),a&&t.bezierCurveTo(s+r-c*e,o,s+r,o+c*i,s+r,o+i),t.lineTo(s+r,o+n-i),a&&t.bezierCurveTo(s+r,o+n-c*i,s+r-c*e,o+n,s+r-e,o+n),t.lineTo(s+e,o+n),a&&t.bezierCurveTo(s+c*e,o+n,s,o+n-c*i,s,o+n-i),t.lineTo(s,o+i),a&&t.bezierCurveTo(s,o+c*i,s+c*e,o,s+e,o),t.closePath(),this._renderPaintInOrder(t)},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),r.Rect.fromElement=function(t,e,i){if(!t)return e(null);i=i||{};t=r.parseAttributes(t,r.Rect.ATTRIBUTE_NAMES),t.left=t.left||0,t.top=t.top||0,t.height=t.height||0,t.width=t.width||0,i=new r.Rect(n(i?r.util.object.clone(i):{},t));i.visible=i.visible&&0<i.width&&0<i.height,e(i)},r.Rect.fromObject=function(t,e){return r.Object._fromObject("Rect",t,e)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var o=t.fabric||(t.fabric={}),s=o.util.object.extend,r=o.util.array.min,n=o.util.array.max,a=o.util.toFixed,e=o.util.projectStrokeOnPoints;o.Polyline?o.warn("fabric.Polyline is already defined"):(o.Polyline=o.util.createClass(o.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:o.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._setPositionDimensions(e)},_projectStrokeOnPoints:function(){return e(this.points,this,!0)},_setPositionDimensions:function(t){var e,i=this._calcDimensions(t),r=this.exactBoundingBox?this.strokeWidth:0;this.width=i.width-r,this.height=i.height-r,t.fromSVG||(e=this.translateToGivenOrigin({x:i.left-this.strokeWidth/2+r/2,y:i.top-this.strokeWidth/2+r/2},"left","top",this.originX,this.originY)),void 0===t.left&&(this.left=t.fromSVG?i.left:e.x),void 0===t.top&&(this.top=t.fromSVG?i.top:e.y),this.pathOffset={x:i.left+this.width/2+r/2,y:i.top+this.height/2+r/2}},_calcDimensions:function(){var t=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,e=r(t,"x")||0,i=r(t,"y")||0;return{left:e,top:i,width:(n(t,"x")||0)-e,height:(n(t,"y")||0)-i}},toObject:function(t){return s(this.callSuper("toObject",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],e=this.pathOffset.x,i=this.pathOffset.y,r=o.Object.NUM_FRACTION_DIGITS,n=0,s=this.points.length;n<s;n++)t.push(a(this.points[n].x-e,r),",",a(this.points[n].y-i,r)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',t.join(""),'" />\n']},commonRender:function(t){var e,i=this.points.length,r=this.pathOffset.x,n=this.pathOffset.y;if(!i||isNaN(this.points[i-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-r,this.points[0].y-n);for(var s=0;s<i;s++)e=this.points[s],t.lineTo(e.x-r,e.y-n);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},complexity:function(){return this.get("points").length}}),o.Polyline.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polyline.fromElementGenerator=function(n){return function(t,e,i){if(!t)return e(null);i=i||{};var r=o.parsePointsAttribute(t.getAttribute("points")),t=o.parseAttributes(t,o[n].ATTRIBUTE_NAMES);t.fromSVG=!0,e(new o[n](r,s(t,i)))}},o.Polyline.fromElement=o.Polyline.fromElementGenerator("Polyline"),o.Polyline.fromObject=function(t,e){return o.Object._fromObject("Polyline",t,e,"points")})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var i=t.fabric||(t.fabric={}),e=i.util.projectStrokeOnPoints;i.Polygon?i.warn("fabric.Polygon is already defined"):(i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return e(this.points,this)},_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(t,e){i.Object._fromObject("Polygon",t,e,"points")})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var f=t.fabric||(t.fabric={}),d=f.util.array.min,g=f.util.array.max,r=f.util.object.extend,i=f.util.object.clone,e=f.util.toFixed;f.Path?f.warn("fabric.Path is already defined"):(f.Path=f.util.createClass(f.Object,{type:"path",path:null,cacheProperties:f.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:f.Object.prototype.stateProperties.concat("path"),initialize:function(t,e){delete(e=i(e||{})).path,this.callSuper("initialize",e),this._setPath(t||[],e)},_setPath:function(t,e){this.path=f.util.makePathSimpler(Array.isArray(t)?t:f.util.parsePath(t)),f.Polyline.prototype._setPositionDimensions.call(this,e||{})},_renderPathCommands:function(t){var e,i=0,r=0,n=0,s=0,o=0,a=0,c=-this.pathOffset.x,h=-this.pathOffset.y;t.beginPath();for(var l=0,u=this.path.length;l<u;++l)switch((e=this.path[l])[0]){case"L":n=e[1],s=e[2],t.lineTo(n+c,s+h);break;case"M":i=n=e[1],r=s=e[2],t.moveTo(n+c,s+h);break;case"C":n=e[5],s=e[6],o=e[3],a=e[4],t.bezierCurveTo(e[1]+c,e[2]+h,o+c,a+h,n+c,s+h);break;case"Q":t.quadraticCurveTo(e[1]+c,e[2]+h,e[3]+c,e[4]+h),n=e[3],s=e[4],o=e[1],a=e[2];break;case"z":case"Z":n=i,s=r,t.closePath()}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return r(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()})})},toDatalessObject:function(t){t=this.toObject(["sourcePath"].concat(t));return t.sourcePath&&delete t.path,t},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',f.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var t=f.Object.NUM_FRACTION_DIGITS;return" translate("+e(-this.pathOffset.x,t)+", "+e(-this.pathOffset.y,t)+")"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var t,e,i=[],r=[],n=0,s=0,o=0,a=0,c=0,h=this.path.length;c<h;++c){switch((t=this.path[c])[0]){case"L":o=t[1],a=t[2],e=[];break;case"M":n=o=t[1],s=a=t[2],e=[];break;case"C":e=f.util.getBoundsOfCurve(o,a,t[1],t[2],t[3],t[4],t[5],t[6]),o=t[5],a=t[6];break;case"Q":e=f.util.getBoundsOfCurve(o,a,t[1],t[2],t[1],t[2],t[3],t[4]),o=t[3],a=t[4];break;case"z":case"Z":o=n,a=s}e.forEach(function(t){i.push(t.x),r.push(t.y)}),i.push(o),r.push(a)}var l=d(i)||0,u=d(r)||0;return{left:l,top:u,width:(g(i)||0)-l,height:(g(r)||0)-u}}}),f.Path.fromObject=function(i,r){var t;"string"==typeof i.sourcePath?(t=i.sourcePath,f.loadSVGFromURL(t,function(t){var e=t[0];e.setOptions(i),i.clipPath?f.util.enlivenObjects([i.clipPath],function(t){e.clipPath=t[0],r&&r(e)}):r&&r(e)})):f.Object._fromObject("Path",i,r,"path")},f.Path.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(["d"]),f.Path.fromElement=function(t,e,i){t=f.parseAttributes(t,f.Path.ATTRIBUTE_NAMES);t.fromSVG=!0,e(new f.Path(t.d,r(t,i)))})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var o=t.fabric||(t.fabric={}),a=o.util.array.min,c=o.util.array.max;o.Group||(o.Group=o.util.createClass(o.Object,o.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;i?this._updateObjectsACoords():(t=e&&e.centerPoint,void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),t||this._calcBounds(),this._updateObjectsCoords(t),delete e.centerPoint,this.callSuper("initialize",e)),this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0)},_updateObjectsCoords:function(t){for(var t=t||this.getCenterPoint(),e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var i=t.left,r=t.top;t.set({left:i-e.x,top:r-e.y}),t.group=this,t.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var e=!!this.group;return this._restoreObjectsState(),o.util.resetObjectTransform(this),t&&(e&&o.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,e?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),o.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,e){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,e);if("canvas"===t)for(;i--;)this._objects[i]._set(t,e);o.Object.prototype._set.call(this,t,e)},toObject:function(r){var n=this.includeDefaultValues,t=this._objects.filter(function(t){return!t.excludeFromExport}).map(function(t){var e=t.includeDefaultValues,i=(t.includeDefaultValues=n,t.toObject(r));return t.includeDefaultValues=e,i}),e=o.Object.prototype.toObject.call(this,r);return e.objects=t,e},toDatalessObject:function(r){var n,t=this.sourcePath,e=(t=t||(n=this.includeDefaultValues,this._objects.map(function(t){var e=t.includeDefaultValues,i=(t.includeDefaultValues=n,t.toDatalessObject(r));return t.includeDefaultValues=e,i})),o.Object.prototype.toDatalessObject.call(this,r));return e.objects=t,e},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=o.Object.prototype.shouldCache.call(this);if(t)for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1;return t},willDrawShadow:function(){if(o.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].render(t);this._drawClipPath(t,this.clipPath)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e,i,r=0,n=this._objects.length;r<n;r++)if(this._objects[r].isCacheDirty(!0))return this._cacheCanvas&&(e=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY,this._cacheContext.clearRect(-e/2,-i/2,e,i)),!0;return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach(function(t){o.util.addTransformToObject(t,e),delete t.group,t.setCoords()}),this},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[]},toActiveSelection:function(){var t,e,i,r;if(this.canvas)return t=this._objects,e=this.canvas,this._objects=[],i=this.toObject(),delete i.objects,r=new o.ActiveSelection([]),r.set(i),r.type="activeSelection",e.remove(this),t.forEach(function(t){t.group=r,t.dirty=!0,e.add(t)}),r.canvas=e,r._objects=t,(e._activeObject=r).setCoords(),r},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0)}),this},_calcBounds:function(t){for(var e,i,r,n,s=[],o=[],a=["tr","br","bl","tl"],c=0,h=this._objects.length,l=a.length;c<h;++c){for(r=(e=this._objects[c]).calcACoords(),n=0;n<l;n++)s.push(r[i=a[n]].x),o.push(r[i].y);e.aCoords=r}this._getBounds(s,o,t)},_getBounds:function(t,e,i){var r=new o.Point(a(t),a(e)),t=new o.Point(c(t),c(e)),e=r.y||0,n=r.x||0,s=t.x-r.x||0,t=t.y-r.y||0;this.width=s,this.height=t,i||this.setPositionByOrigin({x:n,y:e},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],i=0,r=this._objects.length;i<r;i++)e.push("\t\t",this._objects[i].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var t=void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],i=0,r=this._objects.length;i<r;i++)e.push("\t",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),o.Group.fromObject=function(i,r){var n=i.objects,s=o.util.object.clone(i,!0);delete s.objects,"string"==typeof n?o.loadSVGFromURL(n,function(t){var e=o.util.groupSVGElements(t,i,n),t=s.clipPath;delete s.clipPath,e.set(s),t?o.util.enlivenObjects([t],function(t){e.clipPath=t[0],r&&r(e)}):r&&r(e)}):o.util.enlivenObjects(n,function(t){o.util.enlivenObjectEnlivables(i,s,function(){r&&r(new o.Group(t,s,!0))})})})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var r=t.fabric||(t.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:"activeSelection",initialize:function(t,e){e=e||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,e),this.setCoords()},toGroup:function(){var t=this._objects.concat(),e=(this._objects=[],r.Object.prototype.toObject.call(this)),i=new r.Group([]);if(delete e.type,i.set(e),t.forEach(function(t){t.canvas.remove(t),t.group=i}),i._objects=t,!this.canvas)return i;e=this.canvas;return e.add(i),(e._activeObject=i).setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),void 0===(i=i||{}).hasControls&&(i.hasControls=!1),i.forActiveSelection=!0;for(var r=0,n=this._objects.length;r<n;r++)this._objects[r]._renderControls(t,i);t.restore()}}),r.ActiveSelection.fromObject=function(e,i){r.util.enlivenObjects(e.objects,function(t){delete e.objects,i&&i(new r.ActiveSelection(t,e,!0))})})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var r=fabric.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:fabric.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:fabric.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(t,e){e=e||{},this.filters=[],this.cacheKey="texture"+fabric.Object.__uid++,this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=fabric.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(t){fabric.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){var e,i;this.stroke&&0!==this.strokeWidth&&(e=this.width/2,i=this.height/2,t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath())},toObject:function(t){var e=[],t=(this.filters.forEach(function(t){t&&e.push(t.toObject())}),r(this.callSuper("toObject",["cropX","cropY"].concat(t)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e}));return this.resizeFilter&&(t.resizeFilter=this.resizeFilter.toObject()),t},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e,i=[],r=[],n=this._element,s=-this.width/2,o=-this.height/2,a="",c="";return n?(this.hasCrop()&&(e=fabric.Object.__uid++,i.push('<clipPath id="imageCrop_'+e+'">\n','\t<rect x="'+s+'" y="'+o+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),a=' clip-path="url(#imageCrop_'+e+')" '),this.imageSmoothing||(c='" image-rendering="optimizeSpeed'),r.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',s-this.cropX,'" y="',o-this.cropY,'" width="',n.width||n.naturalWidth,'" height="',n.height||n.height,c,'"',a,"></image>\n"),(this.stroke||this.strokeDashArray)&&(e=this.fill,this.fill=null,t=["\t<rect ",'x="',s,'" y="',o,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=e),"fill"!==this.paintFirst?i.concat(t,r):i.concat(r,t)):[]},getSrc:function(t){t=t?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src"):t.src:this.src||""},setSrc:function(t,i,r){return fabric.util.loadImage(t,function(t,e){this.setElement(t,r),this._setWidthHeight(),i&&i(this,e)},this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),r=i.scaleX,i=i.scaleY,n=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||e<r&&e<i)return this._element=n,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=i);fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend());var e=fabric.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,o=n.width,a=n.height;e.width=o,e.height=a,this._element=e,this._lastScaleX=t.scaleX=r,this._lastScaleY=t.scaleY=i,fabric.filterBackend.applyFilters([t],n,o,a,this._element,s),this._filterScalingX=e.width/this._originalElement.width,this._filterScalingY=e.height/this._originalElement.height},applyFilters:function(t){if(t=(t=t||this.filters||[]).filter(function(t){return t&&!t.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e,i=this._originalElement,r=i.naturalWidth||i.width,i=i.naturalHeight||i.height;return this._element===this._originalElement?((e=fabric.util.createCanvasElement()).width=r,e.height=i,this._element=e,this._filteredEl=e):(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,i),this._lastScaleX=1,this._lastScaleY=1),fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend()),fabric.filterBackend.applyFilters(t,this._originalElement,r,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){fabric.util.setImageSmoothing(t,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},drawCacheOnCanvas:function(t){fabric.util.setImageSmoothing(t,this.imageSmoothing),fabric.Object.prototype.drawCacheOnCanvas.call(this,t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e,i,r,n,s,o,a,c,h,l,u,f,d,g,p,m=this._element;m&&(e=this._filterScalingX,i=this._filterScalingY,g=this.width,r=this.height,n=Math.min,s=(o=Math.max)(this.cropX,0),o=o(this.cropY,0),p=m.naturalWidth||m.width,a=m.naturalHeight||m.height,h=o*i,l=n(g*e,p-(c=s*e)),u=n(r*i,a-h),f=-g/2,d=-r/2,g=n(g,p/e-s),p=n(r,a/i-o),m&&t.drawImage(m,c,h,l,u,f,d,g,p))},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(fabric.util.getById(t),e),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){this.setOptions(t=t||{}),this._setWidthHeight(t)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){t=t||{};var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),i=this._element.width,r=this._element.height,n=1,s=1,o=0,a=0,c=0,h=0,l=this.width,u=this.height,f={width:l,height:u};return!e||"none"===e.alignX&&"none"===e.alignY?(n=l/i,s=u/r):("meet"===e.meetOrSlice&&(t=(l-i*(n=s=fabric.util.findScaleToFit(this._element,f)))/2,"Min"===e.alignX&&(o=-t),"Max"===e.alignX&&(o=t),t=(u-r*s)/2,"Min"===e.alignY&&(a=-t),"Max"===e.alignY&&(a=t)),"slice"===e.meetOrSlice&&(t=i-l/(n=s=fabric.util.findScaleToCover(this._element,f)),"Mid"===e.alignX&&(c=t/2),"Max"===e.alignX&&(c=t),t=r-u/s,"Mid"===e.alignY&&(h=t/2),"Max"===e.alignY&&(h=t),i=l/n,r=u/s)),{width:i,height:r,scaleX:n,scaleY:s,offsetLeft:o,offsetTop:a,cropX:c,cropY:h}}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,i){var r=fabric.util.object.clone(t);fabric.util.loadImage(r.src,function(e,t){t?i&&i(null,!0):fabric.Image.prototype._initFilters.call(r,r.filters,function(t){r.filters=t||[],fabric.Image.prototype._initFilters.call(r,[r.resizeFilter],function(t){r.resizeFilter=t[0],fabric.util.enlivenObjectEnlivables(r,r,function(){var t=new fabric.Image(e,r);i(t,!1)})})})},null,r.crossOrigin)},fabric.Image.fromURL=function(t,i,r){fabric.util.loadImage(t,function(t,e){i&&i(new fabric.Image(t,r),e)},null,r&&r.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),fabric.Image.fromElement=function(t,e,i){t=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(t["xlink:href"],e,r(i?fabric.util.object.clone(i):{},t))})}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return 0<t?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(t){function e(){}var i=(t=t||{}).onComplete||e,r=t.onChange||e,n=this;return fabric.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){n.rotate(t),r()},onComplete:function(){n.setCoords(),i()}})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function t(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}fabric.isWebglSupported=function(t){if(fabric.isLikelyNode)return!1;t=t||fabric.WebglFilterBackend.prototype.tileSize;var e,i,r,n=document.createElement("canvas"),s=n.getContext("webgl")||n.getContext("experimental-webgl"),n=!1;if(s){fabric.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE);for(var n=fabric.maxTextureSize>=t,o=["highp","mediump","lowp"],a=0;a<3;a++)if(r=void 0,i="precision "+(i=o[a])+" float;\nvoid main(){}",r=(e=s).createShader(e.FRAGMENT_SHADER),e.shaderSource(r,i),e.compileShader(r),!!e.getShaderParameter(r,e.COMPILE_STATUS)){fabric.webGlPrecision=o[a];break}}return this.isSupported=n},(fabric.WebglFilterBackend=t).prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var i=void 0!==window.performance;try{new ImageData(1,1),s=!0}catch(t){s=!1}var r="undefined"!=typeof ArrayBuffer,n="undefined"!=typeof Uint8ClampedArray;if(i&&s&&r&&n){var i=fabric.util.createCanvasElement(),s=new ArrayBuffer(t*e*4);if(fabric.forceGLPutImageData)return this.imageBuffer=s,void(this.copyGLTo2D=copyGLTo2DPutImageData);r={imageBuffer:s,destinationWidth:t,destinationHeight:e,targetCanvas:i};i.width=t,i.height=e,n=window.performance.now(),copyGLTo2DDrawImage.call(r,this.gl,r),t=window.performance.now()-n,n=window.performance.now(),copyGLTo2DPutImageData.call(r,this.gl,r),window.performance.now()-n<t?(this.imageBuffer=s,this.copyGLTo2D=copyGLTo2DPutImageData):this.copyGLTo2D=copyGLTo2DDrawImage}},createWebGLCanvas:function(t,e){var i=fabric.util.createCanvasElement(),t=(i.width=t,i.height=e,{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1}),e=i.getContext("webgl",t);(e=e||i.getContext("experimental-webgl",t))&&(e.clearColor(0,0,0,0),this.canvas=i,this.gl=e)},applyFilters:function(t,e,i,r,n,s){var o,a=this.gl,c=(s&&(o=this.getCachedTexture(s,e)),{originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:i,sourceHeight:r,destinationWidth:i,destinationHeight:r,context:a,sourceTexture:this.createTexture(a,i,r,!o&&e),targetTexture:this.createTexture(a,i,r),originalTexture:o||this.createTexture(a,i,r,!o&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n}),s=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,s),t.forEach(function(t){t&&t.applyTo(c)}),resizeCanvasIfNeeded(c),this.copyGLTo2D(a,c),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(c.sourceTexture),a.deleteTexture(c.targetTexture),a.deleteFramebuffer(s),n.getContext("2d").setTransform(1,0,0,1,0,0),c},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,i,r,n){var s=t.createTexture();return t.bindTexture(t.TEXTURE_2D,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),s},getCachedTexture:function(t,e){return this.textureCache[t]||(e=this.createTexture(this.gl,e.width,e.height,e),this.textureCache[t]=e)},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:copyGLTo2DDrawImage,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:"",vendor:""};if(!t)return e;var i,r=t.getExtension("WEBGL_debug_renderer_info");return r&&(i=t.getParameter(r.UNMASKED_RENDERER_WEBGL),t=t.getParameter(r.UNMASKED_VENDOR_WEBGL),i&&(e.renderer=i.toLowerCase()),t&&(e.vendor=t.toLowerCase())),this.gpuInfo=e}}}(),function(){"use strict";function t(){}function e(){}(fabric.Canvas2dFilterBackend=e).prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,i,r,n){var s=n.getContext("2d");s.drawImage(e,0,0,i,r);var o={sourceWidth:i,sourceHeight:r,imageData:s.getImageData(0,0,i,r),originalEl:e,originalImageData:s.getImageData(0,0,i,r),canvasEl:n,ctx:s,filterBackend:this};return t.forEach(function(t){t.applyTo(o)}),o.imageData.width===i&&o.imageData.height===r||(n.width=o.imageData.width,n.height=o.imageData.height),s.putImageData(o.imageData,0,0),o}}}(),fabric.Image=fabric.Image||{},fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,i){e=e||this.fragmentSource,i=i||this.vertexSource,"highp"!==fabric.webGlPrecision&&(e=e.replace(/precision highp float/g,"precision "+fabric.webGlPrecision+" float"));var r=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+t.getShaderInfoLog(r));i=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+t.getShaderInfoLog(i));e=t.createProgram();if(t.attachShader(e,r),t.attachShader(e,i),t.linkProgram(e),!t.getProgramParameter(e,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(e));r=this.getAttributeLocations(t,e),i=this.getUniformLocations(t,e)||{};return i.uStepW=t.getUniformLocation(e,"uStepW"),i.uStepH=t.getUniformLocation(e,"uStepH"),{program:e,attributeLocations:r,uniformLocations:i}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,i){var e=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,i,r=t.context;1<t.passes?(e=t.destinationWidth,i=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===i||(r.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(r,e,i)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=fabric.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var i=e[t].length;i--;)if(this[t][i]!==e[t][i])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,i=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){var e;t.helpLayer||((e=document.createElement("canvas")).width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e)},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(t,e){t=new fabric.Image.filters[t.type](t);return e&&e(t),t},function(t){"use strict";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.ColorMatrix=i(e.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){for(var e,i,r,n,s=t.imageData.data,o=s.length,a=this.matrix,c=this.colorsOnly,h=0;h<o;h+=4)e=s[h],i=s[h+1],r=s[h+2],c?(s[h]=e*a[0]+i*a[1]+r*a[2]+255*a[4],s[h+1]=e*a[5]+i*a[6]+r*a[7]+255*a[9],s[h+2]=e*a[10]+i*a[11]+r*a[12]+255*a[14]):(n=s[h+3],s[h]=e*a[0]+i*a[1]+r*a[2]+n*a[3]+255*a[4],s[h+1]=e*a[5]+i*a[6]+r*a[7]+n*a[8]+255*a[9],s[h+2]=e*a[10]+i*a[11]+r*a[12]+n*a[13]+255*a[14],s[h+3]=e*a[15]+i*a[16]+r*a[17]+n*a[18]+255*a[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var i=this.matrix,r=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],i=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,r),t.uniform4fv(e.uConstants,i)}}),t.Image.filters.ColorMatrix.fromObject=t.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Brightness=i(e.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness)for(var e=t.imageData.data,i=e.length,r=Math.round(255*this.brightness),n=0;n<i;n+=4)e[n]=e[n]+r,e[n+1]=e[n+1]+r,e[n+2]=e[n+2]+r},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),t.Image.filters.Brightness.fromObject=t.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var t=t.fabric||(t.fabric={}),e=t.util.object.extend,i=t.Image.filters,r=t.util.createClass;i.Convolute=r(i.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),e=this.type+"_"+e+"_"+(this.opaque?1:0),i=this.fragmentSource[e];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyTo2d:function(t){for(var e,i,r,n,s,o,a,c,h,l,u,f=t.imageData,d=f.data,g=this.matrix,p=Math.round(Math.sqrt(g.length)),m=Math.floor(p/2),v=f.width,b=f.height,f=t.ctx.createImageData(v,b),y=f.data,_=this.opaque?1:0,x=0;x<b;x++)for(h=0;h<v;h++){for(s=4*(x*v+h),u=n=r=i=e=0;u<p;u++)for(l=0;l<p;l++)o=h+l-m,(a=x+u-m)<0||b<=a||o<0||v<=o||(c=g[u*p+l],e+=d[a=4*(a*v+o)]*c,i+=d[1+a]*c,r+=d[2+a]*c,_||(n+=d[3+a]*c));y[s]=e,y[1+s]=i,y[2+s]=r,y[3+s]=_?d[3+s]:n}t.imageData=f},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return e(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),t.Image.filters.Convolute.fromObject=t.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Grayscale=i(e.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){for(var e,i=t.imageData.data,r=i.length,n=this.mode,s=0;s<r;s+=4)"average"===n?e=(i[s]+i[s+1]+i[s+2])/3:"lightness"===n?e=(Math.min(i[s],i[s+1],i[s+2])+Math.max(i[s],i[s+1],i[s+2]))/2:"luminosity"===n&&(e=.21*i[s]+.72*i[s+1]+.07*i[s+2]),i[s]=e,i[s+1]=e,i[s+2]=e},retrieveShader:function(t){var e,i=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.fragmentSource[this.mode],t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),t.Image.filters.Grayscale.fromObject=t.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Invert=i(e.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){for(var e=t.imageData.data,i=e.length,r=0;r<i;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),t.Image.filters.Invert.fromObject=t.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var t=t.fabric||(t.fabric={}),e=t.util.object.extend,i=t.Image.filters,r=t.util.createClass;i.Noise=r(i.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise)for(var e,i=t.imageData.data,r=(i.length,this.noise),n=0,s=i.length;n<s;n+=4)e=(.5-Math.random())*r,i[n]+=e,i[n+1]+=e,i[n+2]+=e},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return e(this.callSuper("toObject"),{noise:this.noise})}}),t.Image.filters.Noise.fromObject=t.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Pixelate=i(e.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){for(var e,i,r,n,s,o,a,c,h,l,t=t.imageData,u=t.data,f=t.height,d=t.width,g=0;g<f;g+=this.blocksize)for(i=0;i<d;i+=this.blocksize)for(r=u[e=4*g*d+4*i],n=u[1+e],s=u[2+e],o=u[3+e],h=Math.min(g+this.blocksize,f),l=Math.min(i+this.blocksize,d),a=g;a<h;a++)for(c=i;c<l;c++)u[e=4*a*d+4*c]=r,u[1+e]=n,u[2+e]=s,u[3+e]=o},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),t.Image.filters.Pixelate.fromObject=t.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var h=t.fabric||(t.fabric={}),e=h.util.object.extend,t=h.Image.filters,i=h.util.createClass;t.RemoveColor=i(t.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){for(var e,i,r,n=t.imageData.data,t=255*this.distance,s=new h.Color(this.color).getSource(),o=[s[0]-t,s[1]-t,s[2]-t],a=[s[0]+t,s[1]+t,s[2]+t],c=0;c<n.length;c+=4)e=n[c],i=n[c+1],r=n[c+2],o[0]<e&&o[1]<i&&o[2]<r&&e<a[0]&&i<a[1]&&r<a[2]&&(n[c+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}},sendUniformData:function(t,e){var i=new h.Color(this.color).getSource(),r=parseFloat(this.distance),n=[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1],i=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];t.uniform4fv(e.uLow,n),t.uniform4fv(e.uHigh,i)},toObject:function(){return e(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),h.Image.filters.RemoveColor.fromObject=h.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e,i=t.fabric||(t.fabric={}),r=i.Image.filters,n=i.util.createClass,s={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(e in s)r[e]=n(r.ColorMatrix,{type:e,matrix:s[e],mainParameter:!1,colorsOnly:!0}),i.Image.filters[e].fromObject=i.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var u=t.fabric,t=u.Image.filters,e=u.util.createClass;t.BlendColor=e(t.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,i=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.buildSource(this.mode),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},applyTo2d:function(t){for(var e,i,r,n=t.imageData.data,s=n.length,o=1-this.alpha,t=new u.Color(this.color).getSource(),a=t[0]*this.alpha,c=t[1]*this.alpha,h=t[2]*this.alpha,l=0;l<s;l+=4)switch(e=n[l],i=n[l+1],r=n[l+2],this.mode){case"multiply":n[l]=e*a/255,n[l+1]=i*c/255,n[l+2]=r*h/255;break;case"screen":n[l]=255-(255-e)*(255-a)/255,n[l+1]=255-(255-i)*(255-c)/255,n[l+2]=255-(255-r)*(255-h)/255;break;case"add":n[l]=e+a,n[l+1]=i+c,n[l+2]=r+h;break;case"diff":case"difference":n[l]=Math.abs(e-a),n[l+1]=Math.abs(i-c),n[l+2]=Math.abs(r-h);break;case"subtract":n[l]=e-a,n[l+1]=i-c,n[l+2]=r-h;break;case"darken":n[l]=Math.min(e,a),n[l+1]=Math.min(i,c),n[l+2]=Math.min(r,h);break;case"lighten":n[l]=Math.max(e,a),n[l+1]=Math.max(i,c),n[l+2]=Math.max(r,h);break;case"overlay":n[l]=a<128?2*e*a/255:255-2*(255-e)*(255-a)/255,n[l+1]=c<128?2*i*c/255:255-2*(255-i)*(255-c)/255,n[l+2]=h<128?2*r*h/255:255-2*(255-r)*(255-h)/255;break;case"exclusion":n[l]=a+e-2*a*e/255,n[l+1]=c+i-2*c*i/255,n[l+2]=h+r-2*h*r/255;break;case"tint":n[l]=a+e*o,n[l+1]=c+i*o,n[l+2]=h+r*o}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,e){var i=new u.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),u.Image.filters.BlendColor.fromObject=u.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var v=t.fabric,t=v.Image.filters,e=v.util.createClass;t.BlendImage=e(t.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,i=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]},applyTo2d:function(t){var e,i,r,n,s,o,a,c,h,l=t.imageData,t=t.filterBackend.resources,u=l.data,f=u.length,d=l.width,l=l.height,g=this.image;t.blendImage||(t.blendImage=v.util.createCanvasElement()),h=(t=t.blendImage).getContext("2d"),t.width!==d||t.height!==l?(t.width=d,t.height=l):h.clearRect(0,0,d,l),h.setTransform(g.scaleX,0,0,g.scaleY,g.left,g.top),h.drawImage(g._element,0,0,d,l);for(var p=h.getImageData(0,0,d,l).data,m=0;m<f;m+=4)switch(s=u[m],o=u[m+1],a=u[m+2],c=u[m+3],e=p[m],i=p[m+1],r=p[m+2],n=p[m+3],this.mode){case"multiply":u[m]=s*e/255,u[m+1]=o*i/255,u[m+2]=a*r/255,u[m+3]=c*n/255;break;case"mask":u[m+3]=n}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),v.Image.filters.BlendImage.fromObject=function(i,r){v.Image.fromObject(i.image,function(t){var e=v.util.object.clone(i);e.image=t,r(new v.Image.filters.BlendImage(e))})}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var m=t.fabric||(t.fabric={}),j=Math.pow,A=Math.floor,D=Math.sqrt,M=Math.abs,o=Math.round,r=Math.sin,F=Math.ceil,t=m.Image.filters,e=m.util.createClass;t.Resize=e(t.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),i=this.type+"_"+e;return t.programCache.hasOwnProperty(i)||(e=this.generateShader(e),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,i=this.getFilterWindow(),r=new Array(i),n=1;n<=i;n++)r[n-1]=t(n*e);return r},generateShader:function(t){for(var e=new Array(t),i=this.fragmentSourceTOP,r=1;r<=t;r++)e[r-1]=r+".0 * uDelta";return i=(i=i+("uniform float uTaps["+t+"];\n")+"void main() {\n")+"  vec4 color = texture2D(uTexture, vTexCoord);\n"+"  float sum = 1.0;\n",e.forEach(function(t,e){i=(i+="  color += texture2D(uTexture, vTexCoord + "+t+") * uTaps["+e+"];\n")+"  color += texture2D(uTexture, vTexCoord - "+t+") * uTaps["+e+"];\n  sum += 2.0 * uTaps["+e+"];\n"}),i=i+"  gl_FragColor = color / sum;\n"+"}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(i){return function(t){if(i<=t||t<=-i)return 0;if(t<1.1920929e-7&&-1.1920929e-7<t)return 1;var e=(t*=Math.PI)/i;return r(t)/t*r(e)/e}},applyTo2d:function(t){var e,i=t.imageData,r=this.scaleX,n=this.scaleY,s=(this.rcpScaleX=1/r,this.rcpScaleY=1/n,i.width),i=i.height,r=o(s*r),n=o(i*n);"sliceHack"===this.resizeType?e=this.sliceByTwo(t,s,i,r,n):"hermite"===this.resizeType?e=this.hermiteFastResize(t,s,i,r,n):"bilinear"===this.resizeType?e=this.bilinearFiltering(t,s,i,r,n):"lanczos"===this.resizeType&&(e=this.lanczosResize(t,s,i,r,n)),t.imageData=e},sliceByTwo:function(t,e,i,r,n){var s,o,t=t.imageData,a=!1,c=!1,h=.5*e,l=.5*i,u=m.filterBackend.resources,f=0,d=0,g=e,p=0;for(u.sliceByTwo||(u.sliceByTwo=document.createElement("canvas")),((s=u.sliceByTwo).width<1.5*e||s.height<i)&&(s.width=1.5*e,s.height=i),(o=s.getContext("2d")).clearRect(0,0,1.5*e,i),o.putImageData(t,0,0),r=A(r),n=A(n);!a||!c;)i=l,r<A(.5*(e=h))?h=A(.5*h):(h=r,a=!0),n<A(.5*l)?l=A(.5*l):(l=n,c=!0),o.drawImage(s,f,d,e,i,g,p,h,l),f=g,d=p,p+=l;return o.getImageData(f,d,r,n)},lanczosResize:function(t,d,g,p,m){var v=t.imageData.data,b=t.ctx.createImageData(p,m),y=b.data,_=this.lanczosCreate(this.lanczosLobes),x=this.rcpScaleX,C=this.rcpScaleY,S=2/this.rcpScaleX,T=2/this.rcpScaleY,w=F(x*this.lanczosLobes/2),O=F(C*this.lanczosLobes/2),P={},k={},E={};return function t(e){var i,r,n,s,o,a,c,h,l,u;for(k.x=(e+.5)*x,E.x=A(k.x),i=0;i<m;i++){for(k.y=(i+.5)*C,E.y=A(k.y),h=c=a=o=s=0,r=E.x-w;r<=E.x+w;r++)if(!(r<0||d<=r)){l=A(1e3*M(r-k.x)),P[l]||(P[l]={});for(var f=E.y-O;f<=E.y+O;f++)f<0||g<=f||(u=A(1e3*M(f-k.y)),P[l][u]||(P[l][u]=_(D(j(l*S,2)+j(u*T,2))/1e3)),0<(u=P[l][u])&&(s+=u,o+=u*v[n=4*(f*d+r)],a+=u*v[n+1],c+=u*v[n+2],h+=u*v[n+3]))}y[n=4*(i*p+e)]=o/s,y[n+1]=a/s,y[n+2]=c/s,y[n+3]=h/s}return++e<p?t(e):b}(0)},bilinearFiltering:function(t,e,i,r,n){for(var s,o,a,c,h,l,u,f,d,g,p,m=0,v=this.rcpScaleX,b=this.rcpScaleY,y=4*(e-1),_=t.imageData.data,t=t.ctx.createImageData(r,n),x=t.data,C=0;C<n;C++)for(u=0;u<r;u++)for(f=v*u-(h=A(v*u)),d=b*C-(l=A(b*C)),p=4*(l*e+h),g=0;g<4;g++)s=_[p+g],o=_[4+p+g],a=_[p+y+g],c=_[p+y+4+g],x[m++]=s*(1-f)*(1-d)+o*f*(1-d)+a*d*(1-f)+c*f*d;return t},hermiteFastResize:function(t,e,i,r,n){for(var s=this.rcpScaleX,o=this.rcpScaleY,a=F(s/2),c=F(o/2),h=t.imageData.data,t=t.ctx.createImageData(r,n),l=t.data,u=0;u<n;u++)for(var f=0;f<r;f++){for(var d=4*(f+u*r),g=0,p=0,m=0,v=0,b=0,y=0,_=0,x=(u+.5)*o,C=A(u*o);C<(u+1)*o;C++)for(var S=M(x-(C+.5))/c,T=(f+.5)*s,w=S*S,O=A(f*s);O<(f+1)*s;O++){var P=M(T-(O+.5))/a,k=D(w+P*P);1<k&&k<-1||0<(g=2*k*k*k-3*k*k+1)&&(_+=g*h[3+(P=4*(O+C*e))],m+=g,v+=(g=h[3+P]<255?g*h[3+P]/250:g)*h[P],b+=g*h[1+P],y+=g*h[2+P],p+=g)}l[d]=v/p,l[1+d]=b/p,l[2+d]=y/p,l[3+d]=_/m}return t},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),m.Image.filters.Resize.fromObject=m.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Contrast=i(e.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast)for(var e=t.imageData.data,i=e.length,t=Math.floor(255*this.contrast),r=259*(t+255)/(255*(259-t)),n=0;n<i;n+=4)e[n]=r*(e[n]-128)+128,e[n+1]=r*(e[n+1]-128)+128,e[n+2]=r*(e[n+2]-128)+128},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),t.Image.filters.Contrast.fromObject=t.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Saturation=i(e.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation)for(var e,i=t.imageData.data,r=i.length,n=-this.saturation,s=0;s<r;s+=4)e=Math.max(i[s],i[s+1],i[s+2]),i[s]+=e!==i[s]?(e-i[s])*n:0,i[s+1]+=e!==i[s+1]?(e-i[s+1])*n:0,i[s+2]+=e!==i[s+2]?(e-i[s+2])*n:0},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),t.Image.filters.Saturation.fromObject=t.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Vibrance=i(e.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(0!==this.vibrance)for(var e,i,r=t.imageData.data,n=r.length,s=-this.vibrance,o=0;o<n;o+=4)e=Math.max(r[o],r[o+1],r[o+2]),i=(r[o]+r[o+1]+r[o+2])/3,i=2*Math.abs(e-i)/255*s,r[o]+=e!==r[o]?(e-r[o])*i:0,r[o+1]+=e!==r[o+1]?(e-r[o+1])*i:0,r[o+2]+=e!==r[o+2]?(e-r[o+2])*i:0},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),t.Image.filters.Vibrance.fromObject=t.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var d=t.fabric||(t.fabric={}),t=d.Image.filters,e=d.util.createClass;t.Blur=e(t.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var e,i,r,n,s,o,a=t.filterBackend.resources,c=t.imageData.width,h=t.imageData.height,l=(a.blurLayer1||(a.blurLayer1=d.util.createCanvasElement(),a.blurLayer2=d.util.createCanvasElement()),e=a.blurLayer1,i=a.blurLayer2,e.width===c&&e.height===h||(i.width=e.width=c,i.height=e.height=h),e.getContext("2d")),u=i.getContext("2d"),f=.06*this.blur*.5;for(l.putImageData(t.imageData,0,0),u.clearRect(0,0,c,h),o=-15;o<=15;o++)s=f*(n=o/15)*c+(r=(Math.random()-.5)/4),u.globalAlpha=1-Math.abs(n),u.drawImage(e,s,r),l.drawImage(i,0,0),u.globalAlpha=1,u.clearRect(0,0,i.width,i.height);for(o=-15;o<=15;o++)s=f*(n=o/15)*h+(r=(Math.random()-.5)/4),u.globalAlpha=1-Math.abs(n),u.drawImage(e,r,s),l.drawImage(i,0,0),u.globalAlpha=1,u.clearRect(0,0,i.width,i.height);t.ctx.drawImage(e,0,0);a=t.ctx.getImageData(0,0,e.width,e.height);return l.globalAlpha=1,l.clearRect(0,0,e.width,e.height),a},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var i=this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var t=1,e=[0,0];return this.horizontal?1<this.aspectRatio&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),t=t*this.blur*.12,this.horizontal?e[0]=t:e[1]=t,e}}),t.Blur.fromObject=d.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Gamma=i(e.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],e.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,i=t.imageData.data,t=this.gamma,r=i.length,n=1/t[0],s=1/t[1],o=1/t[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,r=256;e<r;e++)this.rVals[e]=255*Math.pow(e/255,n),this.gVals[e]=255*Math.pow(e/255,s),this.bVals[e]=255*Math.pow(e/255,o);for(e=0,r=i.length;e<r;e+=4)i[e]=this.rVals[i[e]],i[e+1]=this.gVals[i[e+1]],i[e+2]=this.bVals[i[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),t.Image.filters.Gamma.fromObject=t.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var i=t.fabric||(t.fabric={}),t=i.Image.filters,e=i.util.createClass;t.Composed=e(t.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach(function(t){t.applyTo(e)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(t,e){t=(t.subFilters||[]).map(function(t){return new i.Image.filters[t.type](t)}),t=new i.Image.filters.Composed({subFilters:t});return e&&e(t),t}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var r=t.fabric||(t.fabric={}),e=r.Image.filters,t=r.util.createClass;e.HueRotation=t(e.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,e=r.util.cos(t),t=r.util.sin(t),t=Math.sqrt(1/3)*t,i=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+i/3,this.matrix[1]=1/3*i-t,this.matrix[2]=1/3*i+t,this.matrix[5]=1/3*i+t,this.matrix[6]=e+1/3*i,this.matrix[7]=1/3*i-t,this.matrix[10]=1/3*i-t,this.matrix[11]=1/3*i+t,this.matrix[12]=e+1/3*i},isNeutralState:function(t){return this.calculateMatrix(),e.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),e.BaseFilter.prototype.applyTo.call(this,t)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e,x=t.fabric||(t.fabric={}),o=x.util.object.clone;x.Text?x.warn("fabric.Text is already defined"):(e="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" "),x.Text=x.util.createClass(x.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:x.Object.prototype.stateProperties.concat(e),cacheProperties:x.Object.prototype.cacheProperties.concat(e),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=x.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return x._measuringContext||(x._measuringContext=this.canvas&&this.canvas.contextCache||x.util.createCanvasElement().getContext("2d")),x._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,i,r,n,s=0,o=this._textLines.length;s<o;s++)if(("justify"===this.textAlign||s!==o-1&&!this.isEndOfWrapping(s))&&(e=0,i=this._textLines[s],(t=this.getLineWidth(s))<this.width&&(n=this.textLines[s].match(this._reSpacesAndTabs))))for(var a=n.length,c=(this.width-t)/a,h=0,l=i.length;h<=l;h++)r=this.__charBounds[s][h],this._reSpaceAndTab.test(i[h])?(r.width+=c,r.kernedWidth+=c,r.left+=e,e+=c):r.left+=e},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){if(t.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":t.textBaseline="middle";break;case"ascender":t.textBaseline="top";break;case"descender":t.textBaseline="bottom"}t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var r=this.getLineWidth(e);t<r&&(t=r)}return t},_renderTextLine:function(t,e,i,r,n,s){this._renderChars(t,e,i,r,n,s)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,i,r,n,s=t.fillStyle,o=this._getLeftOffset(),a=this._getTopOffset(),c=0,h=0,l=this.path,u=0,f=this._textLines.length;u<f;u++)if(e=this.getHeightOfLine(u),this.textBackgroundColor||this.styleHas("textBackgroundColor",u)){for(var d=this._textLines[u],g=this._getLineLeftOffset(u),h=0,c=0,p=this.getValueOfPropertyAt(u,0,"textBackgroundColor"),m=0,v=d.length;m<v;m++)i=this.__charBounds[u][m],r=this.getValueOfPropertyAt(u,m,"textBackgroundColor"),l?(t.save(),t.translate(i.renderLeft,i.renderTop),t.rotate(i.angle),(t.fillStyle=r)&&t.fillRect(-i.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),i.width,e/this.lineHeight),t.restore()):r!==p?(n=o+g+c,"rtl"===this.direction&&(n=this.width-n-h),(t.fillStyle=p)&&t.fillRect(n,a,h,e/this.lineHeight),c=i.left,h=i.width,p=r):h+=i.kernedWidth;r&&!l&&(n=o+g+c,"rtl"===this.direction&&(n=this.width-n-h),t.fillStyle=r,t.fillRect(n,a,h,e/this.lineHeight)),a+=e}else a+=e;t.fillStyle=s,this._removeShadow(t)}},getFontCache:function(t){var e=t.fontFamily.toLowerCase(),e=(x.charWidthsCache[e]||(x.charWidthsCache[e]={}),x.charWidthsCache[e]),t=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return e[t]||(e[t]={}),e[t]},_measureChar:function(t,e,i,r){var n,s,o,a,c,h=this.getFontCache(e),l=i+t,r=this._getFontDeclaration(e)===this._getFontDeclaration(r),u=e.fontSize/this.CACHE_FONT_SIZE;return i&&void 0!==h[i]&&(o=h[i]),void 0!==h[t]&&(a=n=h[t]),r&&void 0!==h[l]&&(a=(s=h[l])-o),void 0!==n&&void 0!==o&&void 0!==s||(c=this.getMeasuringContext(),this._setTextStyles(c,e,!0)),void 0===n&&(a=n=c.measureText(t).width,h[t]=n),void 0===o&&r&&i&&(o=c.measureText(i).width,h[i]=o),r&&void 0===s&&(s=c.measureText(l).width,a=(h[l]=s)-o),{width:n*u,kernedWidth:a*u}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){t=this._measureLine(t);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t},_measureLine:function(t){var e,i,r,n,s,o,a=0,c=this._textLines[t],h=new Array(c.length),l=0,u=this.path,f="right"===this.pathSide;for(this.__charBounds[t]=h,e=0;e<c.length;e++)i=c[e],n=this._getGraphemeBox(i,t,e,r),a+=(h[e]=n).kernedWidth,r=i;if(h[e]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize},u){switch(o=u.segmentsInfo[u.segmentsInfo.length-1].length,(s=x.util.getPointOnPath(u.path,0,u.segmentsInfo)).x+=u.pathOffset.x,s.y+=u.pathOffset.y,this.textAlign){case"left":l=f?o-a:0;break;case"center":l=(o-a)/2;break;case"right":l=f?0:o-a}for(l+=this.pathStartOffset*(f?-1:1),e=f?c.length-1:0;f?0<=e:e<c.length;f?e--:e++)n=h[e],o<l?l%=o:l<0&&(l+=o),this._setGraphemeOnPath(l,n,s),l+=n.kernedWidth}return{width:a,numOfSpaces:0}},_setGraphemeOnPath:function(t,e,i){var t=t+e.kernedWidth/2,r=this.path,t=x.util.getPointOnPath(r.path,t,r.segmentsInfo);e.renderLeft=t.x-i.x,e.renderTop=t.y-i.y,e.angle=t.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,i,r,n){var s=this.getCompleteStyleDeclaration(e,i),o=r?this.getCompleteStyleDeclaration(e,i-1):{},t=this._measureChar(t,s,r,o),r=t.kernedWidth,o=t.width,a=(0!==this.charSpacing&&(o+=a=this._getWidthOfCharSpacing(),r+=a),{width:o,left:0,height:s.fontSize,kernedWidth:r,deltaY:s.deltaY});return 0<i&&!n&&(o=this.__charBounds[e][i-1],a.left=o.left+o.width+t.kernedWidth-t.width),a},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),r=1,n=e.length;r<n;r++)i=Math.max(this.getHeightOfChar(t,r),i);return this.__lineHeights[t]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,i=0,r=this._textLines.length;i<r;i++)t=this.getHeightOfLine(i),e+=i===r-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var i=0,r=this._getLeftOffset(),n=this._getTopOffset(),s=0,o=this._textLines.length;s<o;s++){var a=this.getHeightOfLine(s),c=a/this.lineHeight,h=this._getLineLeftOffset(s);this._renderTextLine(e,t,this._textLines[s],r+h,n+i+c,s),i+=a}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,i,r,n,s){var o,a,c,h,l=this.getHeightOfLine(s),u=-1!==this.textAlign.indexOf("justify"),f="",d=0,g=this.path,p=!u&&0===this.charSpacing&&this.isEmptyStyles(s)&&!g,m="ltr"===this.direction,v="ltr"===this.direction?1:-1,b=e.canvas.getAttribute("dir");if(e.save(),b!==this.direction&&(e.canvas.setAttribute("dir",m?"ltr":"rtl"),e.direction=m?"ltr":"rtl",e.textAlign=m?"left":"right"),n-=l*this._fontSizeFraction/this.lineHeight,p)return this._renderChar(t,e,s,0,i.join(""),r,n,l),void e.restore();for(var y=0,_=i.length-1;y<=_;y++)h=y===_||this.charSpacing||g,f+=i[y],c=this.__charBounds[s][y],0===d?(r+=v*(c.kernedWidth-c.width),d+=c.width):d+=c.kernedWidth,(h=u&&!h&&this._reSpaceAndTab.test(i[y])?!0:h)||(o=o||this.getCompleteStyleDeclaration(s,y),a=this.getCompleteStyleDeclaration(s,y+1),h=x.util.hasStyleChanged(o,a,!1)),h&&(g?(e.save(),e.translate(c.renderLeft,c.renderTop),e.rotate(c.angle),this._renderChar(t,e,s,y,f,-d/2,0,l),e.restore()):(h=r,this._renderChar(t,e,s,y,f,h,n,l)),f="",o=a,r+=v*d,d=0);e.restore()},_applyPatternGradientTransformText:function(t){var e,i=x.util.createCanvasElement(),r=this.width+this.strokeWidth,n=this.height+this.strokeWidth;return i.width=r,i.height=n,(e=i.getContext("2d")).beginPath(),e.moveTo(0,0),e.lineTo(r,0),e.lineTo(r,n),e.lineTo(0,n),e.closePath(),e.translate(r/2,n/2),e.fillStyle=t.toLive(e),this._applyPatternGradientTransform(e,t),e.fill(),e.createPattern(i,"no-repeat")},handleFiller:function(t,e,i){var r,n;return i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?(r=-this.width/2,n=-this.height/2,t.translate(r,n),t[e]=this._applyPatternGradientTransformText(i),{offsetX:r,offsetY:n}):(t[e]=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,i,r,n,s,o){var a,c,h=this._getStyleDeclaration(i,r),i=this.getCompleteStyleDeclaration(i,r),r="fillText"===t&&i.fill,t="strokeText"===t&&i.stroke&&i.strokeWidth;(t||r)&&(e.save(),r&&(a=this._setFillStyles(e,i)),t&&(c=this._setStrokeStyles(e,i)),e.font=this._getFontDeclaration(i),h&&h.textBackgroundColor&&this._removeShadow(e),h&&h.deltaY&&(o+=h.deltaY),r&&e.fillText(n,s-a.offsetX,o-a.offsetY),t&&e.strokeText(n,s-c.offsetX,o-c.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,i){var r=this.get2DCursorLocation(t,!0),n=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize"),r=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY"),r={fontSize:n*i.size,deltaY:r+n*i.baseline};return this.setSelectionStyles(r,t,e),this},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),e=this.width-e,i=this.textAlign,r=this.direction,n=0,t=this.isEndOfWrapping(t);return"justify"===i||"justify-center"===i&&!t||"justify-right"===i&&!t||"justify-left"===i&&!t?0:("center"===i&&(n=e/2),"right"===i&&(n=e),"justify-center"===i&&(n=e/2),"justify-right"===i&&(n=e),"rtl"===r&&(n-=e),n)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return(t=t||this.hasStateChanged("_dimensionAffectingProps"))&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];var e=this.measureLine(t).width;return this.__lineWidths[t]=e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){t=this._getStyleDeclaration(t,e);return(t&&void 0!==t[i]?t:this)[i]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var i,r=this._getLeftOffset(),n=this._getTopOffset(),s=this.path,o=this._getWidthOfCharSpacing(),a=this.offsets[e],c=0,h=this._textLines.length;c<h;c++)if(i=this.getHeightOfLine(c),this[e]||this.styleHas(e,c)){for(var l=this._textLines[c],u=i/this.lineHeight,f=this._getLineLeftOffset(c),d=0,g=0,p=this.getValueOfPropertyAt(c,0,e),m=this.getValueOfPropertyAt(c,0,"fill"),v=n+u*(1-this._fontSizeFraction),b=this.getHeightOfChar(c,0),y=this.getValueOfPropertyAt(c,0,"deltaY"),_=0,x=l.length;_<x;_++){var C=this.__charBounds[c][_],S=this.getValueOfPropertyAt(c,_,e),T=this.getValueOfPropertyAt(c,_,"fill"),w=this.getHeightOfChar(c,_),O=this.getValueOfPropertyAt(c,_,"deltaY");s&&S&&T?(t.save(),t.fillStyle=m,t.translate(C.renderLeft,C.renderTop),t.rotate(C.angle),t.fillRect(-C.kernedWidth/2,a*w+O,C.kernedWidth,this.fontSize/15),t.restore()):(S!==p||T!==m||w!==b||O!==y)&&0<g?(P=r+f+d,"rtl"===this.direction&&(P=this.width-P-g),p&&m&&(t.fillStyle=m,t.fillRect(P,v+a*b+y,g,this.fontSize/15)),d=C.left,g=C.width,p=S,m=T,b=w,y=O):g+=C.kernedWidth}var P=r+f+d;"rtl"===this.direction&&(P=this.width-P-g),t.fillStyle=T,S&&T&&t.fillRect(P,v+a*b+y,g-o,this.fontSize/15),n+=i}else n+=i;this._removeShadow(t)}},_getFontDeclaration:function(t,e){var t=t||this,i=this.fontFamily,r=-1<x.Text.genericFonts.indexOf(i.toLowerCase()),i=void 0===i||-1<i.indexOf("'")||-1<i.indexOf(",")||-1<i.indexOf('"')||r?t.fontFamily:'"'+t.fontFamily+'"';return[x.isLikelyNode?t.fontWeight:t.fontStyle,x.isLikelyNode?t.fontStyle:t.fontWeight,e?this.CACHE_FONT_SIZE+"px":t.fontSize+"px",i].join(" ")},render:function(t){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t))},_splitTextIntoLines:function(t){for(var e=t.split(this._reNewline),i=new Array(e.length),r=["\n"],n=[],s=0;s<e.length;s++)i[s]=x.util.string.graphemeSplit(e[s]),n=n.concat(i[s],r);return n.pop(),{_unwrappedLines:i,lines:e,graphemeText:n,graphemeLines:i}},toObject:function(t){t=e.concat(t),t=this.callSuper("toObject",t);return t.styles=x.util.stylesToArray(this.styles,this.text),t.path&&(t.path=this.path.toObject()),t},set:function(t,e){this.callSuper("set",t,e);var i=!1,r=!1;if("object"==typeof t)for(var n in t)"path"===n&&this.setPathInfo(),i=i||-1!==this._dimensionAffectingProps.indexOf(n),r=r||"path"===n;else i=-1!==this._dimensionAffectingProps.indexOf(t),r="path"===t;return r&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),x.Text.ATTRIBUTE_NAMES=x.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),x.Text.DEFAULT_SVG_FONT_SIZE=16,x.Text.fromElement=function(t,e,i){if(!t)return e(null);var r=x.parseAttributes(t,x.Text.ATTRIBUTE_NAMES),n=r.textAnchor||"left",s=((i=x.util.object.extend(i?o(i):{},r)).top=i.top||0,i.left=i.left||0,r.textDecoration&&(-1!==(s=r.textDecoration).indexOf("underline")&&(i.underline=!0),-1!==s.indexOf("overline")&&(i.overline=!0),-1!==s.indexOf("line-through")&&(i.linethrough=!0),delete i.textDecoration),"dx"in r&&(i.left+=r.dx),"dy"in r&&(i.top+=r.dy),"fontSize"in i||(i.fontSize=x.Text.DEFAULT_SVG_FONT_SIZE),""),r=("textContent"in t?s=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(s=t.firstChild.data),s=s.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),i.strokeWidth),t=(i.strokeWidth=0,new x.Text(s,i)),s=t.getScaledHeight()/t.height,i=((t.height+t.strokeWidth)*t.lineHeight-t.height)*s,s=t.getScaledHeight()+i,i=0;"center"===n&&(i=t.getScaledWidth()/2),"right"===n&&(i=t.getScaledWidth()),t.set({left:t.left-i,top:t.top-(s-t.fontSize*(.07+t._fontSizeFraction))/t.lineHeight,strokeWidth:void 0!==r?r:1}),e(t)},x.Text.fromObject=function(t,i){var e=o(t),r=t.path;return delete e.path,x.Object._fromObject("Text",e,function(e){e.styles=x.util.stylesFromArray(t.styles,t.text),r?x.Object._fromObject("Path",r,function(t){e.set("path",t),i(e)},"path"):i(e)},"text")},x.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],x.util.createAccessors&&x.util.createAccessors(x.Text))}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if(void 0!==t&&!this.styles[t])return!0;var e,i=void 0===t?this.styles:{line:this.styles[t]};for(e in i)for(var r in i[e])for(var n in i[e][r])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||""===t)return!1;if(void 0!==e&&!this.styles[e])return!1;var i,r=void 0===e?this.styles:{0:this.styles[e]};for(i in r)for(var n in r[i])if(void 0!==r[i][n][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||""===t)return!1;var e,i,r,n,s=this.styles,o=0,a=!0,c=0;for(r in s){for(var h in e=0,s[r])o++,(n=s[r][h]).hasOwnProperty(t)?(i?n[t]!==i&&(a=!1):i=n[t],n[t]===this[t]&&delete n[t]):a=!1,0!==Object.keys(n).length?e++:delete s[r][h];0===e&&delete s[r]}for(var l=0;l<this._textLines.length;l++)c+=this._textLines[l].length;a&&o===c&&(this[t]=i,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&""!==t){var e,i,r,n=this.styles;for(i in n){for(r in e=n[i])delete e[r][t],0===Object.keys(e[r]).length&&delete e[r];0===Object.keys(e).length&&delete n[i]}}},_extendStyles:function(t,e){t=this.get2DCursorLocation(t);this._getLineStyle(t.lineIndex)||this._setLineStyle(t.lineIndex),this._getStyleDeclaration(t.lineIndex,t.charIndex)||this._setStyleDeclaration(t.lineIndex,t.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(t.lineIndex,t.charIndex),e)},get2DCursorLocation:function(t,e){void 0===t&&(t=this.selectionStart);for(var i=e?this._unwrappedTextLines:this._textLines,r=i.length,n=0;n<r;n++){if(t<=i[n].length)return{lineIndex:n,charIndex:t};t-=i[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:i[n-1].length<t?i[n-1].length:t}},getSelectionStyles:function(t,e,i){void 0===t&&(t=this.selectionStart||0),void 0===e&&(e=this.selectionEnd||t);for(var r=[],n=t;n<e;n++)r.push(this.getStyleAtPosition(n,i));return r},getStyleAtPosition:function(t,e){t=this.get2DCursorLocation(t);return(e?this.getCompleteStyleDeclaration(t.lineIndex,t.charIndex):this._getStyleDeclaration(t.lineIndex,t.charIndex))||{}},setSelectionStyles:function(t,e,i){void 0===e&&(e=this.selectionStart||0),void 0===i&&(i=this.selectionEnd||e);for(var r=e;r<i;r++)this._extendStyles(r,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){t=this.styles&&this.styles[t];return t?t[e]:null},getCompleteStyleDeclaration:function(t,e){for(var i,r=this._getStyleDeclaration(t,e)||{},n={},s=0;s<this._styleProperties.length;s++)n[i=this._styleProperties[s]]=(void 0===r[i]?this:r)[i];return n},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}}),function(){function o(t){t.textDecoration&&(-1<t.textDecoration.indexOf("underline")&&(t.underline=!0),-1<t.textDecoration.indexOf("line-through")&&(t.linethrough=!0),-1<t.textDecoration.indexOf("overline")&&(t.overline=!0),delete t.textDecoration)}fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t)},clearContextTop:function(t){var e,i;this.isEditing&&this.canvas&&this.canvas.contextTop&&(e=this.canvas.contextTop,i=this.canvas.viewportTransform,e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e),this._clearTextArea(e),t||e.restore())},renderCursorOrSelection:function(){var t,e;this.isEditing&&this.canvas&&this.canvas.contextTop&&(t=this._getCursorBoundaries(),e=this.canvas.contextTop,this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore())},_clearTextArea:function(t){var e=this.width+4,i=this.height+4;t.clearRect(-e/2,-i/2,e,i)},_getCursorBoundaries:function(t){void 0===t&&(t=this.selectionStart);var e=this._getLeftOffset(),i=this._getTopOffset(),t=this._getCursorBoundariesOffsets(t);return{left:e,top:i,leftOffset:t.left,topOffset:t.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;for(var e=0,i=0,t=this.get2DCursorLocation(t),r=t.charIndex,n=t.lineIndex,s=0;s<n;s++)e+=this.getHeightOfLine(s);var t=this._getLineLeftOffset(n),o=this.__charBounds[n][r];return o&&(i=o.left),0!==this.charSpacing&&r===this._textLines[n].length&&(i-=this._getWidthOfCharSpacing()),o={top:e,left:t+(0<i?i:0)},"rtl"===this.direction&&(o.left*=-1),this.cursorOffsetCache=o,this.cursorOffsetCache},renderCursor:function(t,e){var i=this.get2DCursorLocation(),r=i.lineIndex,i=0<i.charIndex?i.charIndex-1:0,n=this.getValueOfPropertyAt(r,i,"fontSize"),s=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/s,o=t.topOffset,a=this.getValueOfPropertyAt(r,i,"deltaY");o+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-n*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,i,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-s/2,o+t.top+a,s,n)},renderSelection:function(t,e){for(var i=(this.inCompositionMode?this.hiddenTextarea:this).selectionStart,r=(this.inCompositionMode?this.hiddenTextarea:this).selectionEnd,n=-1!==this.textAlign.indexOf("justify"),i=this.get2DCursorLocation(i),r=this.get2DCursorLocation(r),s=i.lineIndex,o=r.lineIndex,a=i.charIndex<0?0:i.charIndex,c=r.charIndex<0?0:r.charIndex,h=s;h<=o;h++){var l,u=this._getLineLeftOffset(h)||0,f=this.getHeightOfLine(h),d=0,g=0,u=(h===s&&(d=this.__charBounds[s][a].left),s<=h&&h<o?g=n&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5:h===o&&(g=0===c?this.__charBounds[o][c].left:(l=this._getWidthOfCharSpacing(),this.__charBounds[o][c-1].left+this.__charBounds[o][c-1].width-l)),l=f,(this.lineHeight<1||h===o&&1<this.lineHeight)&&(f/=this.lineHeight),t.left+u+d),g=g-d,d=f,p=0;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",d=1,p=f):e.fillStyle=this.selectionColor,"rtl"===this.direction&&(u=this.width-u-g),e.fillRect(u,t.top+t.topOffset+p,g,d),t.topOffset+=l}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=0<t.charIndex?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),fabric.IText.fromObject=function(t,e){var i=fabric.util.stylesFromArray(t.styles,t.text),r=Object.assign({},t,{styles:i});if(o(r),r.styles)for(var n in r.styles)for(var s in r.styles[n])o(r.styles[n][s]);fabric.Object._fromObject("IText",r,e,"text")}}(),function(){var u=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var e=this;this.on("added",function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))})},initRemovedHandler:function(){var e=this;this.on("removed",function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],fabric.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})},t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,r){var n={isAborted:!1,abort:function(){this.isAborted=!0}};return t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){n.isAborted||t[r]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return n.isAborted}}),n},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,t=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},t)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i--;for(;/\S/.test(this._text[i])&&-1<i;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\n/.test(this._text[i])&&-1<i;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\n/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e},searchWordBoundary:function(t,e){for(var i=this._text,r=this._reSpace.test(i[t])?t-1:t,n=i[r],s=fabric.reNonWord;!s.test(n)&&0<r&&r<i.length;)n=i[r+=e];return s.test(n)&&(r+=1===e?0:1),r},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),t=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=t,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),t=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=t,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll()),this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){var e,i;this.__isMousedown&&this.isEditing&&(document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus(),t=this.getSelectionStartFromPointer(t.e),e=this.selectionStart,i=this.selectionEnd,(t===this.__selectionStartOnMouseDown&&e!==i||e!==t&&i!==t)&&(t>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=t):(this.selectionStart=t,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===e&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection())))},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,i){var r=i.slice(0,t),r=fabric.util.string.graphemeSplit(r).length;if(t===e)return{selectionStart:r,selectionEnd:r};i=i.slice(t,e);return{selectionStart:r,selectionEnd:r+fabric.util.string.graphemeSplit(i).length}},fromGraphemeToStringSelection:function(t,e,i){var r=i.slice(0,t).join("").length;return t===e?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+i.slice(t,e).join("").length}},_updateTextarea:function(){var t;this.cursorOffsetCache={},this.hiddenTextarea&&(this.inCompositionMode||(t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text),this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd),this.updateTextareaPosition())},updateFromTextArea:function(){var t;this.hiddenTextarea&&(this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition())},updateTextareaPosition:function(){var t;this.selectionStart===this.selectionEnd&&(t=this._calcTextareaPosition(),this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top)},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),t=this.get2DCursorLocation(t),i=t.lineIndex,t=t.charIndex,i=this.getValueOfPropertyAt(i,t,"fontSize")*this.lineHeight,t=e.leftOffset,r=this.calcTransformMatrix(),t={x:e.left+t,y:e.top+e.topOffset+i},e=this.canvas.getRetinaScaling(),n=this.canvas.upperCanvasEl,s=n.width/e,e=n.height/e,o=s-i,a=e-i,s=n.clientWidth/s,n=n.clientHeight/e,t=fabric.util.transformPoint(t,r);return(t=fabric.util.transformPoint(t,this.canvas.viewportTransform)).x*=s,t.y*=n,t.x<0&&(t.x=0),t.x>o&&(t.x=o),t.y<0&&(t.y=0),t.y>a&&(t.y=a),t.x+=this.canvas._offset.left,t.y+=this.canvas._offset.top,{left:t.x+"px",top:t.y+"px",fontSize:i+"px",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text,e=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var t=this.get2DCursorLocation(t,!0),e=this.get2DCursorLocation(e,!0),i=t.lineIndex,r=t.charIndex,n=e.lineIndex,s=e.charIndex;if(i!==n){if(this.styles[i])for(l=r;l<this._unwrappedTextLines[i].length;l++)delete this.styles[i][l];if(this.styles[n])for(l=s;l<this._unwrappedTextLines[n].length;l++)(c=this.styles[n][l])&&(this.styles[i]||(this.styles[i]={}),this.styles[i][r+l-s]=c);for(l=i+1;l<=n;l++)delete this.styles[l];this.shiftLineStyles(n,i-n)}else if(this.styles[i]){for(var o,a,c=this.styles[i],h=s-r,l=r;l<s;l++)delete c[l];for(a in this.styles[i])s<=(o=parseInt(a,10))&&(c[o-h]=c[a],delete c[a])}},shiftLineStyles:function(t,e){var i,r=u(this.styles);for(i in this.styles){var n=parseInt(i,10);t<n&&(this.styles[n+e]=r[n],r[n-e]||delete this.styles[n])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,e,i,r){var n,s,o={},a=!1,c=this._unwrappedTextLines[t].length===e;for(s in this.shiftLineStyles(t,i=i||1),this.styles[t]&&(n=this.styles[t][0===e?e:e-1]),this.styles[t]){var h=parseInt(s,10);e<=h&&(a=!0,o[h-e]=this.styles[t][s],c&&0===e||delete this.styles[t][s])}var l=!1;for(a&&!c&&(this.styles[t+i]=o,l=!0),l&&i--;0<i;)r&&r[i-1]?this.styles[t+i]={0:u(r[i-1])}:n?this.styles[t+i]={0:u(n)}:delete this.styles[t+i],i--;this._forceClearCache=!0},insertCharStyleObject:function(t,e,i,r){this.styles||(this.styles={});var n,s=this.styles[t],o=s?u(s):{};for(n in i=i||1,o){var a=parseInt(n,10);e<=a&&(s[a+i]=o[a],o[a-i]||delete s[a])}if(this._forceClearCache=!0,r)for(;i--;)Object.keys(r[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+i]=u(r[i]));else if(s)for(var c=s[e?e-1:1];c&&i--;)this.styles[t][e+i]=u(c)},insertNewStyleBlock:function(t,e,i){for(var r=this.get2DCursorLocation(e,!0),n=[0],s=0,o=0;o<t.length;o++)"\n"===t[o]?n[++s]=0:n[s]++;0<n[0]&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,n[0],i),i=i&&i.slice(n[0]+1)),s&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+n[0],s);for(o=1;o<s;o++)0<n[o]?this.insertCharStyleObject(r.lineIndex+o,0,n[o],i):i&&this.styles[r.lineIndex+o]&&i[0]&&(this.styles[r.lineIndex+o][0]=i[0]),i=i&&i.slice(n[o]+1);0<n[o]&&this.insertCharStyleObject(r.lineIndex+o,0,n[o],i)},setSelectionStartEndWithShift:function(t,e,i){i<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=i):t<i&&i<e?"right"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=i)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(t){var e;this.canvas&&(this.__newClickTime=+new Date,e=t.pointer,this.isTripleClick(e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected)},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))},tripleClickHandler:function(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),i=this.selectionStart,r=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,r,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e=this.getLocalPointer(t),i=0,r=0,n=0,s=0,o=0,a=0,c=this._textLines.length;a<c&&n<=e.y;a++)n+=this.getHeightOfLine(a)*this.scaleY,0<(o=a)&&(s+=this._textLines[a-1].length+this.missingNewlineOffset(a-1));r=this._getLineLeftOffset(o)*this.scaleX,t=this._textLines[o],"rtl"===this.direction&&(e.x=this.width*this.scaleX-e.x+r);for(var h=0,l=t.length;h<l&&(i=r,(r+=this.__charBounds[o][h].kernedWidth*this.scaleX)<=e.x);h++)s++;return this._getNewSelectionStartFromOffset(e,i,r,s,l)},_getNewSelectionStartFromOffset:function(t,e,i,r,n){e=t.x-e,i-=t.x,t=r+(e<i||i<0?0:1);return t=(t=this.flipX?n-t:t)>this._text.length?this._text.length:t}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+t.fontSize+";",(this.hiddenTextareaContainer||fabric.document.body).appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){var e="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),33<=t.keyCode&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var i,r,n,t=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,o=t.length,a=o-s,c=this.selectionStart,h=this.selectionEnd,l=c!==h;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var u=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),f=c>u.selectionStart;l?(i=this._text.slice(c,h),a+=h-c):o<s&&(i=f?this._text.slice(h+a,h):this._text.slice(c,c-a)),o=t.slice(u.selectionEnd-a,u.selectionEnd),i&&i.length&&(o.length&&(r=this.getSelectionStyles(c,c+1,!1),r=o.map(function(){return r[0]})),s=l?(n=c,h):f?(n=h-i.length,h):(n=h)+i.length,this.removeStyleFromTo(n,s)),o.length&&(e&&o.join("")===fabric.copiedText&&!fabric.disableStyleCopyPaste&&(r=fabric.copiedTextStyle),this.insertNewStyleBlock(o,c,r)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(fabric.copiedText=this.getSelectedText(),fabric.disableStyleCopyPaste?fabric.copiedTextStyle=null:fabric.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(t,e){var i=this._getLineLeftOffset(t);return 0<e&&(i+=(t=this.__charBounds[t][e-1]).left+t.width),i},getDownCursorOffset:function(t,e){var e=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(e),r=i.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-e;t=i.charIndex,e=this._getWidthBeforeCursor(r,t),i=this._getIndexOnLine(r+1,e);return this._textLines[r].slice(t).length+i+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var e=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(e),r=i.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-e;t=i.charIndex,e=this._getWidthBeforeCursor(r,t),i=this._getIndexOnLine(r-1,e),e=this._textLines[r].slice(0,t),t=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+i-e.length+(1-t)},_getIndexOnLine:function(t,e){for(var i=this._textLines[t],r=this._getLineLeftOffset(t),n=0,s=0,o=i.length;s<o;s++)if(e<(r+=h=this.__charBounds[t][s].width)){var a=!0,c=r,h=Math.abs(r-h-e),n=Math.abs(c-e)<h?s:s-1;break}return n=a?n:i.length-1},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){t=this["get"+t+"CursorOffset"](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(t):this.moveCursorWithoutShift(t),0!==t&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,i){var r;if(t.altKey)r=this["findWordBoundary"+i](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===i?-1:1,!0;r=this["findLineBoundary"+i](this[e])}if(void 0!==r&&this[e]!==r)return this[e]=r,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){t="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?t+="Shift":t+="outShift",this[t](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){this.removeStyleFromTo(t,e=void 0===e?t+1:e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,i,r){i<(r=void 0===r?i:r)&&this.removeStyleFromTo(i,r);t=fabric.util.string.graphemeSplit(t);this.insertNewStyleBlock(t,i,e),this._text=[].concat(this._text.slice(0,i),t,this._text.slice(r)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var a=fabric.util.toFixed,c=/  +/g;fabric.util.object.extend(fabric.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(t)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=this.getSvgTextDecoration(this);return[t.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",e?'text-decoration="'+e+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(t,e){var i,r=[],n=[],s=t;this._setSVGBg(n);for(var o=0,a=this._textLines.length;o<a;o++)i=this._getLineLeftOffset(o),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(n,o,e+i,s),this._setSVGTextLineText(r,o,e+i,s),s+=this.getHeightOfLine(o);return{textSpans:r,textBgRects:n}},_createTextCharSpan:function(t,e,i,r){var n=t!==t.trim()||t.match(c),n=this.getSvgSpanStyles(e,n),n=n?'style="'+n+'"':"",e=e.deltaY,s="",o=fabric.Object.NUM_FRACTION_DIGITS;return e&&(s=' dy="'+a(e,o)+'" '),['<tspan x="',a(i,o),'" y="',a(r,o),'" ',s,n,">",fabric.util.string.escapeXml(t),"</tspan>"].join("")},_setSVGTextLineText:function(t,e,i,r){var n,s,o,a,c=this.getHeightOfLine(e),h=-1!==this.textAlign.indexOf("justify"),l="",u=0,f=this._textLines[e];r+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var d=0,g=f.length-1;d<=g;d++)a=d===g||this.charSpacing,l+=f[d],o=this.__charBounds[e][d],0===u?(i+=o.kernedWidth-o.width,u+=o.width):u+=o.kernedWidth,(a=h&&!a&&this._reSpaceAndTab.test(f[d])?!0:a)||(n=n||this.getCompleteStyleDeclaration(e,d),s=this.getCompleteStyleDeclaration(e,d+1),a=fabric.util.hasStyleChanged(n,s,!0)),a&&(o=this._getStyleDeclaration(e,d)||{},t.push(this._createTextCharSpan(l,o,i,r)),l="",n=s,i+=u,u=0)},_pushTextBgRect:function(t,e,i,r,n,s){var o=fabric.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(e),' x="',a(i,o),'" y="',a(r,o),'" width="',a(n,o),'" height="',a(s,o),'"></rect>\n')},_setSVGTextLineBg:function(t,e,i,r){for(var n,s,o=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight,c=0,h=0,l=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),u=0,f=o.length;u<f;u++)n=this.__charBounds[e][u],(s=this.getValueOfPropertyAt(e,u,"textBackgroundColor"))!==l?(l&&this._pushTextBgRect(t,l,i+h,r,c,a),h=n.left,c=n.width,l=s):c+=n.kernedWidth;s&&this._pushTextBgRect(t,s,i+h,r,c,a)},_getFillAttributes:function(t){var e=t&&"string"==typeof t?new fabric.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_getSVGLineTopOffset:function(t){for(var e,i=0,r=0;r<t;r++)i+=this.getHeightOfLine(r);return e=this.getHeightOfLine(r),{lineTop:i,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){return fabric.Object.prototype.getSvgStyles.call(this,t)+" white-space: pre;"}})}(),function(t){"use strict";var b=t.fabric||(t.fabric={});b.Textbox=b.util.createClass(b.IText,b.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:b.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var e=0,i=0,r=0,n={},s=0;s<t.graphemeLines.length;s++)"\n"===t.graphemeText[r]&&0<s?(i=0,r++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[r])&&0<s&&(i++,r++),n[s]={line:e,offset:i},r+=t.graphemeLines[s].length,i+=t.graphemeLines[s].length;return n},styleHas:function(t,e){var i;return this._styleMap&&!this.isWrapping&&(i=this._styleMap[e])&&(e=i.line),b.Text.prototype.styleHas.call(this,t,e)},isEmptyStyles:function(t){if(!this.styles)return!0;var e,i,r,n=0,s=!1,o=this._styleMap[t],a=this._styleMap[t+1];for(r in o&&(t=o.line,n=o.offset),a&&(s=a.line===t,e=a.offset),i=void 0===t?this.styles:{line:this.styles[t]})for(var c in i[r])if(n<=c&&(!s||c<e))for(var h in i[r][c])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[t];if(!i)return null;t=i.line,e=i.offset+e}return this.callSuper("_getStyleDeclaration",t,e)},_setStyleDeclaration:function(t,e,i){var r=this._styleMap[t];t=r.line,e=r.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){t=this._styleMap[t];return!!this.styles[t.line]},_setLineStyle:function(t){t=this._styleMap[t];this.styles[t.line]={}},_wrapText:function(t,e){var i,r=[];for(this.isWrapping=!0,i=0;i<t.length;i++)r=r.concat(this._wrapLine(t[i],i,e));return this.isWrapping=!1,r},_measureWord:function(t,e,i){var r,n=0;i=i||0;for(var s=0,o=t.length;s<o;s++)n+=this._getGraphemeBox(t[s],e,s+i,r,!0).kernedWidth,r=t[s];return n},_wrapLine:function(t,e,i,r){var n,s,o=0,a=this.splitByGrapheme,c=[],h=[],l=a?b.util.string.graphemeSplit(t):t.split(this._wordJoiners),u=0,f=a?"":" ",d=0,g=0,p=!0,m=this._getWidthOfCharSpacing(),r=r||0;0===l.length&&l.push([]),i-=r;for(var v=0;v<l.length;v++)n=a?l[v]:b.util.string.graphemeSplit(l[v]),s=this._measureWord(n,e,u),u+=n.length,i<(o+=d+s-m)&&!p?(c.push(h),h=[],o=s,p=!0):o+=m,p||a||h.push(f),h=h.concat(n),d=a?0:this._measureWord([f],e,u),u++,p=!1,g<s&&(g=s);return v&&c.push(h),g+r>this.dynamicMinWidth&&(this.dynamicMinWidth=g-m+r),c},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return!this.splitByGrapheme||this.isEndOfWrapping(t)?1:0},_splitTextIntoLines:function(t){for(var t=b.Text.prototype._splitTextIntoLines.call(this,t),e=this._wrapText(t.lines,this.width),i=new Array(e.length),r=0;r<e.length;r++)i[r]=e[r].join("");return t.lines=i,t.graphemeLines=e,t},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t,e={};for(t in this._styleMap)this._textLines[t]&&(e[this._styleMap[t].line]=1);for(t in this.styles)e[t]||delete this.styles[t]},toObject:function(t){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(t))}}),b.Textbox.fromObject=function(t,e){var i=b.util.stylesFromArray(t.styles,t.text),t=Object.assign({},t,{styles:i});return b.Object._fromObject("Textbox",t,e,"text")}}("undefined"!=typeof exports?exports:this),function(){var t=fabric.controlsUtils,e=t.scaleSkewCursorStyleHandler,i=t.scaleCursorStyleHandler,r=t.scalingEqually,n=t.scalingYOrSkewingX,s=t.scalingXOrSkewingY,o=t.scaleOrSkewActionName,a=fabric.Object.prototype.controls;a.ml=new fabric.Control({x:-.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:o}),a.mr=new fabric.Control({x:.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:o}),a.mb=new fabric.Control({x:0,y:.5,cursorStyleHandler:e,actionHandler:n,getActionName:o}),a.mt=new fabric.Control({x:0,y:-.5,cursorStyleHandler:e,actionHandler:n,getActionName:o}),a.tl=new fabric.Control({x:-.5,y:-.5,cursorStyleHandler:i,actionHandler:r}),a.tr=new fabric.Control({x:.5,y:-.5,cursorStyleHandler:i,actionHandler:r}),a.bl=new fabric.Control({x:-.5,y:.5,cursorStyleHandler:i,actionHandler:r}),a.br=new fabric.Control({x:.5,y:.5,cursorStyleHandler:i,actionHandler:r}),a.mtr=new fabric.Control({x:0,y:-.5,actionHandler:t.rotationWithSnapping,cursorStyleHandler:t.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),fabric.Textbox&&((s=fabric.Textbox.prototype.controls={}).mtr=a.mtr,s.tr=a.tr,s.br=a.br,s.tl=a.tl,s.bl=a.bl,s.mt=a.mt,s.mb=a.mb,s.mr=new fabric.Control({x:.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"}),s.ml=new fabric.Control({x:-.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"}))}();
(function(g){var m=function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var b=["("," -webkit- -moz- -o- -ms- ".split(" ").join("touch-enabled),("),"heartz)"].join("");return window.matchMedia(b).matches}();g.textureSize=4096;g.Object.prototype.set({padding:5,borderColor:"#09f",cornerColor:"#09f",transparentCorners:!1,cornerSize:m?30:15,cornerStyle:"circle",getZindex:function(){return this.canvas.getObjects().indexOf(this)},exportPNG:function(){var b=
this.toCanvasElement();$("<a>",{href:b.toDataURL(),download:"element.png"})[0].click()}});g.Object.prototype.controls.mtr.offsetY=m?-60:-35;g.Object.prototype.initialize=function(b){return function(...a){b.call(this,...a);this.uid=this.type+"-"+Math.random().toString(36).substr(2,9);return this}}(g.Object.prototype.initialize);g.Canvas.prototype.set({apply:function(b,a){"activeSelection"===b.type?b.getObjects().forEach(function(c){a(c)}):a(b);this.requestRenderAll();return this},modifyObject:function(b,
a,c){c=c||this.getActiveObject();if(!c)return!1;switch(b){case "zoomBy-x":"borderedimage"==c.type&&c.zoomBy(a,null,null);break;case "zoomBy-y":"borderedimage"==c.type&&c.zoomBy(null,a,null);break;case "zoomBy-z":"borderedimage"==c.type?c.zoomBy(null,null,a):"borderedtext"==c.type&&(c.fontSize+=0>a?-1:1);break;case "angle":a=+a;a=c.get("angle")+a;360<a?a-=360:-360>a&&(a+=360);c.rotate(a);break;default:c.set(b,c.get(b)+a)}"left"!==b&&"top"!==b||c.setCoords();this.requestRenderAll();return c},cloneObject:function(){var b=
this,a;b.getActiveObject().clone(function(c){a=c;a.clone(function(d){b.discardActiveObject();d.set({left:d.left+10,top:d.top+10,evented:!0});"activeSelection"===d.type?(d.canvas=b,d.forEachObject(function(f){b.add(f)}),d.setCoords()):b.add(d);a.top+=10;a.left+=10;b.setActiveObject(d);b.requestRenderAll()},["isSticker"])},["isSticker"])},removeObject:function(b){var a=this;(b=b||a.getActiveObject())&&a.apply(b,function(c){c&&a.remove(c)});a.discardActiveObject()}});g.Image.filters.Vintage2=g.util.createClass(g.Image.filters.BaseFilter,
{type:"Vintage2",vignette:function(b,a,c,d){b.globalCompositeOperation="source-over";d=d||.7;var f=b.createRadialGradient(a/2,c/2,0,a/2,c/2,Math.sqrt(Math.pow(a/2,2)+Math.pow(c/2,2)));f.addColorStop(0,"rgba(0,0,0,0)");f.addColorStop(.5,"rgba(0,0,0,0)");f.addColorStop(1,"rgba(0,0,0,"+d+")");b.fillStyle=f;b.fillRect(0,0,a,c)},retro:function(){for(var b=function(e){return-12*Math.sin(2*e*Math.PI/255)+e},a=function(e){return-.2*Math.pow(255*e,.5)*Math.sin(Math.PI*(-1.95E-5*Math.pow(e,2)+.0125*e))+e},
c=function(e){return-.001045244139166791*Math.pow(e,2)+1.2665372554875318*e},d={r:[],g:[],b:[]},f=0;255>=f;++f)d.r[f]=a(b(f)),d.g[f]=c(b(f)),d.b[f]=.57254902*b(f)+53;return d},applyTo2d:function(b){var a=b.imageData.width,c=b.imageData.height,d=g.util.createCanvasElement(),f=d.getContext("2d");d.width=a;d.height=c;f.putImageData(b.imageData,0,0);this.vignette(f,a,c);d=f.getImageData(0,0,a,c);var e=d.data,k,l=this.retro();for(k=a*c;0<=k;--k){var h=k<<2;e[h]=l.r[e[h]];e[h+1]=l.g[e[h+1]];e[h+2]=l.b[e[h+
2]];e[h]=255-221.1*(255-e[h])/255;e[h+1]=255-(255-e[h+1])*(255-12*.15)/255;e[h+2]=255-(255-e[h+2])*(255-169*.15)/255}f.putImageData(d,0,0);b.imageData=f.getImageData(0,0,a,c)}});g.Image.filters.Vintage2.fromObject=g.Image.filters.BaseFilter.fromObject})("undefined"!==typeof fabric?fabric:require("fabric").fabric);

var AlignGuideLines={canvas:null,ctx:null,aligningLineOffset:5,aligningLineMargin:4,aligningLineWidth:1,aligningLineColor:"#0f0",viewportTransform:null,zoom:1,verticalLines:[],horizontalLines:[],init:function(a){this.ctx=a.getSelectionContext();this.canvas=a;return this},drawVerticalLine:function(a){this.drawLine(a.x+.5,a.y1>a.y2?a.y2:a.y1,a.x+.5,a.y2>a.y1?a.y2:a.y1)},drawHorizontalLine:function(a){this.drawLine(a.x1>a.x2?a.x2:a.x1,a.y+.5,a.x2>a.x1?a.x2:a.x1,a.y+.5)},drawLine:function(a,b,d,n){var c=
this.ctx;c.save();c.setLineDash([2,2]);c.lineWidth=this.aligningLineWidth;c.strokeStyle=this.aligningLineColor;c.beginPath();c.moveTo((a+this.viewportTransform[4])*this.zoom,(b+this.viewportTransform[5])*this.zoom);c.lineTo((d+this.viewportTransform[4])*this.zoom,(n+this.viewportTransform[5])*this.zoom);c.stroke();c.restore()},isInRange:function(a,b){a=Math.round(a);b=Math.round(b);for(var d=a-this.aligningLineMargin,n=a+this.aligningLineMargin;d<=n;d++)if(d===b)return!0;return!1},mouseDown:function(){var a=
AlignGuideLines;a.viewportTransform=a.canvas.viewportTransform;a.zoom=a.canvas.getZoom()},objectMoving:function(a){var b=AlignGuideLines,d=b.aligningLineOffset;a=a.target;var n=b.canvas.getObjects(),c=a.getCenterPoint(),g=c.x;c=c.y;var k=a.getBoundingRect(),m=k.height/b.viewportTransform[3];k=k.width/b.viewportTransform[0];var p=!1,q=!1;if(b.canvas._currentTransform){for(var r=n.length;r--;)if(n[r]!==a){var e=n[r].getCenterPoint(),f=e.x;e=e.y;var h=n[r].getBoundingRect(),l=h.height/b.viewportTransform[3];
h=h.width/b.viewportTransform[0];b.isInRange(f,g)&&(q=!0,b.verticalLines.push({x:f,y1:e<c?e-l/2-d:e+l/2+d,y2:c>e?c+m/2+d:c-m/2-d}),a.setPositionByOrigin(new fabric.Point(f,c),"center","center"));b.isInRange(f-h/2,g-k/2)&&(q=!0,b.verticalLines.push({x:f-h/2,y1:e<c?e-l/2-d:e+l/2+d,y2:c>e?c+m/2+d:c-m/2-d}),a.setPositionByOrigin(new fabric.Point(f-h/2+k/2,c),"center","center"));b.isInRange(f+h/2,g+k/2)&&(q=!0,b.verticalLines.push({x:f+h/2,y1:e<c?e-l/2-d:e+l/2+d,y2:c>e?c+m/2+d:c-m/2-d}),a.setPositionByOrigin(new fabric.Point(f+
h/2-k/2,c),"center","center"));b.isInRange(e,c)&&(p=!0,b.horizontalLines.push({y:e,x1:f<g?f-h/2-d:f+h/2+d,x2:g>f?g+k/2+d:g-k/2-d}),a.setPositionByOrigin(new fabric.Point(g,e),"center","center"));b.isInRange(e-l/2,c-m/2)&&(p=!0,b.horizontalLines.push({y:e-l/2,x1:f<g?f-h/2-d:f+h/2+d,x2:g>f?g+k/2+d:g-k/2-d}),a.setPositionByOrigin(new fabric.Point(g,e-l/2+m/2),"center","center"));b.isInRange(e+l/2,c+m/2)&&(p=!0,b.horizontalLines.push({y:e+l/2,x1:f<g?f-h/2-d:f+h/2+d,x2:g>f?g+k/2+d:g-k/2-d}),a.setPositionByOrigin(new fabric.Point(g,
e+l/2-m/2),"center","center"))}p||(b.horizontalLines=[]);q||(b.verticalLines=[])}},beforeRender:function(){var a=AlignGuideLines.canvas;a.clearContext(a.contextTop)},afterRender:function(){for(var a=AlignGuideLines,b=a.verticalLines.length;b--;)a.drawVerticalLine(a.verticalLines[b]);for(b=a.horizontalLines.length;b--;)a.drawHorizontalLine(a.horizontalLines[b]);a.verticalLines=a.horizontalLines=[]},mouseUp:function(){var a=AlignGuideLines;a.verticalLines=a.horizontalLines=[];a.canvas.renderAll()},
enable:function(){this.canvas.on("mouse:down",this.mouseDown).on("object:moving",this.objectMoving).on("before:render",this.beforeRender).on("after:render",this.afterRender).on("mouse:up",this.mouseUp);return this},disable:function(){this.canvas.off("mouse:down",this.mouseDown).off("object:moving",this.objectMoving).off("before:render",this.beforeRender).off("after:render",this.afterRender).off("mouse:up",this.mouseUp);return this}};
/* mousetrap v1.6.5 craig.is/killing/mice */
(function(q,u,c){function v(a,b,g){a.addEventListener?a.addEventListener(b,g,!1):a.attachEvent("on"+b,g)}function z(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return n[a.which]?n[a.which]:r[a.which]?r[a.which]:String.fromCharCode(a.which).toLowerCase()}function F(a){var b=[];a.shiftKey&&b.push("shift");a.altKey&&b.push("alt");a.ctrlKey&&b.push("ctrl");a.metaKey&&b.push("meta");return b}function w(a){return"shift"==a||"ctrl"==a||"alt"==a||
"meta"==a}function A(a,b){var g,d=[];var e=a;"+"===e?e=["+"]:(e=e.replace(/\+{2}/g,"+plus"),e=e.split("+"));for(g=0;g<e.length;++g){var m=e[g];B[m]&&(m=B[m]);b&&"keypress"!=b&&C[m]&&(m=C[m],d.push("shift"));w(m)&&d.push(m)}e=m;g=b;if(!g){if(!p){p={};for(var c in n)95<c&&112>c||n.hasOwnProperty(c)&&(p[n[c]]=c)}g=p[e]?"keydown":"keypress"}"keypress"==g&&d.length&&(g="keydown");return{key:m,modifiers:d,action:g}}function D(a,b){return null===a||a===u?!1:a===b?!0:D(a.parentNode,b)}function d(a){function b(a){a=
a||{};var b=!1,l;for(l in p)a[l]?b=!0:p[l]=0;b||(x=!1)}function g(a,b,t,f,g,d){var l,E=[],h=t.type;if(!k._callbacks[a])return[];"keyup"==h&&w(a)&&(b=[a]);for(l=0;l<k._callbacks[a].length;++l){var c=k._callbacks[a][l];if((f||!c.seq||p[c.seq]==c.level)&&h==c.action){var e;(e="keypress"==h&&!t.metaKey&&!t.ctrlKey)||(e=c.modifiers,e=b.sort().join(",")===e.sort().join(","));e&&(e=f&&c.seq==f&&c.level==d,(!f&&c.combo==g||e)&&k._callbacks[a].splice(l,1),E.push(c))}}return E}function c(a,b,c,f){k.stopCallback(b,
b.target||b.srcElement,c,f)||!1!==a(b,c)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function e(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=z(a);b&&("keyup"==a.type&&y===b?y=!1:k.handleKey(b,F(a),a))}function m(a,g,t,f){function h(c){return function(){x=c;++p[a];clearTimeout(q);q=setTimeout(b,1E3)}}function l(g){c(t,g,a);"keyup"!==f&&(y=z(g));setTimeout(b,10)}for(var d=p[a]=0;d<g.length;++d){var e=d+1===g.length?l:h(f||
A(g[d+1]).action);n(g[d],e,f,a,d)}}function n(a,b,c,f,d){k._directMap[a+":"+c]=b;a=a.replace(/\s+/g," ");var e=a.split(" ");1<e.length?m(a,e,b,c):(c=A(a,c),k._callbacks[c.key]=k._callbacks[c.key]||[],g(c.key,c.modifiers,{type:c.action},f,a,d),k._callbacks[c.key][f?"unshift":"push"]({callback:b,modifiers:c.modifiers,action:c.action,seq:f,level:d,combo:a}))}var k=this;a=a||u;if(!(k instanceof d))return new d(a);k.target=a;k._callbacks={};k._directMap={};var p={},q,y=!1,r=!1,x=!1;k._handleKey=function(a,
d,e){var f=g(a,d,e),h;d={};var k=0,l=!1;for(h=0;h<f.length;++h)f[h].seq&&(k=Math.max(k,f[h].level));for(h=0;h<f.length;++h)f[h].seq?f[h].level==k&&(l=!0,d[f[h].seq]=1,c(f[h].callback,e,f[h].combo,f[h].seq)):l||c(f[h].callback,e,f[h].combo);f="keypress"==e.type&&r;e.type!=x||w(a)||f||b(d);r=l&&"keydown"==e.type};k._bindMultiple=function(a,b,c){for(var d=0;d<a.length;++d)n(a[d],b,c)};v(a,"keypress",e);v(a,"keydown",e);v(a,"keyup",e)}if(q){var n={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",
18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},r={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},C={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},B={option:"alt",command:"meta","return":"enter",
escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p;for(c=1;20>c;++c)n[111+c]="f"+c;for(c=0;9>=c;++c)n[c+96]=c.toString();d.prototype.bind=function(a,b,c){a=a instanceof Array?a:[a];this._bindMultiple.call(this,a,b,c);return this};d.prototype.unbind=function(a,b){return this.bind.call(this,a,function(){},b)};d.prototype.trigger=function(a,b){if(this._directMap[a+":"+b])this._directMap[a+":"+b]({},a);return this};d.prototype.reset=function(){this._callbacks={};
this._directMap={};return this};d.prototype.stopCallback=function(a,b){if(-1<(" "+b.className+" ").indexOf(" mousetrap ")||D(b,this.target))return!1;if("composedPath"in a&&"function"===typeof a.composedPath){var c=a.composedPath()[0];c!==a.target&&(b=c)}return"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable};d.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};d.addKeycodes=function(a){for(var b in a)a.hasOwnProperty(b)&&(n[b]=a[b]);p=null};
d.init=function(){var a=d(u),b;for(b in a)"_"!==b.charAt(0)&&(d[b]=function(b){return function(){return a[b].apply(a,arguments)}}(b))};d.init();q.Mousetrap=d;"undefined"!==typeof module&&module.exports&&(module.exports=d);"function"===typeof define&&define.amd&&define(function(){return d})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null);

'use strict';fabric.Borderedimage=fabric.util.createClass(fabric.Image,{type:"borderedimage",frames:null,shapeHash:null,panning:!1,letterPaths:{A:["3,0 7,0 10,10 7,10 6.5,8 3.5,8 3,10 0,10 3,0","5,2 6,5 4,5 5,2"],B:["0,0 8.5,0 10,2 10,4 9.5,5 10,6 10,8 8.5,10 0,10 0,0","3,2 6.5,2 7,3 6.5,4 3,4 3,2","3,6 6.5,6 7,7 6.5,8 3,8 3,6"],C:["2,0 8.5,0 10,2 10,3 7,3 6.5,2 3.7,2 3,3 3,7 3.7,8 6.5,8 7,7 10,7 10,8 8.5,10 2,10 0,7 0,3"],D:["0,0 8,0 10,3 10,7 8,10 0,10 0,0","3,2 6,2 7,3.5 7,6.5 6,8 3,8"],E:["0,0 10,0 10,2 3,2 3,4 7,4 7,6 3,6 3,8 10,8 10,10 0,10"],
F:["0,0 10,0 10,2 3,2 3,4 7,4 7,6 3,6 3,10 0,10"],G:["2,0 8.5,0 10,2 10,3 7,3 6.3,2 3.7,2 3,3 3,7 3.7,8 6.3,8 7,7 7,6 6,6 6,5 10,5 10,8 8.5,10 2,10 0,7 0,3"],H:["0,0 3,0 3,3 7,3 7,0 10,0 10,10 7,10 7,6 3,6 3,10 0,10"],I:["3.5,0 6.5,0 6.5,10 3.5,10"],J:["5.5,0 8.5,0 8.5,8 6.5,10 3.5,10 1.5,8 1.5,7 4.5,7 4.5,8 5.5,8"],K:["0,0 3,0 3,3 7,0 10,0 10,1 6.5,3.5 10,9 10,10 7.5,10 4.3,4.9 3,6 3,10 0,10"],L:["0,0 3,0 3,8 10,8 10,10 0,10"],M:["0,0 3,0 5,3 7,0 10,0 10,10 7,10 7,4 5,7 3,4 3,10 0,10"],N:["0,0 3,0 7,5 7,0 10,0 10,10 7,10 3,5 3,10 0,10"],
O:["2,0 8,0 10,3 10,7 8,10 2,10 0,7 0,3 2,0","4,2 6,2 7,3.5 7,6.5 6,8 4,8 3,6.5 3,3.5"],0:["2,0 8,0 10,3 10,7 8,10 2,10 0,7 0,3 2,0","4,2 6,2 7,3.5 7,6.5 6,8 4,8 3,6.5 3,3.5"],P:["0,0 8,0 10,3 8,6 3,6 3,10 0,10 0,0","3,2 6,2 6.5,3 6,4 3,4"],Q:["2,0 8,0 10,3 10,7 9.5,7.5 10,8 10,10 8,10 7.5,9.5 7,10 2,10 0,7 0,3 2,0","4,2 6,2 7,3.5 7,6.5 6,8 4,8 3,6.5 3,3.5"],R:["0,0 8,0 10,3 8,6 10,10 7,10 5,6 3,6 3,10 0,10 0,0","3,2 6,2 6.5,3 6,4 3,4"],S:["1.5,0 10,0 10,2 4,2 3.5,3 4,4 8.5,4 10,6 10,8 8.5,10 0,10 0,8 6,8 6.5,7 6,6 1.5,6 0,4 0,2"],
T:["0,0 10,0 10,2 6.5,2 6.5,10 3.5,10 3.5,2 0,2"],U:["0,0 3,0 3,7 4,8 6,8 7,7 7,0 10,0 10,8 8.5,10 1.5,10 0,8"],V:["0,0 2.5,0 5,8 7.5,0 10,0 7,10 3,10"],W:["0,0 2.5,0 3.5,6 4.5,1 5.5,1 6.5,6 7.5,0 10,0 8,10 5.5,10 5,7.6 4.5,10 2,10"],X:["0,0 3,0 5,3 7,0 10,0 6.5,5 10,10 7,10 5,7 3,10 0,10, 3.5,5"],Y:["0,0 3,0 5,3 7,0 10,0 6.5,5 6.5,10 3.5,10 3.5,5"],Z:["0,0 10,0 10,2 4,8 10,8 10,10 0,10 0,8 6,2 0,2"],1:["3.5,0 6.5,0 6.5,10 3.5,10 3.5,3 2,3"],2:["1.5,0 8.5,0 10,2 10,3 4.5,8 10,8 10,10 0,10 0,8 5.5,3 5,2 4,2 3.5,3 0,3 0,2"],
3:["1.5,0 8.5,0 10,2 10,8 8.5,10 1.5,10 0,8 0,7 3,7 3.5,8 6.5,8 7,7 7,6 5,6 5,4 7,4 7,3 6.5,2 3.5,2 3,3 0,3 0,2"],4:["2,0 9,0 9,5 10,5 10,7 9,7 9,10 6,10 6,7 0,7 0,3.5 2,0","4.5,2 6,2 6,5 3,5"],5:["0,0 10,0 10,2 3,2 3,4 9,4 10,5 10,8 8.5,10 1,10 0,9 0,7 3.5,7 4,8 6,8 6.5,7 6,6 0,6"],6:["1.5,0 8.5,0 10,2 10,3 7,3 6.5,2 3.5,2 3,3 3.5,4 9,4 10,5 10,8 8.5,10 1.5,10 0,8 0,2 1.5,0","3.5,6 6.5,6 7,7 6.5,8 3.5,8 3,7"],7:["0,0 10,0 10,1.5 4,10 0,10 5,3 0,3"],8:["1.5,0 8.5,0 10,2 10,4 9.5,5 10,6 10,8 8.5,10 1.5,10 0,8 0,6 0.5,5 0,4 0,2 1.5,0",
"3.5,2 6.5,2 7,3 6.5,4 3.5,4 3,3 3.5,2","3.5,6 6.5,6 7,7 6.5,8 3.5,8 3,7"],9:["1.5,0 8.5,0 10,2 10,8 8.5,10 1.5,10 0,8 0,7 3,7 3.5,8 6.5,8 7,7 6.5,6 1,6 0,5 0,2 1.5,0","3.5,2 6.5,2 7,3 6.5,4 3.5,4 3,3 3.5,2"],"#":["2,0 4,0 4,2 6,2 6,0 8,0 8,2 10,2 10,4 8,4 8,6 10,6 10,8 8,8 8,10 6,10 6,8 4,8 4,10 2,10 2,8 0,8 0,6 2,6 2,4 0,4 0,2 2,2 2,0","4,4 6,4 6,6 4,6"]},initialize:function(a,b){this.cacheProperties.push("ppColor","ppWidth","blurWidth","shape","zoomLevel","minimized","orgWidth","orgHeight","cx",
"cy","cw","ch");b||(b={});b.initialWidth=b.width;b.initialHeight=b.height;b.ppColor=b.ppColor||"#fff";b.ppWidth=void 0===b.ppWidth?10:b.ppWidth;b.blurWidth=void 0===b.blurWidth?0:b.blurWidth;b.orgWidth=b.orgWidth||a.width;b.orgHeight=b.orgHeight||a.height;b.zoomLevel=b.zoomLevel||0;b.minimized=b.minimized||!1;b.shape=b.shape||"rectangle";b.selected=b.selected||!1;b.cx=b.cx||0;b.cy=b.cy||0;b.cw=b.cw||b.orgWidth;b.ch=b.ch||b.orgHeight;this.callSuper("initialize",a,b);var e,f,g,k,l,d;this.on("scaling",
this.setCenter).on("mousedown",function(c){c.e.altKey&&(this.panning=this.lockMovementX=this.lockMovementY=!0,this.hasControls=!1,e=c.pointer.x,f=c.pointer.y,g=this.cx,k=this.cy,l=this.cw/this.getScaledWidth(),d=this.ch/this.getScaledHeight())}).on("mousemove",function(c){this.panning&&(this.cx=g-(c.pointer.x-e)*l,this.cy=k-(c.pointer.y-f)*d,this._checkBoundaries(),this.canvas.requestRenderAll())}).on("mouseup",function(c){this.hasControls=!0;this.panning=this.lockMovementX=this.lockMovementY=!1;
this.canvas.requestRenderAll()});this.set("shadow",new fabric.Shadow("0 0 4px rgba(0,0,0,0.5)"))},deMinimize:function(){if(this.minimized=!this.minimized)this.height=this.width=50,this.ppWidth=0;else{var a=this.canvas.width,b=this.canvas.height;this.scaleX=this.scaleY=1;this.ppWidth=10;this.orgWidth>a||this.orgHeight>b?(a=1.1*Math.max(this.orgWidth/a,this.orgHeight/b),this.width=this.orgWidth/a,this.height=this.orgHeight/a):(this.width=this.orgWidth,this.height=this.orgHeight);this.centerH().centerV().setCoords()}this.canvas.requestRenderAll()},
changeOrientation:function(){var a=fabric.util.createCanvasElement(),b=a.getContext("2d"),e=a.width=this.orgHeight,f=a.height=this.orgWidth;b.translate(e,f/e);b.rotate(Math.PI/2);b.drawImage(this._originalElement,0,0);this.setElement(a,{initialWidth:this.initialHeight,initialHeight:this.initialWidth,ppColor:this.ppColor,ppWidth:this.ppWidth,blurWidth:this.blurWidth,orgWidth:this.orgHeight,orgHeight:this.orgWidth,zoomLevel:this.zoomLevel,minimized:this.minimized,shape:this.shape,selected:this.selected,
cx:this.cy,cy:this.cx,cw:this.ch,ch:this.cw,height:this.width,width:this.height});this.canvas.requestRenderAll()},drawShape:function(a,b,e,f,g){function k(m){var p=d/10,u=c/10;m=w.letterPaths[m];var q=!1;a.beginPath();for(var h=0;h<m.length;h++){var n=m[h].split(" ");for(var r=0;r<n.length;r++){var t=n[r].split(",");var v=t[0];t=t[1];q?a.lineTo(p*v,u*t):(a.moveTo(p*v,u*t),q=!0)}q=!1}a.closePath()}function l(m,p,u,q){var h;a.save();a.beginPath();a.translate(d/2,c/2);a.moveTo(0,0-p);for(h=1;h<2*m;h++){var n=
0==h%2?p:u;var r=n*Math.sin(h*Math.PI/m)*q;n=-1*n*Math.cos(h*Math.PI/m);a.lineTo(r,n)}a.closePath();a.restore()}var d=f||this.width,c=g||this.height;f=+this.ppWidth;var w=this;if(/^letter\-(.{1})/.test(b))k(RegExp.$1);else switch(b){case "hexagon1":a.beginPath();a.moveTo(1*d/4,0);a.lineTo(3*d/4,0);a.lineTo(0+d,c/2);a.lineTo(3*d/4,0+c);a.lineTo(1*d/4,0+c);a.lineTo(0,c/2);a.closePath();break;case "hexagon2":a.beginPath();a.moveTo(1*d/2,0);a.lineTo(0+d,1*c/4);a.lineTo(0+d,3*c/4);a.lineTo(1*d/2,0+c);
a.lineTo(0,3*c/4);a.lineTo(0,1*c/4);a.closePath();break;case "octagon1":a.beginPath();a.moveTo(.3*d,0);a.lineTo(.7*d,0);a.lineTo(0+d,.3*c);a.lineTo(0+d,.7*c);a.lineTo(.7*d,0+c);a.lineTo(.3*d,0+c);a.lineTo(0,.7*c);a.lineTo(0,.3*c);a.closePath();break;case "octagon2":a.beginPath();a.moveTo(.5*d,0);a.lineTo(.85*d,.15*c);a.lineTo(0+d,.5*c);a.lineTo(.85*d,.85*c);a.lineTo(.5*d,0+c);a.lineTo(.15*d,.85*c);a.lineTo(0,.5*c);a.lineTo(.15*d,.15*c);a.closePath();break;case "circle":a.beginPath();a.ellipse(d/2,
c/2,d/2,c/2,0,2*Math.PI,!1);break;case "diamond":a.beginPath();a.moveTo(d/2,0);a.lineTo(d,c/2);a.lineTo(d/2,c);a.lineTo(0,c/2);a.closePath();break;case "heart":a.save();b=d/110;g=c/95;a.beginPath();a.translate(d/2,c/2);a.moveTo(b,-33*g);a.bezierCurveTo(0,-36*g,-5*b,-47*g,-25*b,-47*g);a.bezierCurveTo(-55*b,-47*g,-55*b,-10.5*g,-55*b,-10.5*g);a.bezierCurveTo(-55*b,7*g,-35*b,29*g,0,47*g);a.bezierCurveTo(35*b,29*g,55*b,7*g,55*b,-10.5*g);a.bezierCurveTo(55*b,-10.5*g,55*b,-47*g,25*b,-47*g);a.bezierCurveTo(10*
b,-47*g,0,-36*g,0,-33*g);a.restore();break;case "triangle-t":a.beginPath();a.moveTo(d/2,0);a.lineTo(d,c);a.lineTo(0,c);a.closePath();break;case "triangle-b":a.beginPath();a.moveTo(0,0);a.lineTo(d,0);a.lineTo(d/2,c);a.closePath();break;case "triangle-l":a.beginPath();a.moveTo(d,0);a.lineTo(d,c);a.lineTo(0,c/2);a.closePath();break;case "triangle-r":a.beginPath();a.moveTo(0,0);a.lineTo(0,c);a.lineTo(d,c/2);a.closePath();break;case "triangle-lt":a.beginPath();a.moveTo(0,0);a.lineTo(d,0);a.lineTo(0,c);
a.closePath();break;case "triangle-rb":a.beginPath();a.moveTo(d,0);a.lineTo(d,c);a.lineTo(0,c);a.closePath();break;case "triangle-rt":a.beginPath();a.moveTo(0,0);a.lineTo(d,0);a.lineTo(d,c);a.closePath();break;case "triangle-lb":a.beginPath();a.moveTo(0,0);a.lineTo(0,c);a.lineTo(d,c);a.closePath();break;case "star5":b=c;l(5,b/2,b/4,d/c);break;case "star6":b=c;l(6,b/2,b/3.5,d/c);break;case "star12":b=c;l(12,b/2,b/2.8,d/c);break;case "star24":b=c;l(24,b/2,b/2.3,d/c);break;case "roundRect":b=2*f;a.beginPath();
a.moveTo(0+b,0);a.lineTo(0+d-b,0);a.quadraticCurveTo(0+d,0,0+d,0+b);a.lineTo(0+d,0+c-b);a.quadraticCurveTo(0+d,0+c,0+d-b,0+c);a.lineTo(0+b,0+c);a.quadraticCurveTo(0,0+c,0,0+c-b);a.lineTo(0,0+b);a.quadraticCurveTo(0,0,0+b,0);a.closePath();break;default:a.beginPath(),a.rect(0,0,d,c)}e&&0<f&&(a.save(),a.scale(1/this.scaleX,1/this.scaleY),a.lineCap="square",a.lineWidth=2*f,a.strokeStyle=this.ppColor,a.stroke(),a.restore());a.clip("evenodd")},getBlurCanvas:function(){var a=this.canvas.viewportTransform,
b=this.blurWidth,e=fabric.util.createCanvasElement(),f=e.getContext("2d"),g=this.width*a[0],k=this.height*a[3];e.width=g;e.height=k;f.scale(a[0],a[3]);f.fillStyle="#000";f.shadowBlur=b*a[0];f.shadowColor="#000";f.shadowOffsetX=g+b*a[0];f.shadowOffsetY=k+b*a[3];f.save();f.translate(-this.width,-this.height);this.drawShape(f,this.shape,!1,this.width-2*b,this.height-2*b);f.restore();f.fill("evenodd");f.globalCompositeOperation="source-atop";f.drawImage(this._element,this.cx,this.cy,this.cw,this.ch,0,
0,this.width,this.height);return e},_render:function(a){if(this.frames&&this.frames[this.shape]){var b=this.frames[this.shape],e=b.width/this.width,f=b.height/this.height;a.translate(this.width/-2,this.height/-2);a.drawImage(this._element,this.cx,this.cy,this.cw,this.ch,b.gap.x/e,b.gap.y/f,b.gap.w/e,b.gap.h/f);this.selected&&(a.fillStyle="rgba(61,162,244,0.5)",a.fillRect(b.gap.x/e,b.gap.y/f,b.gap.w/e,b.gap.h/f));a.drawImage(b.img,0,0,b.width,b.height,0,0,this.width,this.height)}else b=0<this.blurWidth?
this.getBlurCanvas():this._element,a.translate(this.width/-2,this.height/-2),this.drawShape(a,this.shape,!0),a.shadowColor="",a.shadowBlur=0,0==this.blurWidth?a.drawImage(b,this.cx,this.cy,this.cw,this.ch,0,0,this.width,this.height):a.drawImage(b,0,0,this.width,this.height),this.selected&&(a.fillStyle="rgba(61,162,244,0.5)",a.fillRect(0,0,this.width,this.height)),this.minimized&&(a.strokeStyle="#f00",a.lineWidth=5,a.beginPath(),a.moveTo(0,0),a.lineTo(this.width,this.height),a.moveTo(this.width,0),
a.lineTo(0,this.height),a.closePath(),a.stroke());a=this.shape+this.ppWidth+this.ppColor+this.blurWidth+this.cx+this.cy+this.zoomLevel;a!=this.shapeHash&&(this.shapeHash=a,this.canvas&&this.canvas.fire("object:modified",{target:this}))},setCenter:function(){var a=this.getScaledWidth(),b=this.getScaledHeight();a/b>=this.orgWidth/this.orgHeight?(this.cw=this.orgWidth,this.ch=this.orgWidth/(a/b),this.cx=0,this.cy=(this.orgHeight-this.ch)/2):(this.cw=this.orgHeight/(b/a),this.ch=this.orgHeight,this.cx=
(this.orgWidth-this.cw)/2,this.cy=0);this.zoomLevel=0;return this},_checkBoundaries:function(){this.cw>this.orgWidth&&(this.cw=this.orgWidth);this.ch>this.orgHeight&&(this.ch=this.orgHeight);1>=this.cw&&(this.cw=1);1>=this.ch&&(this.ch=1);0>this.cx&&(this.cx=0);0>this.cy&&(this.cy=0);this.cx>this.orgWidth-this.cw&&(this.cx=this.orgWidth-this.cw);this.cy>this.orgHeight-this.ch&&(this.cy=this.orgHeight-this.ch)},_doZoom:function(a){var b=this.orgWidth/100*a,e=b/(this.getScaledWidth()/this.getScaledHeight());
this.zoomLevel+=a;99<this.zoomLevel?(this.cw=this.ch=1,this.zoomLevel=100):1>this.zoomLevel?(this.setCenter(),this.zoomLevel=0):(this.cw-=b,this.ch-=e,this.cx+=b/2,this.cy+=e/2);this.cw=Math.round(this.cw);this.ch=Math.round(this.ch);this.cx=Math.round(this.cx);this.cy=Math.round(this.cy)},zoomBy:function(a,b,e){var f=this.width/100,g=this.height/100;a&&(this.cx+=a*f);b&&(this.cy+=b*g);e&&this._doZoom(e);this.cx=Math.round(this.cx);this.cy=Math.round(this.cy);this._checkBoundaries()},zoomTo:function(a,
b,e){a&&(this.cx=a/100*(this.orgWidth-this.cw));b&&(this.cy=b/100*(this.orgHeight-this.ch));(e||0===e)&&this._doZoom(e-this.zoomLevel);this._checkBoundaries()},reset:function(){this.set({minimized:!1,scaleX:1,scaleY:1,width:this.initialWidth,height:this.initialHeight,opacity:1,ppWidth:10,blurWidth:0,ppColor:"#fff",angle:0,zoomLevel:0,cx:0,cy:0,cw:this.orgWidth,ch:this.orgHeight,shape:"rectangle",skewX:0,skewY:0,flipX:!1,flipY:!1});this.setCoords();this._element=this._originalElement;this.setCenter();
this.canvas.requestRenderAll()},toObject:function(a){var b=[];this.filters.forEach(function(e){e&&b.push(e.toObject())});a=fabric.util.object.extend(this.callSuper("toObject","crossOrigin cropX cropY shape orgWidth orgHeight ppColor ppWidth blurWidth zoomLevel minimized cx cy cw ch".split(" ").concat(a)),{src:this.getSrc(),filters:b});this.resizeFilter&&(a.resizeFilter=this.resizeFilter.toObject());return a}});
fabric.Borderedimage.fromObject=function(a,b){var e=fabric.util.object.clone(a);fabric.util.loadImage(e.src,function(f,g){g?b&&b(null,g):fabric.Borderedimage.prototype._initFilters.call(e,e.filters,function(k){e.filters=k||[];fabric.Borderedimage.prototype._initFilters.call(e,[e.resizeFilter],function(l){e.resizeFilter=l[0];fabric.util.enlivenObjects([e.clipPath],function(d){e.clipPath=d[0];d=new fabric.Borderedimage(f,e);b(d)})})})},null,e.crossOrigin)};

var Scroller=function(a){this.config=Scroller.mergeSettings(a);this.$scroller=$(this.config.element);if(0==this.$scroller.length)throw Error("Scroller: Element not found!");this.$slides=$(this.config.slides);if(0==this.$slides.length)throw Error("Scroller: Slides not found!");this.resizeHandler=this.resizeHandler.bind(this);var b=this;this.$scroller.on("refresh",function(){b.resizeHandler()});this.init();this.resizeHandler()};
Scroller.prototype.init=function(){var a=this;this.config.showPrevNext&&(this.$prevBtn=$("<div>",{"class":"arrow prev"}).on("click",function(){var b=$(".slide:first-child",a.$slides).outerWidth(!0);a.$slides[0].scrollLeft-=b}).on("dblclick",function(){a.$slides[0].scrollLeft=0}).appendTo(this.$scroller),this.$nextBtn=$("<div>",{"class":"arrow next"}).on("click",function(){var b=$(".slide:first-child",a.$slides).outerWidth(!0);a.$slides[0].scrollLeft+=b}).on("dblclick",function(){a.$slides[0].scrollLeft=
a.$slides[0].scrollWidth}).appendTo(this.$scroller),window.addEventListener("resize",this.resizeHandler),window.addEventListener("orientationchange",this.resizeHandler),this.$slides[0].addEventListener("scroll",this.resizeHandler));this.config.oninit.call(this)};
Scroller.prototype.resizeHandler=function(){var a=this.$slides[0],b=this.$prevBtn,c=this.$nextBtn;0!=a.scrollLeft||b.hasClass("disabled")?0<a.scrollLeft&&b.hasClass("disabled")&&b.removeClass("disabled"):b.addClass("disabled");a.scrollLeft+a.offsetWidth!=a.scrollWidth||c.hasClass("disabled")?a.scrollLeft+a.offsetWidth<a.scrollWidth&&c.hasClass("disabled")&&c.removeClass("disabled"):c.addClass("disabled")};
Scroller.prototype.destroy=function(){this.config.showPrevNext&&(this.$nextBtn.remove(),this.$prevBtn.remove(),window.removeEventListener("resize",this.resizeHandler),window.removeEventListener("orientationchange",this.resizeHandler),this.$slides[0].removeEventListener("scroll",this.resizeHandler))};Scroller.mergeSettings=function(a){var b={element:null,slides:null,showPrevNext:!0,oninit:function(){}},c;for(c in a)b[c]=a[c];return b};
!function(c){"use strict";var t=c.URL||c.webkitURL;function f(e){return!!t&&t.createObjectURL(e)}function i(e){return!!t&&t.revokeObjectURL(e)}function u(e,t){!e||"blob:"!==e.slice(0,5)||t&&t.noRevoke||i(e)}function d(e,t,i,a){if(!c.FileReader)return!1;var n=new FileReader;n.onload=function(){t.call(n,this.result)},i&&(n.onabort=n.onerror=function(){i.call(n,this.error)});var r=n[a||"readAsDataURL"];return r?(r.call(n,e),n):void 0}function g(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}function m(s,e,l){function t(i,a){var n,r=document.createElement("img");function o(e,t){i!==a?e instanceof Error?a(e):((t=t||{}).image=e,i(t)):i&&i(e,t)}function e(e,t){t&&c.console&&console.log(t),e&&g("Blob",e)?n=f(s=e):(n=s,l&&l.crossOrigin&&(r.crossOrigin=l.crossOrigin)),r.src=n}return r.onerror=function(e){u(n,l),a&&a.call(r,e)},r.onload=function(){u(n,l);var e={originalWidth:r.naturalWidth||r.width,originalHeight:r.naturalHeight||r.height};try{m.transform(r,l,o,s,e)}catch(t){a&&a(t)}},"string"==typeof s?(m.requiresMetaData(l)?m.fetchBlob(s,e,l):e(),r):g("Blob",s)||g("File",s)?(n=f(s))?(r.src=n,r):d(s,function(e){r.src=e},a):void 0}return c.Promise&&"function"!=typeof e?(l=e,new Promise(t)):t(e,e)}m.requiresMetaData=function(e){return e&&e.meta},m.fetchBlob=function(e,t){t()},m.transform=function(e,t,i,a,n){i(e,n)},m.global=c,m.readFile=d,m.isInstanceOf=g,m.createObjectURL=f,m.revokeObjectURL=i,"function"==typeof define&&define.amd?define(function(){return m}):"object"==typeof module&&module.exports?module.exports=m:c.loadImage=m}("undefined"!=typeof window&&window||this),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):"object"==typeof module&&module.exports?e(require("./load-image")):e(window.loadImage)}(function(E){"use strict";var r=E.transform;E.createCanvas=function(e,t,i){if(i&&E.global.OffscreenCanvas)return new OffscreenCanvas(e,t);var a=document.createElement("canvas");return a.width=e,a.height=t,a},E.transform=function(e,t,i,a,n){r.call(E,E.scale(e,t,n),t,i,a,n)},E.transformCoordinates=function(){},E.getTransformedOptions=function(e,t){var i,a,n,r,o=t.aspectRatio;if(!o)return t;for(a in i={},t)Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i.crop=!0,o<(n=e.naturalWidth||e.width)/(r=e.naturalHeight||e.height)?(i.maxWidth=r*o,i.maxHeight=r):(i.maxWidth=n,i.maxHeight=n/o),i},E.drawImage=function(e,t,i,a,n,r,o,s,l){var c=t.getContext("2d");return!1===l.imageSmoothingEnabled?(c.msImageSmoothingEnabled=!1,c.imageSmoothingEnabled=!1):l.imageSmoothingQuality&&(c.imageSmoothingQuality=l.imageSmoothingQuality),c.drawImage(e,i,a,n,r,0,0,o,s),c},E.requiresCanvas=function(e){return e.canvas||e.crop||!!e.aspectRatio},E.scale=function(e,t,i){t=t||{},i=i||{};var a,n,r,o,s,l,c,f,u,d,g,m,h=e.getContext||E.requiresCanvas(t)&&!!E.global.HTMLCanvasElement,p=e.naturalWidth||e.width,A=e.naturalHeight||e.height,b=p,y=A;function S(){var e=Math.max((r||b)/b,(o||y)/y);1<e&&(b*=e,y*=e)}function v(){var e=Math.min((a||b)/b,(n||y)/y);e<1&&(b*=e,y*=e)}if(h&&(c=(t=E.getTransformedOptions(e,t,i)).left||0,f=t.top||0,t.sourceWidth?(s=t.sourceWidth,t.right!==undefined&&t.left===undefined&&(c=p-s-t.right)):s=p-c-(t.right||0),t.sourceHeight?(l=t.sourceHeight,t.bottom!==undefined&&t.top===undefined&&(f=A-l-t.bottom)):l=A-f-(t.bottom||0),b=s,y=l),a=t.maxWidth,n=t.maxHeight,r=t.minWidth,o=t.minHeight,h&&a&&n&&t.crop?(g=s/l-(b=a)/(y=n))<0?(l=n*s/a,t.top===undefined&&t.bottom===undefined&&(f=(A-l)/2)):0<g&&(s=a*l/n,t.left===undefined&&t.right===undefined&&(c=(p-s)/2)):((t.contain||t.cover)&&(r=a=a||r,o=n=n||o),t.cover?(v(),S()):(S(),v())),h){if(1<(u=t.pixelRatio)&&(!e.style.width||Math.floor(parseFloat(e.style.width,10))!==Math.floor(p/u))&&(b*=u,y*=u),E.orientationCropBug&&!e.getContext&&(c||f||s!==p||l!==A)&&(g=e,e=E.createCanvas(p,A,!0),E.drawImage(g,e,0,0,p,A,p,A,t)),0<(d=t.downsamplingRatio)&&d<1&&b<s&&y<l)for(;b<s*d;)m=E.createCanvas(s*d,l*d,!0),E.drawImage(e,m,c,f,s,l,m.width,m.height,t),f=c=0,s=m.width,l=m.height,e=m;return m=E.createCanvas(b,y),E.transformCoordinates(m,t,i),1<u&&(m.style.width=m.width/u+"px"),E.drawImage(e,m,c,f,s,l,b,y,t).setTransform(1,0,0,1,0,0),m}return e.width=b,e.height=y,e}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):"object"==typeof module&&module.exports?e(require("./load-image")):e(window.loadImage)}(function(o){"use strict";var s=o.global,l=o.transform,a=s.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),m=s.ArrayBuffer&&ArrayBuffer.prototype.slice||function(e,t){t=t||this.byteLength-e;var i=new Uint8Array(this,e,t),a=new Uint8Array(t);return a.set(i),a.buffer},h={jpeg:{65505:[],65517:[]}};function c(t,e,u,d){var g=this;function i(c,f){if(!(s.DataView&&a&&t&&12<=t.size&&"image/jpeg"===t.type))return c(d);var e=u.maxMetaDataSize||262144;o.readFile(a.call(t,0,e),function(e){var t=new DataView(e);if(65496!==t.getUint16(0))return f(new Error("Invalid JPEG file: Missing JPEG marker."));for(var i,a,n,r,o=2,s=t.byteLength-4,l=o;o<s&&(65504<=(i=t.getUint16(o))&&i<=65519||65534===i);){if(o+(a=t.getUint16(o+2)+2)>t.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if((n=h.jpeg[i])&&!u.disableMetaDataParsers)for(r=0;r<n.length;r+=1)n[r].call(g,t,o,a,d,u);l=o+=a}!u.disableImageHead&&6<l&&(d.imageHead=m.call(e,0,l)),c(d)},f,"readAsArrayBuffer")||c(d)}return u=u||{},s.Promise&&"function"!=typeof e?(d=u=e||{},new Promise(i)):(d=d||{},i(e,e))}function n(e,t,i){return e&&t&&i?new Blob([i,a.call(e,t.byteLength)],{type:"image/jpeg"}):null}o.transform=function(t,i,a,n,r){o.requiresMetaData(i)?c(n,function(e){e!==r&&(s.console&&console.log(e),e=r),l.call(o,t,i,a,n,e)},i,r=r||{}):l.apply(o,arguments)},o.blobSlice=a,o.bufferSlice=m,o.replaceHead=function(t,i,a){var e={maxMetaDataSize:256,disableMetaDataParsers:!0};if(!a&&s.Promise)return c(t,e).then(function(e){return n(t,e.imageHead,i)});c(t,function(e){a(n(t,e.imageHead,i))},e)},o.parseMetaData=c,o.metaDataParsers=h}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):"object"==typeof module&&module.exports?e(require("./load-image")):e(window.loadImage)}(function(e){"use strict";var r=e.global;r.fetch&&r.Request&&r.Response&&r.Response.prototype.blob?e.fetchBlob=function(e,t,i){function a(e){return e.blob()}if(r.Promise&&"function"!=typeof t)return fetch(new Request(e,t)).then(a);fetch(new Request(e,i)).then(a).then(t)["catch"](function(e){t(null,e)})}:r.XMLHttpRequest&&""===(new XMLHttpRequest).responseType&&(e.fetchBlob=function(e,t,n){function i(t,i){n=n||{};var a=new XMLHttpRequest;a.open(n.method||"GET",e),n.headers&&Object.keys(n.headers).forEach(function(e){a.setRequestHeader(e,n.headers[e])}),a.withCredentials="include"===n.credentials,a.responseType="blob",a.onload=function(){t(a.response)},a.onerror=a.onabort=a.ontimeout=function(e){t===i?i(null,e):i(e)},a.send(n.body)}return r.Promise&&"function"!=typeof t?(n=t,new Promise(i)):i(t,t)})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-scale","./load-image-meta"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-scale"),require("./load-image-meta")):e(window.loadImage)}(function(h){"use strict";var t,i,n=h.transform,a=h.requiresCanvas,r=h.requiresMetaData,f=h.transformCoordinates,p=h.getTransformedOptions;function o(e,t){var i=e&&e.orientation;return!0===i&&!h.orientation||1===i&&h.orientation||(!t||h.orientation)&&1<i&&i<9}function A(e,t){return e!==t&&(1===e&&1<t&&t<9||1<e&&e<9)}function b(e,t){if(1<t&&t<9)switch(e){case 2:case 4:return 4<t;case 5:case 7:return t%2==0;case 6:case 8:return 2===t||4===t||5===t||7===t}}(t=h).global.document&&((i=document.createElement("img")).onload=function(){var e;t.orientation=2===i.width&&3===i.height,t.orientation&&((e=t.createCanvas(1,1,!0).getContext("2d")).drawImage(i,1,1,1,1,0,0,1,1),t.orientationCropBug="255,255,255,255"!==e.getImageData(0,0,1,1).data.toString())},i.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k="),h.requiresCanvas=function(e){return o(e)||a.call(h,e)},h.requiresMetaData=function(e){return o(e,!0)||r.call(h,e)},h.transform=function(e,t,r,i,a){n.call(h,e,t,function(e,t){var i,a,n;!t||4<(i=h.orientation&&t.exif&&t.exif.get("Orientation"))&&i<9&&(a=t.originalWidth,n=t.originalHeight,t.originalWidth=n,t.originalHeight=a),r(e,t)},i,a)},h.getTransformedOptions=function(e,t,i){var a=p.call(h,e,t),n=i.exif&&i.exif.get("Orientation"),r=a.orientation,o=h.orientation&&n;if(!0===r&&(r=n),!A(r,o))return a;var s,l,c=a.top,f=a.right,u=a.bottom,d=a.left,g={};for(var m in a)Object.prototype.hasOwnProperty.call(a,m)&&(g[m]=a[m]);if((4<(g.orientation=r)&&!(4<o)||r<5&&4<o)&&(g.maxWidth=a.maxHeight,g.maxHeight=a.maxWidth,g.minWidth=a.minHeight,g.minHeight=a.minWidth,g.sourceWidth=a.sourceHeight,g.sourceHeight=a.sourceWidth),1<o){switch(o){case 2:f=a.left,d=a.right;break;case 3:c=a.bottom,f=a.left,u=a.top,d=a.right;break;case 4:c=a.bottom,u=a.top;break;case 5:c=a.left,f=a.bottom,u=a.right,d=a.top;break;case 6:c=a.left,f=a.top,u=a.right,d=a.bottom;break;case 7:c=a.right,f=a.top,u=a.left,d=a.bottom;break;case 8:c=a.right,f=a.bottom,u=a.left,d=a.top}b(r,o)&&(s=c,l=f,c=u,f=d,u=s,d=l)}switch(g.top=c,g.right=f,g.bottom=u,g.left=d,r){case 2:g.right=d,g.left=f;break;case 3:g.top=u,g.right=d,g.bottom=c,g.left=f;break;case 4:g.top=u,g.bottom=c;break;case 5:g.top=d,g.right=u,g.bottom=f,g.left=c;break;case 6:g.top=f,g.right=u,g.bottom=d,g.left=c;break;case 7:g.top=f,g.right=c,g.bottom=d,g.left=u;break;case 8:g.top=d,g.right=c,g.bottom=f,g.left=u}return g},h.transformCoordinates=function(e,t,i){f.call(h,e,t,i);var a=t.orientation,n=h.orientation&&i.exif&&i.exif.get("Orientation");if(A(a,n)){var r=e.getContext("2d"),o=e.width,s=e.height,l=o,c=s;switch((4<a&&!(4<n)||a<5&&4<n)&&(e.width=s,e.height=o),4<a&&(l=s,c=o),n){case 2:r.translate(l,0),r.scale(-1,1);break;case 3:r.translate(l,c),r.rotate(Math.PI);break;case 4:r.translate(0,c),r.scale(1,-1);break;case 5:r.rotate(-.5*Math.PI),r.scale(-1,1);break;case 6:r.rotate(-.5*Math.PI),r.translate(-l,0);break;case 7:r.rotate(-.5*Math.PI),r.translate(-l,c),r.scale(1,-1);break;case 8:r.rotate(.5*Math.PI),r.translate(0,-c)}switch(b(a,n)&&(r.translate(l,c),r.rotate(Math.PI)),a){case 2:r.translate(o,0),r.scale(-1,1);break;case 3:r.translate(o,s),r.rotate(Math.PI);break;case 4:r.translate(0,s),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-s);break;case 7:r.rotate(.5*Math.PI),r.translate(o,-s),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-o,0)}}}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-meta")):e(window.loadImage)}(function(r){"use strict";function h(e){e&&(Object.defineProperty(this,"map",{value:this.ifds[e].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[e]||{}}))}h.prototype.ifds={ifd1:{name:"Thumbnail",map:h.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965}},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},h.prototype.get=function(e){return this[e]||this[this.map[e]]};var m={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,i){return e.getUint16(t,i)},size:2},4:{getValue:function(e,t,i){return e.getUint32(t,i)},size:4},5:{getValue:function(e,t,i){return e.getUint32(t,i)/e.getUint32(t+4,i)},size:8},9:{getValue:function(e,t,i){return e.getInt32(t,i)},size:4},10:{getValue:function(e,t,i){return e.getInt32(t,i)/e.getInt32(t+4,i)},size:8}};function p(e,t,i){return(!e||e[i])&&(!t||!0!==t[i])}function A(e,t,i,a,n,r,o,s){var l,c,f,u,d,g;if(i+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((c=i+2+12*(l=e.getUint16(i,a)))+4>e.byteLength)){for(f=0;f<l;f+=1)u=i+2+12*f,p(o,s,d=e.getUint16(u,a))&&(g=function(e,t,i,a,n,r){var o,s,l,c,f,u,d=m[a];if(d){if(!((s=4<(o=d.size*n)?t+e.getUint32(i+8,r):i+8)+o>e.byteLength)){if(1===n)return d.getValue(e,s,r);for(l=[],c=0;c<n;c+=1)l[c]=d.getValue(e,s+c*d.size,r);if(d.ascii){for(f="",c=0;c<l.length&&"\0"!==(u=l[c]);c+=1)f+=u;return f}return l}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}(e,t,u,e.getUint16(u+2,a),e.getUint32(u+4,a),a),n[d]=g,r&&(r[d]=u));return e.getUint32(c,a)}console.log("Invalid Exif data: Invalid directory size.")}}m[7]=m[1],r.parseExifData=function(c,e,t,f,i){if(!i.disableExif){var u,a,n,d=i.includeExifTags,g=i.excludeExifTags||{34665:{37500:!0}},m=e+10;if(1165519206===c.getUint32(e+4))if(m+8>c.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===c.getUint16(e+8)){switch(c.getUint16(m)){case 18761:u=!0;break;case 19789:u=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===c.getUint16(m+2,u)?(a=c.getUint32(m+4,u),f.exif=new h,i.disableExifOffsets||(f.exifOffsets=new h,f.exifTiffOffset=m,f.exifLittleEndian=u),(a=A(c,m,m+a,u,f.exif,f.exifOffsets,d,g))&&p(d,g,"ifd1")&&(f.exif.ifd1=a,f.exifOffsets&&(f.exifOffsets.ifd1=m+a)),Object.keys(f.exif.ifds).forEach(function(e){var t,i,a,n,r,o,s,l;i=e,a=c,n=m,r=u,o=d,s=g,(l=(t=f).exif[i])&&(t.exif[i]=new h(i),t.exifOffsets&&(t.exifOffsets[i]=new h(i)),A(a,n,n+l,r,t.exif[i],t.exifOffsets&&t.exifOffsets[i],o&&o[i],s&&s[i]))}),(n=f.exif.ifd1)&&n[513]&&(n[513]=function(e,t,i){if(i){if(!(t+i>e.byteLength))return new Blob([r.bufferSlice.call(e.buffer,t,t+i)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}}(c,m+n[513],n[514]))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},r.metaDataParsers.jpeg[65505].push(r.parseExifData),r.exifWriters={274:function(e,t,i){var a=t.exifOffsets[274];return a&&new DataView(e,a+8,2).setUint16(0,i,t.exifLittleEndian),e}},r.writeExifData=function(e,t,i,a){return r.exifWriters[t.exif.map[i]](e,t,a)},r.ExifMap=h}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-exif"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-exif")):e(window.loadImage)}(function(e){"use strict";var n=e.ExifMap.prototype;n.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},n.tags.ifd1=n.tags,n.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180° CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90° CW",6:"Rotate 90° CW",7:"Horizontal flip + Rotate 90° CW",8:"Rotate 90° CCW"}},n.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":if(!t)return;return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":if(!t)return;return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":if(!t)return;return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},n.getAll=function(){var e,t,i,a={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&((t=this[e])&&t.getAll?a[this.ifds[e].name]=t.getAll():(i=this.tags[e])&&(a[i]=this.getText(i)));return a},n.getName=function(e){var t=this.tags[e];return"object"==typeof t?this.ifds[e].name:t},function(){var e,t,i,a=n.tags;for(e in a)if(Object.prototype.hasOwnProperty.call(a,e))if(t=n.ifds[e])for(e in i=a[e])Object.prototype.hasOwnProperty.call(i,e)&&(t.map[i[e]]=Number(e));else n.map[a[e]]=Number(e)}()}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-meta")):e(window.loadImage)}(function(e){"use strict";function g(){}function m(e,t,i,a,n){return"binary"===t.types[e]?new Blob([i.buffer.slice(a,a+n)]):"Uint16"===t.types[e]?i.getUint16(a):function(e,t,i){for(var a="",n=t+i,r=t;r<n;r+=1)a+=String.fromCharCode(e.getUint8(r));return a}(i,a,n)}function h(e,t,i,a,n,r){for(var o,s,l,c,f,u=t+i,d=t;d<u;)28===e.getUint8(d)&&2===e.getUint8(d+1)&&(l=e.getUint8(d+2),n&&!n[l]||r&&r[l]||(s=e.getInt16(d+3),o=m(l,a.iptc,e,d+5,s),a.iptc[l]=(c=a.iptc[l],f=o,c===undefined?f:c instanceof Array?(c.push(f),c):[c,f]),a.iptcOffsets&&(a.iptcOffsets[l]=d))),d+=1}g.prototype.map={ObjectName:5},g.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},g.prototype.get=function(e){return this[e]||this[this.map[e]]},e.parseIptcData=function(e,t,i,a,n){if(!n.disableIptc)for(var r,o,s,l,c=t+i;t+8<c;){if(l=t,943868237===(s=e).getUint32(l)&&1028===s.getUint16(l+4)){var f=(r=t,o=void 0,(o=e.getUint8(r+7))%2!=0&&(o+=1),0===o&&(o=4),o),u=t+8+f;if(c<u){console.log("Invalid IPTC data: Invalid segment offset.");break}var d=e.getUint16(t+6+f);if(c<t+d){console.log("Invalid IPTC data: Invalid segment size.");break}return a.iptc=new g,n.disableIptcOffsets||(a.iptcOffsets=new g),void h(e,u,d,a,n.includeIptcTags,n.excludeIptcTags||{202:!0})}t+=1}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData),e.IptcMap=g}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-iptc"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-iptc")):e(window.loadImage)}(function(e){"use strict";var a=e.IptcMap.prototype;a.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},a.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},a.getText=function(e){var t=this.get(e),i=this.map[e],a=this.stringValues[i];return a?a[t]:String(t)},a.getAll=function(){var e,t,i={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t=this.tags[e])&&(i[t]=this.getText(t));return i},a.getName=function(e){return this.tags[e]},function(){var e,t=a.tags,i=a.map||{};for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[t[e]]=Number(e))}()});

'use strict';(d=>{d.fn.FileDropper=function(k){const b=d.extend({overSelector:this,overClass:"over",multiple:!1,onDrop:null,isDisabled:()=>!1},k);return this.each((m,l)=>{let e=!1,g=0,f=!1;d(l).on("dragstart",a=>{f=!0}).on("dragenter",a=>{let c=!0;for(let h=0;h<a.originalEvent.dataTransfer.items.length;h++)if("file"!=a.originalEvent.dataTransfer.items[h].kind){c=!1;break}a.preventDefault();e=!c||b.isDisabled(a.target);f||e||(g++,d(b.overSelector).addClass(b.overClass),a.originalEvent.dataTransfer.dropEffect=
"copy")}).on("dragover",a=>{f||e||a.preventDefault()}).on("dragleave",a=>{f||e||0===--g&&d(b.overSelector).removeClass(b.overClass)}).on("drop",a=>{f=!1;a.stopPropagation();a.preventDefault();g=0;if(!e){d(b.overSelector).removeClass(b.overClass);var c=a.originalEvent.dataTransfer.files;0==c.length||!b.multiple&&1<c.length||b.onDrop&&b.onDrop(b.multiple?c:c[0],a.originalEvent)}})})}})(jQuery);

'use strict';(function(e){"function"===typeof define&&define.amd?define(["jquery"],e):"object"===typeof exports?module.exports=e(require("jquery")):e(jQuery)})(function(e){function r(a,b){var c=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)}function t(a,b){b=b||100;return function(){if(!a.debouncing){var c=Array.prototype.slice.apply(arguments);a.lastReturnVal=a.apply(window,c);a.debouncing=!0}clearTimeout(a.debounceTimeout);a.debounceTimeout=setTimeout(function(){a.debouncing=
!1},b);return a.lastReturnVal}}function u(a){var b=[];for(a=a.parentNode;a&&(0===a.offsetWidth||0===a.offsetHeight||!1===a.open);)b.push(a),a=a.parentNode;return b}function p(a,b){function c(m){"undefined"!==typeof m.open&&(m.open=m.open?!1:!0)}var d=u(a),h=d.length,q=[],f=a[b];if(h){for(f=0;f<h;f++)q[f]=d[f].style.cssText,d[f].style.setProperty?d[f].style.setProperty("display","block","important"):d[f].style.cssText+=";display: block !important",d[f].style.height="0",d[f].style.overflow="hidden",
d[f].style.visibility="hidden",c(d[f]);f=a[b];for(a=0;a<h;a++)d[a].style.cssText=q[a],c(d[a])}return f}function k(a,b){a=parseFloat(a);return Number.isNaN(a)?b:a}function n(a){return a.charAt(0).toUpperCase()+a.substr(1)}function g(a,b){this.$window=e(window);this.$document=e(document);this.$element=e(a);this.options=e.extend({},v,b);this.polyfill=this.options.polyfill;this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation;this.onInit=this.options.onInit;this.onSlide=
this.options.onSlide;this.onSlideEnd=this.options.onSlideEnd;this.DIMENSION=l.orientation[this.orientation].dimension;this.DIRECTION=l.orientation[this.orientation].direction;this.DIRECTION_STYLE=l.orientation[this.orientation].directionStyle;this.COORDINATE=l.orientation[this.orientation].coordinate;if(this.polyfill&&w)return!1;this.identifier="js-rangeslider-"+x++;this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier;this.moveEvent=this.options.moveEvent.join("."+
this.identifier+" ")+"."+this.identifier;this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier;this.toFixed=(this.step+"").replace(".","").length-1;this.$fill=e('<div class="'+this.options.fillClass+'" />');this.$handle=e('<div class="'+this.options.handleClass+'" />');this.$range=e('<div class="'+this.options.rangeClass+" "+this.options[this.orientation+"Class"]+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle);this.$element.css({position:"absolute",
width:"1px",height:"1px",overflow:"hidden",opacity:"0"});this.handleDown=e.proxy(this.handleDown,this);this.handleMove=e.proxy(this.handleMove,this);this.handleEnd=e.proxy(this.handleEnd,this);this.init();var c=this;this.$window.on("resize."+this.identifier,t(function(){r(function(){c.update(!1,!1)},300)},20));this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown);this.$element.on("change."+this.identifier,function(d,h){h&&h.origin===c.identifier||
(d=d.target.value,c.setPositionByValue(d),c.$handle.text(d))})}Number.isNaN=Number.isNaN||function(a){return"number"===typeof a&&a!==a};var x=0,w=function(){var a=document.createElement("input");a.setAttribute("type","range");return"text"!==a.type}(),v={polyfill:!0,orientation:"horizontal",rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",activeClass:"rangeslider--active",horizontalClass:"rangeslider--horizontal",verticalClass:"rangeslider--vertical",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",
startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},l={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};g.prototype.init=function(){this.update(!0,!1);if(this.onInit&&"function"===typeof this.onInit)this.onInit()};g.prototype.update=function(a,b){a&&(this.min=k(this.$element[0].getAttribute("min"),
0),this.max=k(this.$element[0].getAttribute("max"),100),this.value=k(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2)),this.step=k(this.$element[0].getAttribute("step"),1));this.$handle.text(this.value);this.handleDimension=p(this.$handle[0],"offset"+n(this.DIMENSION));this.rangeDimension=p(this.$range[0],"offset"+n(this.DIMENSION));this.maxHandlePos=this.rangeDimension-this.handleDimension;this.grabPos=this.handleDimension/2;this.position=this.getPositionFromValue(this.value);this.$element[0].disabled?
this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass);this.setPositionByValue(this.value,b)};g.prototype.handleDown=function(a){a.preventDefault();this.$document.on(this.moveEvent,this.handleMove);this.$document.on(this.endEvent,this.handleEnd);this.$range.addClass(this.options.activeClass);if(!(-1<(" "+a.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass))){a=this.getRelativePosition(a);var b=this.$range[0].getBoundingClientRect()[this.DIRECTION];
b=this.getPositionFromNode(this.$handle[0])-b;this.setPosition("vertical"===this.orientation?this.maxHandlePos-(a-this.grabPos):a-this.grabPos);a>=b&&a<b+this.handleDimension&&(this.grabPos=a-b)}};g.prototype.setPositionByValue=function(a,b){void 0===b&&(b=!0);var c=this.getPositionFromValue(a);this.$fill[0].style[this.DIMENSION]=c+this.grabPos+"px";this.$handle[0].style[this.DIRECTION_STYLE]=c+"px";this.setValue(a);this.position=c;this.value=a;if(b&&this.onSlide&&"function"===typeof this.onSlide)this.onSlide(c,
a)};g.prototype.handleMove=function(a){a.preventDefault();a=this.getRelativePosition(a);this.setPosition("vertical"===this.orientation?this.maxHandlePos-(a-this.grabPos):a-this.grabPos)};g.prototype.handleEnd=function(a){a.preventDefault();this.$document.off(this.moveEvent,this.handleMove);this.$document.off(this.endEvent,this.handleEnd);this.$range.removeClass(this.options.activeClass);this.$element.trigger("change",{origin:this.identifier});if(this.onSlideEnd&&"function"===typeof this.onSlideEnd)this.onSlideEnd(this.position,
this.value)};g.prototype.cap=function(a,b,c){return a<b?b:a>c?c:a};g.prototype.setPosition=function(a,b){void 0===b&&(b=!0);a=this.getValueFromPosition(this.cap(a,0,this.maxHandlePos));var c=this.getPositionFromValue(a);this.$fill[0].style[this.DIMENSION]=c+this.grabPos+"px";this.$handle[0].style[this.DIRECTION_STYLE]=c+"px";this.setValue(a);this.position=c;this.value=a;this.$handle.text(a);if(b&&this.onSlide&&"function"===typeof this.onSlide)this.onSlide(c,a)};g.prototype.getPositionFromNode=function(a){for(var b=
0;null!==a;)b+=a.offsetLeft,a=a.offsetParent;return b};g.prototype.getRelativePosition=function(a){var b=n(this.COORDINATE),c=this.$range[0].getBoundingClientRect()[this.DIRECTION],d=0;"undefined"!==typeof a.originalEvent["client"+b]?d=a.originalEvent["client"+b]:a.originalEvent.touches&&a.originalEvent.touches[0]&&"undefined"!==typeof a.originalEvent.touches[0]["client"+b]?d=a.originalEvent.touches[0]["client"+b]:a.currentPoint&&"undefined"!==typeof a.currentPoint[this.COORDINATE]&&(d=a.currentPoint[this.COORDINATE]);
return d-c};g.prototype.getPositionFromValue=function(a){a=(a-this.min)/(this.max-this.min);return Number.isNaN(a)?0:a*this.maxHandlePos};g.prototype.getValueFromPosition=function(a){return Number((this.step*Math.round(a/(this.maxHandlePos||1)*(this.max-this.min)/this.step)+this.min).toFixed(this.toFixed))};g.prototype.setValue=function(a){a===this.value&&""!==this.$element[0].value||this.$element.val(a).trigger("input",{origin:this.identifier})};g.prototype.destroy=function(){this.$document.off("."+
this.identifier);this.$window.off("."+this.identifier);this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_rangeslider");this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])};e.fn.rangeslider=function(a){var b=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=e(this),d=c.data("plugin_rangeslider");d||c.data("plugin_rangeslider",d=new g(this,a));"string"===typeof a&&d[a].apply(d,b)})};return"rangeslider.js is available in jQuery context e.g $(selector).rangeslider(options);"});
'use strict';function GUIelements(){function t(c,a){c=$('<div class="scroller">').appendTo(c);for(var b=$('<div class="slides">').appendTo(c),d=0;d<a.slides.length;d++)b.append(a.slides[d]);var g=new Scroller({element:c,slides:b});n.push(function(){g&&g.destroy()});return{$ctr:c,scroller:g}}function u(c,a){function b(e){return null===e?null:"hex"==a.colorFormat?e.toHEXA().toString():e.toRGBA().toString()}a.colorFormat=a.colorFormat||"rgba";c=$("<div>").appendTo(c);var d=void 0===a.opacity?!0:a.opacity,
g=a.swatches||[];const f=(new Pickr({el:c[0],container:$(".modal-body","#myModal")[0],theme:"nano",default:a.color?a.color:null,defaultRepresentation:"RGB",swatches:g,components:{preview:!0,opacity:d,hue:!0,interaction:{hex:!1,rgba:!1,input:!0,clear:!!a.showClear,save:!0}},i18n:{"btn:save":lib.word(1033),"btn:cancel":lib.word(1032),"btn:clear":lib.word(1037)}})).on("init",function(e){var h="pickr-wrap";a.class&&(h+=" "+a.class);$(e._root.root).addClass(h)}).on("change",function(e,h){a.onchange&&a.onchange(b(e))}).on("save",
function(e,h){a.onselect&&a.onselect(b(e));f.hide()});n.push(function(){f&&f.destroy()});return{$ctr:$(f._root.root),pickr:f}}function v(c,a){var b={type:"range",name:a.name},d=void 0!==a.default?a.default:"";void 0!==a.step&&(b.step=a.step);void 0!==a.range&&(b.min=a.range[0],b.max=a.range[1]);var g={rangeClass:"rangeslider"+(a.name?" "+a.name:""),polyfill:!1};a.onslide&&(g.onSlide=function(e,h){a.onslide(+this.value)});a.orientation&&(g.orientation=a.orientation);var f=$("<input>",b).val(d).on("change",
function(){a.onchange&&a.onchange(+this.value)});c=$("<div"+(a.class?' class="'+a.class+'"':"")+">").append(f).appendTo(c);f.rangeslider(g);requestAnimationFrame(function(){f.rangeslider("update",!0,!1)});n.push(function(){f.rangeslider("destroy")});return{$ctr:c,$ipt:f}}function w(c,a){var b=a.default[0],d=a.default[1],g=a.range[0],f=a.range[1];c=$('<div class="range-slider" style="width:100%;--min:'+g+"; --max:"+f+"; --value-a:"+b+"; --value-b:"+d+"; --text-value-a:'"+b+"'; --text-value-b:'"+d+
"'\">").appendTo(c);$('<input type="range" min="'+g+'" max="'+f+'">').attr("name","name"in a?a.name+"0":null).val(b).on("input",({currentTarget:e})=>{var h=e.parentNode.style;b=e.value;h.setProperty("--value-a",b);h.setProperty("--text-value-a",JSON.stringify(b));if("onslide"in a)a.onslide(+b,+d)}).appendTo(c);$("<output>").appendTo(c);$('<input type="range" min="'+g+'" max="'+f+'">').attr("name","name"in a?a.name+"1":null).val(d).on("input",({currentTarget:e})=>{var h=e.parentNode.style;d=e.value;
h.setProperty("--value-b",d);h.setProperty("--text-value-b",JSON.stringify(d));if("onslide"in a)a.onslide(+b,+d)}).appendTo(c);$("<output>").appendTo(c);$('<div class="range-slider__progress">').appendTo(c);return{$ctr:c}}function x(c,a){var b=$("<div>",{"class":"btn-group"});for(let d in a.choices)$("<button>",{type:"button","class":"btn btn-secondary"}).css("min-width","2rem").html(a.choices[d].label).on("click",function(){a.onclick&&a.onclick(d)}).appendTo(b);return{$ctr:$("<div>").append(b).appendTo(c)}}
function y(c,a){var b=void 0!==a.default?a.default:null,d=$("<div>",{"class":"btn-group btn-group-toggle","data-toggle":"buttons"}),g=a.name||"v"+Math.round(9999*Math.random()),f={};if(Array.isArray(a.choices))for(var e=0;e<a.choices.length;e++)f[a.choices[e]]=a.choices[e];else f=a.choices;for(let h in a.choices)"_divider_"==h?d.append('<span class="btn-separator"></span>'):(f=h==b,d.append('<label style="min-width:2rem" class="btn btn-secondary'+(f?" active":"")+'"><input type="radio" name="'+g+
'" value="'+h+'"'+(f?" checked":"")+"> "+a.choices[h]+"</label>"));$("input[name='"+g+"']",d).on("change",function(){a.onchange(this.value)});b=$("<div>");a.class&&b.addClass(a.class);b.append(d).appendTo(c);return{$ctr:b}}function z(c,a){var b=$("<input>",{type:"text","class":"form-control"});a.val&&b.val(a.val);a.id&&b.attr("id",a.id);a.name&&b.attr("name",a.name);a.placeholder&&b.attr("placeholder",a.placeholder);if(a.onchange)b.on("change",function(){a.onchange(this.value)});if(a.onkeyup)b.on("keyup",
function(){a.onkeyup(this.value)});return{$ctr:$("<div>").append(b).appendTo(c)}}function A(c,a){var b=$("<textarea>",{"class":"form-control",rows:a.rows||1});a.val&&b.val(a.val);a.id&&b.attr("id",a.id);a.name&&b.attr("name",a.name);if(a.onkeyup)b.on("keyup",function(){a.onkeyup(this.value)});return{$ctr:$("<div>").append(b).appendTo(c)}}function B(c,a){var b=void 0!==a.default?a.default:null,d=$("<select>",{"class":"form-control custom-select"});a.id&&d.attr("id",a.id);a.name&&d.attr("name",a.name);
var g={};if(Array.isArray(a.choices))for(var f=0;f<a.choices.length;f++)g[a.choices[f]]=a.choices[f];else g=a.choices;for(var e in g)d.append("<option"+(e==b?" selected":"")+' value="'+e+'">'+g[e]+"</option>");d.on("change",function(){a.onchange(this.value)});return{$ctr:$("<div>").append(d).appendTo(c)}}function C(c,a){var b=$("<div>",{"class":"btn-group btn-group-toggle flex-wrap","data-toggle":"buttons"});for(var d in a.choices)"_divider_"==d?b.append('<span class="btn-separator"></span>'):b.append('<label class="btn btn-secondary'+
(a.choices[d].checked?" active":"")+'"><input type="checkbox" name="'+d+'"'+(a.choices[d].checked?" checked":"")+"> "+a.choices[d].label+"</label>");$(":checkbox",b).on("change",function(){a.onchange(this.name,this.checked)});d=$("<div>");a.class&&d.addClass(a.class);d.append(b).appendTo(c);return{$ctr:d}}function D(c,a){var b=$("<input>",{type:"text"});a.id&&b.attr("id",a.id);a.name&&b.attr("name",a.name);void 0!==a.default&&b.val(a.default);c=$("<div>").append(b).appendTo(c);var d={variants:!1,
lang:ZMprops.lang,parentElement:"#myModal"};"localFonts"in a&&(d.localFonts=a.localFonts);"googleFonts"in a&&(d.googleFonts=a.googleFonts);b.fontpicker(d).on("change",function(){a.onchange(this.value)});return{$ctr:c}}function E(c,a){function b(k){var p=h/g.width(),q=g.offset();return{x:100*Math.max(0,Math.min(1,(k.pageX-q.left)/h))*p,y:100*Math.max(0,Math.min(1,(k.pageY-q.top)/m))*p}}function d(){f.css({left:"calc("+l.x+"% - 20px)",top:"calc("+l.y+"% - 20px)"})}var g=$("<div>",{"class":"centerPoint bounceInDown"}).appendTo(c),
f=$("<div>",{"class":"dragger"}).appendTo(g),e=!1,h=c.width(),m=c.height(),l=a.center||{x:50,y:50},r=function(k,p){h=p.width*p.zoom;m=p.height*p.zoom};$(document).on("canvasResize",r);d();$(document).on("mouseup touchend",function(k){e&&(e=!1,a.ondragend&&a.ondragend(l))});g.on("mousedown touchstart",function(k){k.preventDefault();k=k.changedTouches?k.changedTouches[0]:k;l=b(k);d();$(k.target).is(".centerPoint")?(a.ondragmove&&a.ondragmove(l),a.ondragend&&a.ondragend(l)):e=!0}).on("mousemove touchmove",
function(k){e&&(k=k.changedTouches?k.changedTouches[0]:k,l=b(k),d(),a.ondragmove&&a.ondragmove(l))});n.push(function(){$(document).off("canvasResize",r);g.remove()})}function F(c,a){function b(m){var l=g/f;if("width"==m){m=e.val();if(!/^\d+$/.test(m))return;d&&h.val(Math.round(m/l))}else{m=h.val();if(!/^\d+$/.test(m))return;d&&e.val(Math.round(m*l))}a.onchange({width:+e.val(),height:+h.val()})}var d=!0,g=a.width,f=a.height;!1===a.resizeAspectLock&&(d=!1);c=$("<div>").appendTo(c);$("<button>",{type:"button",
"class":"btn btn-secondary",title:lib.word(1265)}).html('<i class="fa fa-fw fa-'+(d?"lock":"unlock")+'"></i>').on("click",function(){d=!d;$(this).html('<i class="fa fa-fw fa-'+(d?"lock":"unlock")+'"></i>')}).appendTo(c);c.append(" "+lib.word(1055)+": ");var e=$("<input>",{type:"number","class":"imgW form-control imgSz"}).val(g).on("change",function(){b("width")}).appendTo(c);c.append("&times;");var h=$("<input>",{type:"number","class":"imgH form-control imgSz"}).val(f).on("change",function(){b("height")}).appendTo(c);
return{$ctr:c,update:function(m,l){g=m;f=l;e.val(m);h.val(l)}}}var n=[];this.getGui=function(c,a,b){switch(a){case "buttons":return x(c,b);case "scroller":return t(c,b);case "centerPoint":return E(c,b);case "colorpicker":return u(c,b);case "radio":return y(c,b);case "checkbox":return C(c,b);case "resizer":return F(c,b);case "select":return B(c,b);case "fontPicker":return D(c,b);case "slider":return v(c,b);case "duoslider":return w(c,b);case "text":return z(c,b);case "textarea":return A(c,b);default:throw Error("Error: GUI element "+
a+" does not exist!");}};this.destroy=function(){for(var c=0;c<n.length;c++)n[c]();n=[]}};

'use strict';const ModalManager=(()=>{let l,b,m,a,c=null;const e=()=>{c.modal("hide").modal("dispose").remove();c=null;a.closeFn&&a.closeFn()},q=()=>$('<div class="modal-header">').html('<h5 class="modal-title">'+a.title+"</h5>").append($('<div class="icons">').append(a.hideCollapse?null:$('<span class="icon">').html('<iconify-icon icon="mdi:chevron-double-up"></iconify-icon>').on("click",()=>{b.is(":visible")?(b.slideUp(),$(this).html('<iconify-icon icon="mdi:chevron-double-down"></iconify-icon>')):
(b.slideDown(),$(this).html('<iconify-icon icon="mdi:chevron-double-up"></iconify-icon>'))}),$('<span class="icon">').html('<iconify-icon icon="mdi:close"></iconify-icon>').on("click",e)));return{openWindow:f=>{null!==c&&e();a=f;c=$('<div id="myModal" class="modal" tabindex="-1">').appendTo("body");var g=$('<div class="modal-dialog'+(f.scrollable?" modal-dialog-scrollable":"")+'" id="toolControls">').appendTo(c);g=$('<div class="modal-content">').appendTo(g);l=q();b=$('<div class="modal-body">');
let h=$('<div class="modal-footer">'),d,n=!1;for(let k in a.buttons)if(d=a.buttons[k],"close"==k)n=!0;else{const p=$("<button>",{id:k+"Btn","class":"btn "+(d.className?d.className:"btn-primary")}).html(d.label);if(d.callback)p.on("click",d.callback);h.append(p)}n&&h.append($("<button>",{id:"closeBtn","class":"btn btn-link"}).html(lib.word(1035)).on("click",e));m=h;g.append(l,b,m);c.modal({backdrop:f.backdrop||!1});return b},closeWindow:e}})();

/*
 MIT
*/
'use strict';(function(ma,N){"object"===typeof exports&&"undefined"!==typeof module?module.exports=N():"function"===typeof define&&define.amd?define(N):(ma=ma||self,ma.Sortable=N())})(this,function(){function ma(a){ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return ma(a)}function N(){N=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=
arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};return N.apply(this,arguments)}function ha(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"===typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(e){return Object.getOwnPropertyDescriptor(c,e).enumerable})));d.forEach(function(e){var f=c[e];e in a?Object.defineProperty(a,e,{value:f,enumerable:!0,configurable:!0,
writable:!0}):a[e]=f})}return a}function Ob(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var d=Object.keys(a),e;for(e=0;e<d.length;e++){var f=d[e];0<=b.indexOf(f)||(c[f]=a[f])}}if(Object.getOwnPropertySymbols)for(e=Object.getOwnPropertySymbols(a),f=0;f<e.length;f++)d=e[f],0<=b.indexOf(d)||Object.prototype.propertyIsEnumerable.call(a,d)&&(c[d]=a[d]);return c}function Pb(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in
Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function ca(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function w(a,b,c){a.addEventListener(b,c,!da&&ub)}function v(a,b,c){a.removeEventListener(b,c,!da&&ub)}function Na(a,b){if(b){">"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);
if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}function Y(a,b,c,d){if(a){c=c||document;do{if(null!=b&&(">"===b[0]?a.parentNode===c&&Na(a,b):Na(a,b))||d&&a===c)return a;if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function D(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(vb," ").replace(" "+b+" "," ");a.className=(d+(c?" "+b:"")).replace(vb," ")}}function n(a,
b,c){var d=a&&a.style;if(d){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||-1!==b.indexOf("webkit")||(b="-webkit-"+b);d[b]=c+("string"===typeof c?"":"px")}}function na(a,b){var c="";if("string"===typeof a)c=a;else{do{var d=n(a,"transform");d&&"none"!==d&&(c=d+" "+c)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||
window.MSCSSMatrix)&&new a(c)}function wb(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var d=a.length;if(c)for(;b<d;b++)c(a[b],b);return a}return[]}function ea(){var a=document.scrollingElement;return a?a:document.documentElement}function F(a,b,c,d,e){if(a.getBoundingClientRect||a===window){if(a!==window&&a.parentNode&&a!==ea()){var f=a.getBoundingClientRect();var g=f.top;var h=f.left;var l=f.bottom;var m=f.right;var p=f.height;var r=f.width}else h=g=0,l=window.innerHeight,m=window.innerWidth,p=window.innerHeight,
r=window.innerWidth;if((b||c)&&a!==window&&(e=e||a.parentNode,!da)){do if(e&&e.getBoundingClientRect&&("none"!==n(e,"transform")||c&&"static"!==n(e,"position"))){l=e.getBoundingClientRect();g-=l.top+parseInt(n(e,"border-top-width"));h-=l.left+parseInt(n(e,"border-left-width"));l=g+f.height;m=h+f.width;break}while(e=e.parentNode)}d&&a!==window&&(d=(a=na(e||a))&&a.a,e=a&&a.d,a&&(g/=e,h/=d,r/=d,p/=e,l=g+p,m=h+r));return{top:g,left:h,bottom:l,right:m,width:r,height:p}}}function xb(a,b,c){var d=ia(a,!0);
for(a=F(a)[b];d;){b=F(d)[c];if(!("top"===c||"left"===c?a>=b:a<=b))return d;if(d===ea())break;d=ia(d,!1)}return!1}function Oa(a,b,c){for(var d=0,e=0,f=a.children;e<f.length;){if("none"!==f[e].style.display&&f[e]!==q.ghost&&f[e]!==q.dragged&&Y(f[e],c.draggable,a,!1)){if(d===b)return f[e];d++}e++}return null}function cb(a,b){for(a=a.lastElementChild;a&&(a===q.ghost||"none"===n(a,"display")||b&&!Na(a,b));)a=a.previousElementSibling;return a||null}function G(a,b){var c=0;if(!a||!a.parentNode)return-1;
for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===q.clone||b&&!Na(a,b)||c++;return c}function yb(a){var b=0,c=0,d=ea();if(a){do{var e=na(a),f=e.d;b+=a.scrollLeft*e.a;c+=a.scrollTop*f}while(a!==d&&(a=a.parentNode))}return[b,c]}function Qb(a,b){for(var c in a)if(a.hasOwnProperty(c))for(var d in b)if(b.hasOwnProperty(d)&&b[d]===a[c][d])return Number(c);return-1}function ia(a,b){if(!a||!a.getBoundingClientRect)return ea();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<
a.scrollHeight){var d=n(a);if(a.clientWidth<a.scrollWidth&&("auto"==d.overflowX||"scroll"==d.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==d.overflowY||"scroll"==d.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(c||b)return a;c=!0}}while(a=a.parentNode);return ea()}function db(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function zb(a,b){return function(){if(!ya){var c=
arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);ya=setTimeout(function(){ya=void 0},b)}}}function Ab(a,b,c){a.scrollLeft+=b;a.scrollTop+=c}function eb(a){var b=window.Polymer,c=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):c?c(a).clone(!0)[0]:a.cloneNode(!0)}function Bb(a,b){n(a,"position","absolute");n(a,"top",b.top);n(a,"left",b.left);n(a,"width",b.width);n(a,"height",b.height)}function fb(a){n(a,"position","");n(a,"top","");n(a,"left","");n(a,"width","");n(a,"height",
"")}function Rb(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==n(c,"display")&&c!==q.ghost){a.push({target:c,rect:F(c)});var d=ha({},a[a.length-1].rect);if(c.thisAnimationDuration){var e=na(c,!0);e&&(d.top-=e.f,d.left-=e.e)}c.fromRect=d}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){a.splice(Qb(a,{target:c}),1)},animateAll:function(c){var d=this;if(this.options.animation){var e=
!1,f=0;a.forEach(function(g){var h=0,l=g.target,m=l.fromRect,p=F(l),r=l.prevFromRect,C=l.prevToRect;g=g.rect;var y=na(l,!0);y&&(p.top-=y.f,p.left-=y.e);l.toRect=p;l.thisAnimationDuration&&db(r,p)&&!db(m,p)&&(g.top-p.top)/(g.left-p.left)===(m.top-p.top)/(m.left-p.left)&&(h=Math.sqrt(Math.pow(r.top-g.top,2)+Math.pow(r.left-g.left,2))/Math.sqrt(Math.pow(r.top-C.top,2)+Math.pow(r.left-C.left,2))*d.options.animation);db(p,m)||(l.prevFromRect=m,l.prevToRect=p,h||(h=d.options.animation),d.animate(l,g,p,
h));h&&(e=!0,f=Math.max(f,h),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0;l.prevFromRect=null;l.fromRect=null;l.prevToRect=null;l.thisAnimationDuration=null},h),l.thisAnimationDuration=h)});clearTimeout(b);e?b=setTimeout(function(){"function"===typeof c&&c()},f):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&c()},animate:function(c,d,e,f){if(f){n(c,"transition","");n(c,"transform","");var g=na(this.el),h=(d.left-e.left)/
(g&&g.a||1);d=(d.top-e.top)/(g&&g.d||1);c.animatingX=!!h;c.animatingY=!!d;n(c,"transform","translate3d("+h+"px,"+d+"px,0)");this.forRepaintDummy=c.offsetWidth;n(c,"transition","transform "+f+"ms"+(this.options.easing?" "+this.options.easing:""));n(c,"transform","translate3d(0,0,0)");"number"===typeof c.animated&&clearTimeout(c.animated);c.animated=setTimeout(function(){n(c,"transition","");n(c,"transform","");c.animated=!1;c.animatingX=!1;c.animatingY=!1},f)}}}}function za(a){var b=a.sortable,c=a.rootEl,
d=a.name,e=a.targetEl,f=a.cloneEl,g=a.toEl,h=a.fromEl,l=a.oldIndex,m=a.newIndex,p=a.oldDraggableIndex,r=a.newDraggableIndex,C=a.originalEvent,y=a.putSortable,K=a.extraEventProperties;if(b=b||c&&c[O]){var x=b.options,Q="on"+d.charAt(0).toUpperCase()+d.substr(1);!window.CustomEvent||da||Aa?(a=document.createEvent("Event"),a.initEvent(d,!0,!0)):a=new CustomEvent(d,{bubbles:!0,cancelable:!0});a.to=g||c;a.from=h||c;a.item=e||c;a.clone=f;a.oldIndex=l;a.newIndex=m;a.oldDraggableIndex=p;a.newDraggableIndex=
r;a.originalEvent=C;a.pullMode=y?y.lastPutMode:void 0;d=ha({},K,Ba.getEventProperties(d,b));for(var z in d)a[z]=d[z];c&&c.dispatchEvent(a);x[Q]&&x[Q].call(b,a)}}function R(a){za(ha({putSortable:L,cloneEl:H,targetEl:k,rootEl:E,oldIndex:sa,oldDraggableIndex:Ca,newIndex:T,newDraggableIndex:ja},a))}function q(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=N({},b);a[O]=this;var c={group:null,sort:!0,disabled:!1,
store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Cb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(f,g){f.setData("Text",g.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?
Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==q.supportPointer&&"PointerEvent"in window&&!Da,emptyInsertThreshold:5};Ba.initializePlugins(this,a,c);for(var d in c)d in b||(b[d]=c[d]);Db(b);for(var e in this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Sb)this.options.touchStartThreshold=
1;b.supportPointer?w(a,"pointerdown",this._onTapStart):(w(a,"mousedown",this._onTapStart),w(a,"touchstart",this._onTapStart));this.nativeDraggable&&(w(a,"dragover",this),w(a,"dragenter",this));Pa.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);N(this,Rb())}function gb(a,b,c,d,e,f,g,h){var l=a[O],m=l.options.onMove,p;if(!window.CustomEvent||da||Aa){var r=document.createEvent("Event");r.initEvent("move",!0,!0)}else r=new CustomEvent("move",{bubbles:!0,cancelable:!0});r.to=b;r.from=
a;r.dragged=c;r.draggedRect=d;r.related=e||b;r.relatedRect=f||F(b);r.willInsertAfter=h;r.originalEvent=g;a.dispatchEvent(r);m&&(p=m.call(l,r,g));return p}function hb(a){a.draggable=!1}function Tb(){ib=!1}function Ub(a,b,c){c=F(cb(c.el,c.options.draggable));return b?a.clientX>c.right+10||a.clientX<=c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function Vb(a,b,c,d,e,f,g,h){a=d?a.clientY:a.clientX;var l=d?c.height:c.width,
m=d?c.top:c.left;c=d?c.bottom:c.right;d=!1;if(!g)if(h&&Qa<l*e)if(!Ea&&(1===Fa?a>m+l*f/2:a<c-l*f/2)&&(Ea=!0),Ea)d=!0;else{if(1===Fa?a<m+Qa:a>c-Qa)return-Fa}else if(a>m+l*(1-e)/2&&a<c-l*(1-e)/2)return b=G(k)<G(b)?1:-1,b;if(d||g)if(a<m+l*f/2||a>c-l*f/2)return a>m+l/2?1:-1;return 0}function Wb(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function Xb(a){Ra.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=
a[b];c.checked&&Ra.push(c)}}function Sa(a){return setTimeout(a,0)}function Ta(){I.forEach(function(a){clearInterval(a.pid)});I=[]}function jb(){}function kb(){}function Yb(a,b){t.forEach(function(c,d){(d=b.children[c.sortableIndex+(a?Number(d):0)])?b.insertBefore(c,d):b.appendChild(c)})}function Eb(a,b){U.forEach(function(c,d){(d=b.children[c.sortableIndex+(a?Number(d):0)])?b.insertBefore(c,d):b.appendChild(c)})}function Ua(){t.forEach(function(a){a!==A&&a.parentNode&&a.parentNode.removeChild(a)})}
var da=ca(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Aa=ca(/Edge/i),Fb=ca(/firefox/i),Da=ca(/safari/i)&&!ca(/chrome/i)&&!ca(/android/i),Ga=ca(/iP(ad|od|hone)/i),Zb=ca(/chrome/i)&&ca(/android/i),ub={capture:!1,passive:!1},vb=/\s+/g,ya,O="Sortable"+(new Date).getTime(),ta=[],lb={initializeByDefault:!0},Ba={mount:function(a){for(var b in lb)!lb.hasOwnProperty(b)||b in a||(a[b]=lb[b]);ta.forEach(function(c){if(c.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName,
" more than once");});ta.push(a)},pluginEvent:function(a,b,c){var d=this;this.eventCanceled=!1;c.cancel=function(){d.eventCanceled=!0};var e=a+"Global";ta.forEach(function(f){if(b[f.pluginName]){if(b[f.pluginName][e])b[f.pluginName][e](ha({sortable:b},c));if(b.options[f.pluginName]&&b[f.pluginName][a])b[f.pluginName][a](ha({sortable:b},c))}})},initializePlugins:function(a,b,c,d){ta.forEach(function(f){var g=f.pluginName;if(a.options[g]||f.initializeByDefault)f=new f(a,b,a.options),f.sortable=a,f.options=
a.options,a[g]=f,N(c,f.defaults)});for(var e in a.options)a.options.hasOwnProperty(e)&&(d=this.modifyOption(a,e,a.options[e]),"undefined"!==typeof d&&(a.options[e]=d))},getEventProperties:function(a,b){var c={};ta.forEach(function(d){"function"===typeof d.eventProperties&&N(c,d.eventProperties.call(b[d.pluginName],a))});return c},modifyOption:function(a,b,c){var d;ta.forEach(function(e){a[e.pluginName]&&e.optionListeners&&"function"===typeof e.optionListeners[b]&&(d=e.optionListeners[b].call(a[e.pluginName],
c))});return d}},S=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=c.evt;c=Ob(c,["evt"]);Ba.pluginEvent.bind(q)(a,b,ha({dragEl:k,parentEl:J,ghostEl:u,rootEl:E,nextEl:oa,lastDownEl:Va,cloneEl:H,cloneHidden:ka,dragStarted:Ha,putSortable:L,activeSortable:q.active,originalEvent:d,oldIndex:sa,oldDraggableIndex:Ca,newIndex:T,newDraggableIndex:ja,hideGhostForTarget:Gb,unhideGhostForTarget:Hb,cloneNowHidden:function(){ka=!0},cloneNowShown:function(){ka=!1},dispatchSortableEvent:function(e){R({sortable:b,
name:e,originalEvent:d})}},c))},k,J,u,E,oa,Va,H,ka,sa,T,Ca,ja,Wa,L,ua=!1,Xa=!1,Pa=[],pa,Z,mb,nb,Ib,Jb,Ha,va,Fa,Ea=!1,Ya=!1,Qa,P,ob=[],ib=!1,Ra=[],Za="undefined"!==typeof document,Kb=Aa||da?"cssFloat":"float",Sb=Za&&!Zb&&!Ga&&"draggable"in document.createElement("div"),Lb=function(){if(Za){if(da)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),Cb=function(a,b){var c=n(a),d=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-
parseInt(c.borderLeftWidth)-parseInt(c.borderRightWidth),e=Oa(a,0,b);a=Oa(a,1,b);var f=e&&n(e);b=a&&n(a);var g=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+F(e).width,h=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+F(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":e&&f["float"]&&"none"!==f["float"]?(c="left"===f["float"]?"left":"right",
!a||"both"!==b.clear&&b.clear!==c?"horizontal":"vertical"):e&&("block"===f.display||"flex"===f.display||"table"===f.display||"grid"===f.display||g>=d&&"none"===c[Kb]||a&&"none"===c[Kb]&&g+h>d)?"vertical":"horizontal"},$b=function(a,b,c){var d=c?a.left:a.top,e=c?a.right:a.bottom;a=c?a.width:a.height;var f=c?b.left:b.top,g=c?b.right:b.bottom;b=c?b.width:b.height;return d===f||e===g||d+a/2===f+b/2},ac=function(a,b){var c;Pa.some(function(d){if(!cb(d)){var e=F(d),f=d[O].options.emptyInsertThreshold,g=
a>=e.left-f&&a<=e.right+f;e=b>=e.top-f&&b<=e.bottom+f;if(f&&g&&e)return c=d}});return c},Db=function(a){function b(e,f){return function(g,h,l,m){var p=g.options.group.name&&h.options.group.name&&g.options.group.name===h.options.group.name;if(null==e&&(f||p))return!0;if(null==e||!1===e)return!1;if(f&&"clone"===e)return e;if("function"===typeof e)return b(e(g,h,l,m),f)(g,h,l,m);g=(f?g:h).options.group.name;return!0===e||"string"===typeof e&&e===g||e.join&&-1<e.indexOf(g)}}var c={},d=a.group;d&&"object"==
ma(d)||(d={name:d});c.name=d.name;c.checkPull=b(d.pull,!0);c.checkPut=b(d.put);c.revertClone=d.revertClone;a.group=c},Gb=function(){!Lb&&u&&n(u,"display","none")},Hb=function(){!Lb&&u&&n(u,"display","")};Za&&document.addEventListener("click",function(a){if(Xa)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Xa=!1},!0);var qa=function(a){if(k){a=a.touches?a.touches[0]:a;var b=ac(a.clientX,a.clientY);if(b){var c={},d;for(d in a)a.hasOwnProperty(d)&&
(c[d]=a[d]);c.target=c.rootEl=b;c.preventDefault=void 0;c.stopPropagation=void 0;b[O]._onDragOver(c)}}},bc=function(a){k&&k.parentNode[O]._isOutsideThisEl(a.target)};q.prototype={constructor:q,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(va=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,k):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,d=this.options,e=d.preventOnFilter,
f=a.type,g=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,h=(g||a).target,l=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||h,m=d.filter;Xb(c);if(!(k||/mousedown|pointerdown/.test(f)&&0!==a.button||d.disabled||l.isContentEditable||!this.nativeDraggable&&Da&&h&&"SELECT"===h.tagName.toUpperCase()||(h=Y(h,d.draggable,c,!1),h&&h.animated||Va===h))){sa=G(h);Ca=G(h,d.draggable);if("function"===typeof m){if(m.call(this,a,h,this)){R({sortable:b,rootEl:l,
name:"filter",targetEl:h,toEl:c,fromEl:c});S("filter",b,{evt:a});e&&a.cancelable&&a.preventDefault();return}}else if(m&&(m=m.split(",").some(function(p){if(p=Y(l,p.trim(),c,!1))return R({sortable:b,rootEl:p,name:"filter",targetEl:h,fromEl:c,toEl:c}),S("filter",b,{evt:a}),!0}))){e&&a.cancelable&&a.preventDefault();return}d.handle&&!Y(l,d.handle,c,!1)||this._prepareDragStart(a,g,h)}}},_prepareDragStart:function(a,b,c){var d=this,e=d.el,f=d.options,g=e.ownerDocument;if(c&&!k&&c.parentNode===e){var h=
F(c);E=e;k=c;J=k.parentNode;oa=k.nextSibling;Va=c;Wa=f.group;q.dragged=k;pa={target:k,clientX:(b||a).clientX,clientY:(b||a).clientY};Ib=pa.clientX-h.left;Jb=pa.clientY-h.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;k.style["will-change"]="all";c=function(){S("delayEnded",d,{evt:a});q.eventCanceled?d._onDrop():(d._disableDelayedDragEvents(),!Fb&&d.nativeDraggable&&(k.draggable=!0),d._triggerDragStart(a,b),R({sortable:d,name:"choose",originalEvent:a}),D(k,f.chosenClass,!0))};f.ignore.split(",").forEach(function(l){wb(k,
l.trim(),hb)});w(g,"dragover",qa);w(g,"mousemove",qa);w(g,"touchmove",qa);w(g,"mouseup",d._onDrop);w(g,"touchend",d._onDrop);w(g,"touchcancel",d._onDrop);Fb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,k.draggable=!0);S("delayStart",this,{evt:a});!f.delay||f.delayOnTouchOnly&&!b||this.nativeDraggable&&(Aa||da)?c():q.eventCanceled?this._onDrop():(w(g,"mouseup",d._disableDelayedDrag),w(g,"touchend",d._disableDelayedDrag),w(g,"touchcancel",d._disableDelayedDrag),w(g,"mousemove",d._delayedDragTouchMoveHandler),
w(g,"touchmove",d._delayedDragTouchMoveHandler),f.supportPointer&&w(g,"pointermove",d._delayedDragTouchMoveHandler),d._dragStartTimer=setTimeout(c,f.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){k&&hb(k);clearTimeout(this._dragStartTimer);
this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;v(a,"mouseup",this._disableDelayedDrag);v(a,"touchend",this._disableDelayedDrag);v(a,"touchcancel",this._disableDelayedDrag);v(a,"mousemove",this._delayedDragTouchMoveHandler);v(a,"touchmove",this._delayedDragTouchMoveHandler);v(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?w(document,
"pointermove",this._onTouchMove):b?w(document,"touchmove",this._onTouchMove):w(document,"mousemove",this._onTouchMove):(w(k,"dragend",this),w(E,"dragstart",this._onDragStart));try{document.selection?Sa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){ua=!1;if(E&&k){S("dragStarted",this,{evt:b});this.nativeDraggable&&w(document,"dragover",bc);var c=this.options;!a&&D(k,c.dragClass,!1);D(k,c.ghostClass,!0);q.active=this;a&&this._appendGhost();
R({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(Z){this._lastX=Z.clientX;this._lastY=Z.clientY;Gb();for(var a=document.elementFromPoint(Z.clientX,Z.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(Z.clientX,Z.clientY);if(a===b)break;b=a}k.parentNode[O]._isOutsideThisEl(a);if(b){do{if(b[O]&&b[O]._onDragOver({clientX:Z.clientX,clientY:Z.clientY,target:a,rootEl:b})&&!this.options.dragoverBubble)break;a=b}while(b=b.parentNode)}Hb()}},
_onTouchMove:function(a){if(pa){var b=this.options,c=b.fallbackTolerance,d=b.fallbackOffset;b=a.touches?a.touches[0]:a;var e=u&&na(u,!0),f=u&&e&&e.a,g=u&&e&&e.d,h=Ga&&P&&yb(P);f=(b.clientX-pa.clientX+d.x)/(f||1)+(h?h[0]-ob[0]:0)/(f||1);d=(b.clientY-pa.clientY+d.y)/(g||1)+(h?h[1]-ob[1]:0)/(g||1);if(!q.active&&!ua){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}u&&(e?(e.e+=f-(mb||0),e.f+=d-(nb||0)):e={a:1,b:0,c:0,d:1,e:f,f:d},c="matrix(".concat(e.a,
",").concat(e.b,",").concat(e.c,",").concat(e.d,",").concat(e.e,",").concat(e.f,")"),n(u,"webkitTransform",c),n(u,"mozTransform",c),n(u,"msTransform",c),n(u,"transform",c),mb=f,nb=d,Z=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!u){var a=this.options.fallbackOnBody?document.body:E,b=F(k,!0,Ga,!0,a),c=this.options;if(Ga){for(P=a;"static"===n(P,"position")&&"none"===n(P,"transform")&&P!==document;)P=P.parentNode;P!==document.body&&P!==document.documentElement?(P===document&&(P=
ea()),b.top+=P.scrollTop,b.left+=P.scrollLeft):P=ea();ob=yb(P)}u=k.cloneNode(!0);D(u,c.ghostClass,!1);D(u,c.fallbackClass,!0);D(u,c.dragClass,!0);n(u,"transition","");n(u,"transform","");n(u,"box-sizing","border-box");n(u,"margin",0);n(u,"top",b.top);n(u,"left",b.left);n(u,"width",b.width);n(u,"height",b.height);n(u,"opacity","0.8");n(u,"position",Ga?"absolute":"fixed");n(u,"zIndex","100000");n(u,"pointerEvents","none");q.ghost=u;a.appendChild(u);n(u,"transform-origin",Ib/parseInt(u.style.width)*
100+"% "+Jb/parseInt(u.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,d=a.dataTransfer,e=c.options;S("dragStart",this,{evt:a});q.eventCanceled?this._onDrop():(S("setupClone",this),q.eventCanceled||(H=eb(k),H.draggable=!1,H.style["will-change"]="",this._hideClone(),D(H,this.options.chosenClass,!1),q.clone=H),c.cloneId=Sa(function(){S("clone",c);q.eventCanceled||(c.options.removeCloneOnHide||E.insertBefore(H,k),c._hideClone(),R({sortable:c,name:"clone"}))}),!b&&D(k,e.dragClass,!0),b?
(Xa=!0,c._loopId=setInterval(c._emulateDragOver,50)):(v(document,"mouseup",c._onDrop),v(document,"touchend",c._onDrop),v(document,"touchcancel",c._onDrop),d&&(d.effectAllowed="move",e.setData&&e.setData.call(c,d,k)),w(document,"drop",c),n(k,"transform","translateZ(0)")),ua=!0,c._dragStartId=Sa(c._dragStarted.bind(c,b,a)),w(document,"selectstart",c),Ha=!0,Da&&n(document.body,"user-select","none"))},_onDragOver:function(a){function b(la,$a){S(la,x,ha({evt:a,isOwner:C,axis:z?"vertical":"horizontal",
revert:l,dragRect:W,targetRect:h,canSort:y,fromSortable:K,target:g,completed:d,onMove:function(Mb,cc){return gb(E,f,k,W,Mb,F(Mb),a,cc)},changed:e},$a))}function c(){b("dragOverAnimationCapture");x.captureAnimationState();x!==K&&K.captureAnimationState()}function d(la){b("dragOverCompleted",{insertion:la});la&&(C?r._hideClone():r._showClone(x),x!==K&&(D(k,L?L.options.ghostClass:r.options.ghostClass,!1),D(k,m.ghostClass,!0)),L!==x&&x!==q.active?L=x:x===q.active&&L&&(L=null),K===x&&(x._ignoreWhileAnimating=
g),x.animateAll(function(){b("dragOverAnimationComplete");x._ignoreWhileAnimating=null}),x!==K&&(K.animateAll(),K._ignoreWhileAnimating=null));if(g===k&&!k.animated||g===f&&!g.animated)va=null;m.dragoverBubble||a.rootEl||g===document||(k.parentNode[O]._isOutsideThisEl(a.target),!la&&qa(a));!m.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return Q=!0}function e(){T=G(k);ja=G(k,m.draggable);R({sortable:x,name:"change",toEl:f,newIndex:T,newDraggableIndex:ja,originalEvent:a})}var f=this.el,g=
a.target,h,l,m=this.options,p=m.group,r=q.active,C=Wa===p,y=m.sort,K=L||r,x=this,Q=!1;if(!ib){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();g=Y(g,m.draggable,f,!0);b("dragOver");if(q.eventCanceled)return Q;if(k.contains(a.target)||g.animated&&g.animatingX&&g.animatingY||x._ignoreWhileAnimating===g)return d(!1);Xa=!1;if(r&&!m.disabled&&(C?y||(l=!E.contains(k)):L===this||(this.lastPutMode=Wa.checkPull(this,r,k,a))&&p.checkPut(this,r,k,a))){var z="vertical"===this._getDirection(a,g);var W=
F(k);b("dragOverValid");if(q.eventCanceled)return Q;if(l)return J=E,c(),this._hideClone(),b("revert"),q.eventCanceled||(oa?E.insertBefore(k,oa):E.appendChild(k)),d(!0);p=cb(f,m.draggable);if(!p||Ub(a,z,this)&&!p.animated){if(p===k)return d(!1);p&&f===a.target&&(g=p);g&&(h=F(g));if(!1!==gb(E,f,k,W,g,h,a,!!g))return c(),f.appendChild(k),J=f,e(),d(!0)}else if(g.parentNode===f){h=F(g);var M=0;M=k.parentNode!==f;var B=!$b(k.animated&&k.toRect||W,g.animated&&g.toRect||h,z);p=z?"top":"left";var fa=xb(g,
"top","top")||xb(k,"top","top"),Ia=fa?fa.scrollTop:void 0;if(va!==g){var Ja=h[p];Ea=!1;Ya=!B&&m.invertSwap||M}M=Vb(a,g,h,z,B?1:m.swapThreshold,null==m.invertedSwapThreshold?m.swapThreshold:m.invertedSwapThreshold,Ya,va===g);if(0!==M){B=G(k);do{B-=M;var ba=J.children[B]}while(ba&&("none"===n(ba,"display")||ba===u))}if(0===M||ba===g)return d(!1);va=g;Fa=M;ba=g.nextElementSibling;B=!1;B=1===M;M=gb(E,f,k,W,g,h,a,B);if(!1!==M){if(1===M||-1===M)B=1===M;ib=!0;setTimeout(Tb,30);c();B&&!ba?f.appendChild(k):
g.parentNode.insertBefore(k,B?ba:g);fa&&Ab(fa,0,Ia-fa.scrollTop);J=k.parentNode;void 0===Ja||Ya||(Qa=Math.abs(Ja-F(g)[p]));e();return d(!0)}}if(f.contains(k))return d(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove);v(document,"touchmove",this._onTouchMove);v(document,"pointermove",this._onTouchMove);v(document,"dragover",qa);v(document,"mousemove",qa);v(document,"touchmove",qa)},_offUpEvents:function(){var a=this.el.ownerDocument;v(a,"mouseup",
this._onDrop);v(a,"touchend",this._onDrop);v(a,"pointerup",this._onDrop);v(a,"touchcancel",this._onDrop);v(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;T=G(k);ja=G(k,c.draggable);S("drop",this,{evt:a});J=k&&k.parentNode;T=G(k);ja=G(k,c.draggable);if(!q.eventCanceled&&(Ea=Ya=ua=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(b,"dragstart",this._onDragStart)),
this._offMoveEvents(),this._offUpEvents(),Da&&n(document.body,"user-select",""),n(k,"transform",""),a&&(Ha&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),u&&u.parentNode&&u.parentNode.removeChild(u),(E===J||L&&"clone"!==L.lastPutMode)&&H&&H.parentNode&&H.parentNode.removeChild(H),k&&(this.nativeDraggable&&v(k,"dragend",this),hb(k),k.style["will-change"]="",Ha&&!ua&&D(k,L?L.options.ghostClass:this.options.ghostClass,!1),D(k,this.options.chosenClass,!1),R({sortable:this,name:"unchoose",
toEl:J,newIndex:null,newDraggableIndex:null,originalEvent:a}),E!==J?(0<=T&&(R({rootEl:J,name:"add",toEl:J,fromEl:E,originalEvent:a}),R({sortable:this,name:"remove",toEl:J,originalEvent:a}),R({rootEl:J,name:"sort",toEl:J,fromEl:E,originalEvent:a}),R({sortable:this,name:"sort",toEl:J,originalEvent:a})),L&&L.save()):T!==sa&&0<=T&&(R({sortable:this,name:"update",toEl:J,originalEvent:a}),R({sortable:this,name:"sort",toEl:J,originalEvent:a})),q.active)))){if(null==T||-1===T)T=sa,ja=Ca;R({sortable:this,
name:"end",toEl:J,originalEvent:a});this.save()}this._nulling()},_nulling:function(){S("nulling",this);E=k=J=u=oa=H=Va=ka=pa=Z=Ha=T=ja=sa=Ca=va=Fa=L=Wa=q.dragged=q.ghost=q.clone=q.active=null;Ra.forEach(function(a){a.checked=!0});Ra.length=mb=nb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":k&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},
toArray:function(){for(var a=[],b,c=this.el.children,d=0,e=c.length,f=this.options;d<e;d++)b=c[d],Y(b,f.draggable,this.el,!1)&&a.push(b.getAttribute(f.dataIdAttr)||Wb(b));return a},sort:function(a,b){var c={},d=this.el;this.toArray().forEach(function(e,f){f=d.children[f];Y(f,this.options.draggable,d,!1)&&(c[e]=f)},this);b&&this.captureAnimationState();a.forEach(function(e){c[e]&&(d.removeChild(c[e]),d.appendChild(c[e]))});b&&this.animateAll()},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},
closest:function(a,b){return Y(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var d=Ba.modifyOption(this,a,b);c[a]="undefined"!==typeof d?d:b;"group"===a&&Db(c)},destroy:function(){S("destroy",this);var a=this.el;a[O]=null;v(a,"mousedown",this._onTapStart);v(a,"touchstart",this._onTapStart);v(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(v(a,"dragover",this),v(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),
function(b){b.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();Pa.splice(Pa.indexOf(this.el),1);this.el=a=null},_hideClone:function(){ka||(S("hideClone",this),q.eventCanceled||(n(H,"display","none"),this.options.removeCloneOnHide&&H.parentNode&&H.parentNode.removeChild(H),ka=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():ka&&(S("showClone",this),q.eventCanceled||(k.parentNode!=E||this.options.group.revertClone?oa?E.insertBefore(H,oa):E.appendChild(H):
E.insertBefore(H,k),this.options.group.revertClone&&this.animate(k,H),n(H,"display",""),ka=!1))}};Za&&w(document,"touchmove",function(a){(q.active||ua)&&a.cancelable&&a.preventDefault()});q.utils={on:w,off:v,css:n,find:wb,is:function(a,b){return!!Y(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:zb,closest:Y,toggleClass:D,clone:eb,index:G,nextTick:Sa,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:Cb,getChild:Oa};q.get=
function(a){return a[O]};q.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(d){if(!d.prototype||!d.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(d));d.utils&&(q.utils=ha({},q.utils,d.utils));Ba.mount(d)})};q.create=function(a,b){return new q(a,b)};q.version="1.13.0";var I=[],Ka,pb,qb=!1,rb,sb,ab,wa,tb=zb(function(a,b,c,d){if(b.scroll){var e=
(a.touches?a.touches[0]:a).clientX,f=(a.touches?a.touches[0]:a).clientY,g=b.scrollSensitivity,h=b.scrollSpeed,l=ea(),m=!1;if(pb!==c){pb=c;Ta();Ka=b.scroll;var p=b.scrollFn;!0===Ka&&(Ka=ia(c,!0))}c=0;var r=Ka;do{var C=r,y=F(C),K=y.top,x=y.bottom,Q=y.left,z=y.right,W=y.width;y=y.height;var M=void 0,B=void 0,fa=C.scrollWidth,Ia=C.scrollHeight;B=n(C);var Ja=C.scrollLeft,ba=C.scrollTop;C===l?(M=W<fa&&("auto"===B.overflowX||"scroll"===B.overflowX||"visible"===B.overflowX),B=y<Ia&&("auto"===B.overflowY||
"scroll"===B.overflowY||"visible"===B.overflowY)):(M=W<fa&&("auto"===B.overflowX||"scroll"===B.overflowX),B=y<Ia&&("auto"===B.overflowY||"scroll"===B.overflowY));Q=M&&(Math.abs(z-e)<=g&&Ja+W<fa)-(Math.abs(Q-e)<=g&&!!Ja);K=B&&(Math.abs(x-f)<=g&&ba+y<Ia)-(Math.abs(K-f)<=g&&!!ba);if(!I[c])for(x=0;x<=c;x++)I[x]||(I[x]={});if(I[c].vx!=Q||I[c].vy!=K||I[c].el!==C)if(I[c].el=C,I[c].vx=Q,I[c].vy=K,clearInterval(I[c].pid),0!=Q||0!=K)m=!0,I[c].pid=setInterval(function(){d&&0===this.layer&&q.active._onTouchMove(ab);
var la=I[this.layer].vy?I[this.layer].vy*h:0,$a=I[this.layer].vx?I[this.layer].vx*h:0;"function"===typeof p&&"continue"!==p.call(q.dragged.parentNode[O],$a,la,a,ab,I[this.layer].el)||Ab(I[this.layer].el,$a,la)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&r!==l&&(r=ia(r,!1)));qb=m}},30),Nb=function(a){var b=a.originalEvent,c=a.putSortable,d=a.dragEl,e=a.activeSortable,f=a.dispatchSortableEvent,g=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(e=c||e,g(),b=b.changedTouches&&b.changedTouches.length?
b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),e&&!e.el.contains(b)&&(f("spill"),this.onSpill({dragEl:d,putSortable:c})))};jb.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=Oa(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);this.sortable.animateAll();
a&&a.animateAll()},drop:Nb};N(jb,{pluginName:"revertOnSpill"});kb.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Nb};N(kb,{pluginName:"removeOnSpill"});var X,t=[],U=[],La,aa,Ma=!1,V=!1,xa=!1,A,ra,bb;q.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=
this[b].bind(this))}a.prototype={dragStarted:function(b){b=b.originalEvent;this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):this.options.supportPointer?w(document,"pointermove",this._handleFallbackAutoScroll):b.touches?w(document,"touchmove",this._handleFallbackAutoScroll):w(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},drop:function(){this.sortable.nativeDraggable?
v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(wa);Ta();clearTimeout(ya);ya=void 0},nulling:function(){ab=pb=Ka=qb=wa=rb=sb=null;I.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,c){var d=this,e=(b.touches?b.touches[0]:b).clientX,f=(b.touches?b.touches[0]:b).clientY,
g=document.elementFromPoint(e,f);ab=b;if(c||Aa||da||Da){tb(b,this.options,g,c);var h=ia(g,!0);!qb||wa&&e===rb&&f===sb||(wa&&clearInterval(wa),wa=setInterval(function(){var l=ia(document.elementFromPoint(e,f),!0);l!==h&&(h=l,Ta());tb(b,d.options,l,c)},10),rb=e,sb=f)}else this.options.bubbleScroll&&ia(g,!0)!==ea()?tb(b,this.options,ia(g,!1),!1):Ta()}};return N(a,{pluginName:"scroll",initializeByDefault:!0})});q.mount(kb,jb);q.mount(new function(){function a(){this.defaults={swapClass:"sortable-swap-highlight"}}
a.prototype={dragStart:function(b){X=b.dragEl},dragOverValid:function(b){var c=b.completed,d=b.target,e=b.onMove,f=b.changed,g=b.cancel;if(b.activeSortable.options.swap){var h=this.sortable.el;b=this.options;d&&d!==h&&(h=X,!1!==e(d)?(D(d,b.swapClass,!0),X=d):X=null,h&&h!==X&&D(h,b.swapClass,!1));f();c(!0);g()}},drop:function(b){var c=b.activeSortable,d=b.putSortable;b=b.dragEl;var e=d||this.sortable,f=this.options;X&&D(X,f.swapClass,!1);if(X&&(f.swap||d&&d.options.swap)&&b!==X){e.captureAnimationState();
e!==c&&c.captureAnimationState();d=X;f=b.parentNode;var g=d.parentNode;if(f&&g&&!f.isEqualNode(d)&&!g.isEqualNode(b)){var h=G(b);var l=G(d);f.isEqualNode(g)&&h<l&&l++;f.insertBefore(d,f.children[h]);g.insertBefore(b,g.children[l])}e.animateAll();e!==c&&c.animateAll()}},nulling:function(){X=null}};return N(a,{pluginName:"swap",eventProperties:function(){return{swapItem:X}}})});q.mount(new function(){function a(b){for(var c in this)"_"===c.charAt(0)&&"function"===typeof this[c]&&(this[c]=this[c].bind(this));
b.options.supportPointer?w(document,"pointerup",this._deselectMultiDrag):(w(document,"mouseup",this._deselectMultiDrag),w(document,"touchend",this._deselectMultiDrag));w(document,"keydown",this._checkKeyDown);w(document,"keyup",this._checkKeyUp);this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(d,e){var f="";t.length&&aa===b?t.forEach(function(g,h){f+=(h?", ":"")+g.textContent}):f=e.textContent;d.setData("Text",f)}}}a.prototype={multiDragKeyDown:!1,isMultiDrag:!1,
delayStartGlobal:function(b){A=b.dragEl},delayEnded:function(){this.isMultiDrag=~t.indexOf(A)},setupClone:function(b){var c=b.sortable;b=b.cancel;if(this.isMultiDrag){for(var d=0;d<t.length;d++)U.push(eb(t[d])),U[d].sortableIndex=t[d].sortableIndex,U[d].draggable=!1,U[d].style["will-change"]="",D(U[d],this.options.selectedClass,!1),t[d]===A&&D(U[d],this.options.chosenClass,!1);c._hideClone();b()}},clone:function(b){var c=b.sortable,d=b.rootEl,e=b.dispatchSortableEvent;b=b.cancel;this.isMultiDrag&&
!this.options.removeCloneOnHide&&t.length&&aa===c&&(Eb(!0,d),e("clone"),b())},showClone:function(b){var c=b.cloneNowShown,d=b.cancel;this.isMultiDrag&&(Eb(!1,b.rootEl),U.forEach(function(e){n(e,"display","")}),c(),bb=!1,d())},hideClone:function(b){var c=this,d=b.cloneNowHidden;b=b.cancel;this.isMultiDrag&&(U.forEach(function(e){n(e,"display","none");c.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)}),d(),bb=!0,b())},dragStartGlobal:function(b){!this.isMultiDrag&&aa&&aa.multiDrag._deselectMultiDrag();
t.forEach(function(c){c.sortableIndex=G(c)});t=t.sort(function(c,d){return c.sortableIndex-d.sortableIndex});xa=!0},dragStarted:function(b){var c=this;b=b.sortable;if(this.isMultiDrag){if(this.options.sort&&(b.captureAnimationState(),this.options.animation)){t.forEach(function(e){e!==A&&n(e,"position","absolute")});var d=F(A,!1,!0,!0);t.forEach(function(e){e!==A&&Bb(e,d)});Ma=V=!0}b.animateAll(function(){Ma=V=!1;c.options.animation&&t.forEach(function(e){fb(e)});c.options.sort&&Ua()})}},dragOver:function(b){var c=
b.target,d=b.completed;b=b.cancel;V&&~t.indexOf(c)&&(d(!1),b())},revert:function(b){var c=b.fromSortable,d=b.rootEl,e=b.sortable,f=b.dragRect;1<t.length&&(t.forEach(function(g){e.addAnimationState({target:g,rect:V?F(g):f});fb(g);g.fromRect=f;c.removeAnimationState(g)}),V=!1,Yb(!this.options.removeCloneOnHide,d))},dragOverCompleted:function(b){var c=b.sortable,d=b.isOwner,e=b.activeSortable,f=b.parentEl,g=b.putSortable,h=this.options;if(b.insertion){d&&e._hideClone();Ma=!1;if(h.animation&&1<t.length&&
(V||!d&&!e.options.sort&&!g)){var l=F(A,!1,!0,!0);t.forEach(function(m){m!==A&&(Bb(m,l),f.appendChild(m))});V=!0}d||(V||Ua(),1<t.length?(b=bb,e._showClone(c),e.options.animation&&!bb&&b&&U.forEach(function(m){e.addAnimationState({target:m,rect:ra});m.fromRect=ra;m.thisAnimationDuration=null})):e._showClone(c))}},dragOverAnimationCapture:function(b){var c=b.dragRect,d=b.isOwner;b=b.activeSortable;t.forEach(function(e){e.thisAnimationDuration=null});b.options.animation&&!d&&b.multiDrag.isMultiDrag&&
(ra=N({},c),c=na(A,!0),ra.top-=c.f,ra.left-=c.e)},dragOverAnimationComplete:function(){V&&(V=!1,Ua())},drop:function(b){var c=b.originalEvent,d=b.rootEl,e=b.parentEl,f=b.sortable,g=b.dispatchSortableEvent,h=b.oldIndex,l=(b=b.putSortable)||this.sortable;if(c){var m=this.options,p=e.children;if(!xa)if(m.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),D(A,m.selectedClass,!~t.indexOf(A)),~t.indexOf(A))t.splice(t.indexOf(A),1),La=null,za({sortable:f,rootEl:d,name:"deselect",targetEl:A,
originalEvt:c});else{t.push(A);za({sortable:f,rootEl:d,name:"select",targetEl:A,originalEvt:c});if(c.shiftKey&&La&&f.el.contains(La)){var r=G(La),C=G(A);if(~r&&~C&&r!==C){if(C>r){var y=r;r=C}else y=C,r+=1;for(;y<r;y++)~t.indexOf(p[y])||(D(p[y],m.selectedClass,!0),t.push(p[y]),za({sortable:f,rootEl:d,name:"select",targetEl:p[y],originalEvt:c}))}}else La=A;aa=l}if(xa&&this.isMultiDrag){if((e[O].options.sort||e!==d)&&1<t.length){var K=F(A),x=G(A,":not(."+this.options.selectedClass+")");!Ma&&m.animation&&
(A.thisAnimationDuration=null);l.captureAnimationState();if(!Ma&&(m.animation&&(A.fromRect=K,t.forEach(function(z){z.thisAnimationDuration=null;if(z!==A){var W=V?F(z):K;z.fromRect=W;l.addAnimationState({target:z,rect:W})}})),Ua(),t.forEach(function(z){p[x]?e.insertBefore(z,p[x]):e.appendChild(z);x++}),h===G(A))){var Q=!1;t.forEach(function(z){z.sortableIndex!==G(z)&&(Q=!0)});Q&&g("update")}t.forEach(function(z){fb(z)});l.animateAll()}aa=l}(d===e||b&&"clone"!==b.lastPutMode)&&U.forEach(function(z){z.parentNode&&
z.parentNode.removeChild(z)})}},nullingGlobal:function(){this.isMultiDrag=xa=!1;U.length=0},destroyGlobal:function(){this._deselectMultiDrag();v(document,"pointerup",this._deselectMultiDrag);v(document,"mouseup",this._deselectMultiDrag);v(document,"touchend",this._deselectMultiDrag);v(document,"keydown",this._checkKeyDown);v(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(b){if(!("undefined"!==typeof xa&&xa||aa!==this.sortable||b&&Y(b.target,this.options.draggable,this.sortable.el,
!1)||b&&0!==b.button))for(;t.length;){var c=t[0];D(c,this.options.selectedClass,!1);t.shift();za({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:c,originalEvt:b})}},_checkKeyDown:function(b){b.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(b){b.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}};return N(a,{pluginName:"multiDrag",utils:{select:function(b){var c=b.parentNode[O];c&&c.options.multiDrag&&!~t.indexOf(b)&&(aa&&aa!==c&&
(aa.multiDrag._deselectMultiDrag(),aa=c),D(b,c.options.selectedClass,!0),t.push(b))},deselect:function(b){var c=b.parentNode[O],d=t.indexOf(b);c&&c.options.multiDrag&&~d&&(D(b,c.options.selectedClass,!1),t.splice(d,1))}},eventProperties:function(){var b=this,c=[],d=[];t.forEach(function(e){c.push({multiDragElement:e,index:e.sortableIndex});var f=V&&e!==A?-1:V?G(e,":not(."+b.options.selectedClass+")"):G(e);d.push({multiDragElement:e,index:f})});return{items:Pb(t),clones:[].concat(U),oldIndicies:c,
newIndicies:d}},optionListeners:{multiDragKey:function(b){b=b.toLowerCase();"ctrl"===b?b="Control":1<b.length&&(b=b.charAt(0).toUpperCase()+b.substr(1));return b}}})});return q});

(function(e,g){"function"===typeof define&&define.amd?define(["jquery"],g):"object"===typeof exports?module.exports=g(require("jquery")):e.bootbox=g(e.jQuery)})(this,function init(e,g){function z(a,b){var c=a.length,d={};if(1>c||2<c)throw Error("Invalid argument length");2===c||"string"===typeof a[0]?(d[b[0]]=a[0],d[b[1]]=a[1]):d=a[0];return d}function u(a,b,c,d){if(d&&d[0]){var k=d[0].locale||l.locale;if(d[0].swapButtonOrder||l.swapButtonOrder)b=b.reverse()}for(var h=b,g={},f=0,q=h.length;f<q;f++){var r=
h[f],A=r.toLowerCase();r=r.toUpperCase();var w=p[k];g[A]={label:w?w[r]:p.en[r]}}return B(e.extend(!0,{},{className:"bootbox-"+a,buttons:g},z(d,c)),b)}function B(a,b){var c={};m(b,function(a,b){c[b]=!0});m(a.buttons,function(a){if(c[a]===g)throw Error('button key "'+a+'" is not allowed (options are '+b.join(" ")+")");});return a}function C(a){if("object"!==typeof a)throw Error("Please supply an object of options");if(!a.message)throw Error('"message" option must not be null or an empty string.');a=
e.extend({},l,a);a.buttons||(a.buttons={});var b=a.buttons;var c=Object.keys(b).length;m(b,function(d,k,h){e.isFunction(k)&&(k=b[d]={callback:k});if("object"!==e.type(k))throw Error('button with key "'+d+'" must be an object');k.label||(k.label=d);k.className||(d=a.swapButtonOrder?0===h:h===c-1,k.className=2>=c&&d?"btn-primary":"btn-secondary btn-default")});return a}function m(a,b){var c=0;e.each(a,function(a,e){b(a,e,c++)})}function x(a){a.data.dialog.find(".bootbox-accept").first().trigger("focus")}
function D(a){a.target===a.data.dialog[0]&&a.data.dialog.remove()}function E(a){a.target===a.data.dialog[0]&&(a.data.dialog.off("escape.close.bb"),a.data.dialog.off("click"))}function v(a,b,c){a.stopPropagation();a.preventDefault();e.isFunction(c)&&!1===c.call(b,a)||b.modal("hide")}function F(a,b,c){var d=!1,e=!0,h=!0;if("date"===a)b===g||(e=/(\d{4})-(\d{2})-(\d{2})/.test(b))?c===g||(h=/(\d{4})-(\d{2})-(\d{2})/.test(c))||console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your max value may not be enforced by this browser.'):
console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your min value may not be enforced by this browser.');else if("time"===a){if(b!==g&&!(e=y(b)))throw Error('"min" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.');if(c!==g&&!(h=y(c)))throw Error('"max" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.');
}else{if(b!==g&&isNaN(b))throw Error('"min" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-min for more information.');if(c!==g&&isNaN(c))throw Error('"max" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.');}if(e&&h){if(c<=b)throw Error('"max" must be greater than "min". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.');d=!0}return d}
function y(a){return/([01][0-9]|2[0-3]):[0-5][0-9]?:[0-5][0-9]/.test(a)}Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),d=c.length;return function(e){if("function"!==typeof e&&("object"!==typeof e||null===e))throw new TypeError("Object.keys called on non-object");var h=[],g;for(g in e)a.call(e,g)&&h.push(g);if(b)for(g=
0;g<d;g++)a.call(e,c[g])&&h.push(c[g]);return h}}());var f={VERSION:"5.0.0"},p={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"}},t={text:'<input class="bootbox-input bootbox-input-text form-control" autocomplete="off" type="text" />',textarea:'<textarea class="bootbox-input bootbox-input-textarea form-control"></textarea>',email:'<input class="bootbox-input bootbox-input-email form-control" autocomplete="off" type="email" />',select:'<select class="bootbox-input bootbox-input-select form-control"></select>',
checkbox:'<div class="form-check checkbox"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-checkbox" type="checkbox" /></label></div>',radio:'<div class="form-check radio"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-radio" type="radio" name="bootbox-radio" /></label></div>',date:'<input class="bootbox-input bootbox-input-date form-control" autocomplete="off" type="date" />',time:'<input class="bootbox-input bootbox-input-time form-control" autocomplete="off" type="time" />',
number:'<input class="bootbox-input bootbox-input-number form-control" autocomplete="off" type="number" />',password:'<input class="bootbox-input bootbox-input-password form-control" autocomplete="off" type="password" />',range:'<input class="bootbox-input bootbox-input-range form-control-range" autocomplete="off" type="range" />'},l={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body",value:"",inputType:"text",swapButtonOrder:!1,centerVertical:!1,multiple:!1,
scrollable:!1};f.locales=function(a){return a?p[a]:p};f.addLocale=function(a,b){e.each(["OK","CANCEL","CONFIRM"],function(a,d){if(!b[d])throw Error('Please supply a translation for "'+d+'"');});p[a]={OK:b.OK,CANCEL:b.CANCEL,CONFIRM:b.CONFIRM};return f};f.removeLocale=function(a){if("en"!==a)delete p[a];else throw Error('"en" is used as the default and fallback locale and cannot be removed.');return f};f.setLocale=function(a){return f.setDefaults("locale",a)};f.setDefaults=function(){var a={};2===
arguments.length?a[arguments[0]]=arguments[1]:a=arguments[0];e.extend(l,a);return f};f.hideAll=function(){e(".bootbox").modal("hide");return f};f.init=function(a){return init(a||e)};f.dialog=function(a){if(e.fn.modal===g)throw Error('"$.fn.modal" is not defined; please double check you have included the Bootstrap JavaScript library. See https://getbootstrap.com/docs/4.4/getting-started/javascript/ for more details.');a=C(a);if(e.fn.modal.Constructor.VERSION){a.fullBootstrapVersion=e.fn.modal.Constructor.VERSION;
var b=a.fullBootstrapVersion.indexOf(".");a.bootstrap=a.fullBootstrapVersion.substring(0,b)}else a.bootstrap="2",a.fullBootstrapVersion="2.3.2",console.warn("Bootbox will *mostly* work with Bootstrap 2, but we do not officially support it. Please upgrade, if possible.");var c=e('<div class="bootbox modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="bootbox-body"></div></div></div></div></div>');b=c.find(".modal-dialog");
var d=c.find(".modal-body"),f=e('<div class="modal-header"><h5 class="modal-title"></h5></div>'),h=e('<div class="modal-footer"></div>'),l=a.buttons,n={onEscape:a.onEscape};d.find(".bootbox-body").html(a.message);0<Object.keys(a.buttons).length&&(m(l,function(a,b){var c=e('<button type="button" class="btn"></button>');c.data("bb-handler",a);c.addClass(b.className);switch(a){case "ok":case "confirm":c.addClass("bootbox-accept");break;case "cancel":c.addClass("bootbox-cancel")}c.html(b.label);h.append(c);
n[a]=b.callback}),d.after(h));!0===a.animate&&c.addClass("fade");a.className&&c.addClass(a.className);if(a.size)switch("3.1">a.fullBootstrapVersion.substring(0,3)&&console.warn('"size" requires Bootstrap 3.1.0 or higher. You appear to be using '+a.fullBootstrapVersion+". Please upgrade to use this option."),a.size){case "small":case "sm":b.addClass("modal-sm");break;case "large":case "lg":b.addClass("modal-lg");break;case "extra-large":case "xl":b.addClass("modal-xl"),"4.2">a.fullBootstrapVersion.substring(0,
3)&&console.warn('Using size "xl"/"extra-large" requires Bootstrap 4.2.0 or higher. You appear to be using '+a.fullBootstrapVersion+". Please upgrade to use this option.")}a.scrollable&&(b.addClass("modal-dialog-scrollable"),"4.3">a.fullBootstrapVersion.substring(0,3)&&console.warn('Using "scrollable" requires Bootstrap 4.3.0 or higher. You appear to be using '+a.fullBootstrapVersion+". Please upgrade to use this option."));a.title&&(d.before(f),c.find(".modal-title").html(a.title));a.closeButton&&
(f=e('<button type="button" class="bootbox-close-button close" aria-hidden="true">&times;</button>'),a.title?3<a.bootstrap?c.find(".modal-header").append(f):c.find(".modal-header").prepend(f):f.prependTo(d));a.centerVertical&&(b.addClass("modal-dialog-centered"),"4.0.0">a.fullBootstrapVersion&&console.warn('"centerVertical" requires Bootstrap 4.0.0-beta.3 or higher. You appear to be using '+a.fullBootstrapVersion+". Please upgrade to use this option."));c.one("hide.bs.modal",{dialog:c},E);if(a.onHide)if(e.isFunction(a.onHide))c.on("hide.bs.modal",
a.onHide);else throw Error('Argument supplied to "onHide" must be a function');c.one("hidden.bs.modal",{dialog:c},D);if(a.onHidden)if(e.isFunction(a.onHidden))c.on("hidden.bs.modal",a.onHidden);else throw Error('Argument supplied to "onHidden" must be a function');if(a.onShow)if(e.isFunction(a.onShow))c.on("show.bs.modal",a.onShow);else throw Error('Argument supplied to "onShow" must be a function');c.one("shown.bs.modal",{dialog:c},x);if(a.onShown)if(e.isFunction(a.onShown))c.on("shown.bs.modal",
a.onShown);else throw Error('Argument supplied to "onShown" must be a function');if("static"!==a.backdrop)c.on("click.dismiss.bs.modal",function(a){c.children(".modal-backdrop").length&&(a.currentTarget=c.children(".modal-backdrop").get(0));a.target===a.currentTarget&&c.trigger("escape.close.bb")});c.on("escape.close.bb",function(a){n.onEscape&&v(a,c,n.onEscape)});c.on("click",".modal-footer button:not(.disabled)",function(a){var b=e(this).data("bb-handler");b!==g&&v(a,c,n[b])});c.on("click",".bootbox-close-button",
function(a){v(a,c,n.onEscape)});c.on("keyup",function(a){27===a.which&&c.trigger("escape.close.bb")});e(a.container).append(c);c.modal({backdrop:a.backdrop?"static":!1,keyboard:!1,show:!1});a.show&&c.modal("show");return c};f.alert=function(){var a=u("alert",["ok"],["message","callback"],arguments);if(a.callback&&!e.isFunction(a.callback))throw Error('alert requires the "callback" property to be a function when provided');a.buttons.ok.callback=a.onEscape=function(){return e.isFunction(a.callback)?
a.callback.call(this):!0};return f.dialog(a)};f.confirm=function(){var a=u("confirm",["cancel","confirm"],["message","callback"],arguments);if(!e.isFunction(a.callback))throw Error("confirm requires a callback");a.buttons.cancel.callback=a.onEscape=function(){return a.callback.call(this,!1)};a.buttons.confirm.callback=function(){return a.callback.call(this,!0)};return f.dialog(a)};f.prompt=function(){var a=e('<form class="bootbox-form"></form>');var b=u("prompt",["cancel","confirm"],["title","callback"],
arguments);b.value||(b.value=l.value);b.inputType||(b.inputType=l.inputType);var c=b.show===g?l.show:b.show;b.show=!1;b.buttons.cancel.callback=b.onEscape=function(){return b.callback.call(this,null)};b.buttons.confirm.callback=function(){if("checkbox"===b.inputType)var a=d.find("input:checked").map(function(){return e(this).val()}).get();else if("radio"===b.inputType)a=d.find("input:checked").val();else{if(d[0].checkValidity&&!d[0].checkValidity())return!1;a="select"===b.inputType&&!0===b.multiple?
d.find("option:selected").map(function(){return e(this).val()}).get():d.val()}return b.callback.call(this,a)};if(!b.title)throw Error("prompt requires a title");if(!e.isFunction(b.callback))throw Error("prompt requires a callback");if(!t[b.inputType])throw Error("Invalid prompt type");var d=e(t[b.inputType]);switch(b.inputType){case "text":case "textarea":case "email":case "password":d.val(b.value);b.placeholder&&d.attr("placeholder",b.placeholder);b.pattern&&d.attr("pattern",b.pattern);b.maxlength&&
d.attr("maxlength",b.maxlength);b.required&&d.prop({required:!0});b.rows&&!isNaN(parseInt(b.rows))&&"textarea"===b.inputType&&d.attr({rows:b.rows});break;case "date":case "time":case "number":case "range":d.val(b.value);b.placeholder&&d.attr("placeholder",b.placeholder);b.pattern&&d.attr("pattern",b.pattern);b.required&&d.prop({required:!0});if("date"!==b.inputType&&b.step)if("any"===b.step||!isNaN(b.step)&&0<parseFloat(b.step))d.attr("step",b.step);else throw Error('"step" must be a valid positive number or the value "any". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-step for more information.');
F(b.inputType,b.min,b.max)&&(b.min!==g&&d.attr("min",b.min),b.max!==g&&d.attr("max",b.max));break;case "select":var k={};var h=b.inputOptions||[];if(!e.isArray(h))throw Error("Please pass an array of input options");if(!h.length)throw Error('prompt with "inputType" set to "select" requires at least one option');b.placeholder&&d.attr("placeholder",b.placeholder);b.required&&d.prop({required:!0});b.multiple&&d.prop({multiple:!0});m(h,function(a,b){var c=d;if(b.value===g||b.text===g)throw Error('each option needs a "value" property and a "text" property');
b.group&&(k[b.group]||(k[b.group]=e("<optgroup />").attr("label",b.group)),c=k[b.group]);var f=e("<option></option>");f.attr("value",b.value).text(b.text);c.append(f)});m(k,function(a,b){d.append(b)});d.val(b.value);break;case "checkbox":var p=e.isArray(b.value)?b.value:[b.value];h=b.inputOptions||[];if(!h.length)throw Error('prompt with "inputType" set to "checkbox" requires at least one option');d=e('<div class="bootbox-checkbox-list"></div>');m(h,function(a,c){if(c.value===g||c.text===g)throw Error('each option needs a "value" property and a "text" property');
var f=e(t[b.inputType]);f.find("input").attr("value",c.value);f.find("label").append("\n"+c.text);m(p,function(a,b){b===c.value&&f.find("input").prop("checked",!0)});d.append(f)});break;case "radio":if(b.value!==g&&e.isArray(b.value))throw Error('prompt with "inputType" set to "radio" requires a single, non-array value for "value"');h=b.inputOptions||[];if(!h.length)throw Error('prompt with "inputType" set to "radio" requires at least one option');d=e('<div class="bootbox-radiobutton-list"></div>');
var n=!0;m(h,function(a,c){if(c.value===g||c.text===g)throw Error('each option needs a "value" property and a "text" property');var f=e(t[b.inputType]);f.find("input").attr("value",c.value);f.find("label").append("\n"+c.text);b.value!==g&&c.value===b.value&&(f.find("input").prop("checked",!0),n=!1);d.append(f)});n&&d.find('input[type="radio"]').first().prop("checked",!0)}a.append(d);a.on("submit",function(a){a.preventDefault();a.stopPropagation();q.find(".bootbox-accept").trigger("click")});""!==
e.trim(b.message)&&(h=e('<div class="bootbox-prompt-message"></div>').html(b.message),a.prepend(h));b.message=a;var q=f.dialog(b);q.off("shown.bs.modal",x);q.on("shown.bs.modal",function(){d.focus()});!0===c&&q.modal("show");return q};return f});
/**
 * bootbox.js 5.2.0
 *
 * http://bootboxjs.com/license.txt
 */
!function(C,a){'use strict';'function'==typeof define&&define.amd?define(['bootbox'],a):'object'==typeof module&&module.exports?a(require('./bootbox')):a(C.bootbox)}(this,function(C){'use strict';C.addLocale('ar',{OK:'موافق',CANCEL:'الغاء',CONFIRM:'تأكيد'}),C.addLocale('az',{OK:'Ok',CANCEL:'İmtina et',CONFIRM:'Təsdiq et'}),C.addLocale('bg_BG',{OK:'Ок',CANCEL:'Отказ',CONFIRM:'Потвърждавам'}),C.addLocale('br',{OK:'Ok',CANCEL:'Cancelar',CONFIRM:'Sim'}),C.addLocale('cs',{OK:'Ok',CANCEL:'Zrušit',CONFIRM:'Potvrdit'}),C.addLocale('da',{OK:'Ok',CANCEL:'Annuller',CONFIRM:'Accepter'}),C.addLocale('de',{OK:'Ok',CANCEL:'Abbrechen',CONFIRM:'Akzeptieren'}),C.addLocale('el',{OK:'Εντάξει',CANCEL:'Ακύρωση',CONFIRM:'Επιβεβαίωση'}),C.addLocale('en',{OK:'Ok',CANCEL:'Cancel',CONFIRM:'Ok'}),C.addLocale('es',{OK:'Ok',CANCEL:'Cancelar',CONFIRM:'Aceptar'}),C.addLocale('eu',{OK:'Ok',CANCEL:'Ezeztatu',CONFIRM:'Onartu'}),C.addLocale('et',{OK:'Ok',CANCEL:'Katkesta',CONFIRM:'Ok'}),C.addLocale('fa',{OK:'قبول',CANCEL:'لغو',CONFIRM:'تایید'}),C.addLocale('fi',{OK:'Ok',CANCEL:'Peruuta',CONFIRM:'Ok'}),C.addLocale('fr',{OK:'Ok',CANCEL:'Annuler',CONFIRM:'Confirmer'}),C.addLocale('he',{OK:'אישור',CANCEL:'ביטול',CONFIRM:'אישור'}),C.addLocale('hu',{OK:'Ok',CANCEL:'Mégsem',CONFIRM:'Megerősít'}),C.addLocale('hr',{OK:'Ok',CANCEL:'Odustani',CONFIRM:'Potvrdi'}),C.addLocale('id',{OK:'Ok',CANCEL:'Batal',CONFIRM:'Ok'}),C.addLocale('it',{OK:'Ok',CANCEL:'Annulla',CONFIRM:'Conferma'}),C.addLocale('ja',{OK:'Ok',CANCEL:'キャンセル',CONFIRM:'確認'}),C.addLocale('ko',{OK:'Ok',CANCEL:'취소',CONFIRM:'확인'}),C.addLocale('lt',{OK:'Gerai',CANCEL:'Atšaukti',CONFIRM:'Patvirtinti'}),C.addLocale('lv',{OK:'Labi',CANCEL:'Atcelt',CONFIRM:'Apstiprināt'}),C.addLocale('nl',{OK:'Ok',CANCEL:'Annuleer',CONFIRM:'Ok'}),C.addLocale('no',{OK:'Ok',CANCEL:'Avbryt',CONFIRM:'Ok'}),C.addLocale('pl',{OK:'Ok',CANCEL:'Anuluj',CONFIRM:'Potwierdź'}),C.addLocale('pt',{OK:'Ok',CANCEL:'Cancelar',CONFIRM:'Confirmar'}),C.addLocale('ru',{OK:'Ok',CANCEL:'Отмена',CONFIRM:'Подтвердить'}),C.addLocale('sk',{OK:'Ok',CANCEL:'Zrušiť',CONFIRM:'Potvrdiť'}),C.addLocale('sl',{OK:'Ok',CANCEL:'Prekliči',CONFIRM:'Potrdi'}),C.addLocale('sq',{OK:'Ok',CANCEL:'Anulo',CONFIRM:'Prano'}),C.addLocale('sv',{OK:'Ok',CANCEL:'Avbryt',CONFIRM:'Ok'}),C.addLocale('sw',{OK:'Sawa',CANCEL:'Ghairi',CONFIRM:'Thibitisha'}),C.addLocale('ta',{OK:'சரி',CANCEL:'ரத்து செய்',CONFIRM:'உறுதி செய்'}),C.addLocale('th',{OK:'ตกลง',CANCEL:'ยกเลิก',CONFIRM:'ยืนยัน'}),C.addLocale('tr',{OK:'Tamam',CANCEL:'İptal',CONFIRM:'Onayla'}),C.addLocale('uk',{OK:'Ok',CANCEL:'Відміна',CONFIRM:'Прийняти'}),C.addLocale('zh_CN',{OK:'Ok',CANCEL:'取消',CONFIRM:'确认'}),C.addLocale('zh_TW',{OK:'Ok',CANCEL:'取消',CONFIRM:'確認'})});

const App=(()=>{const aa=(()=>{if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;const a=["("," -webkit- -moz- -o- -ms- ".split(" ").join("touch-enabled),("),"heartz)"].join("");return window.matchMedia(a).matches})(),ra=(()=>{const a=document.createElement("canvas");return a.getContext&&a.getContext("2d")?0==a.toDataURL("image/webp").indexOf("data:image/webp"):!1})();let z=null;/(iPad|iPhone|iPod)/.test(navigator.userAgent);let N=!1;var C=0,G=0,Q=1,ka="collage.jpg",
R="collage",W="jpg";const ba=window.loadImage;let d,S,ca,I=25,T=!1,da,ea,O=null,U=0;const A=(a,f="")=>{a=$("#wait").css("display",a?"flex":"none");$(".msg",a).html(f?f+"&hellip;":"");return new Promise(e=>{setTimeout(e,99)})},la=(a,f)=>{var e={"4x3":4/3,"1x1":1,"3x4":.75,"3x1":3};let l=a/f,k=-1,c;for(let b in e)if(-1===k||Math.abs(e[b]-l)<k)c=b,k=Math.abs(e[b]-l);console.log("Current canvas resolution ("+a+"x"+f+") best matches aspect ratio "+c+",");e="/js/templates_"+c+(ZMprops.debug?"":".min")+
".js";console.log("Loading templates from "+e);z=null;$.ajax({url:e,dataType:"script",error:()=>{$("#tmplBtn").attr("disabled",!0).addClass("disabled");console.log("No templates for resolution",a,f)},success:()=>{$("#tmplBtn").attr("disabled",!1).removeClass("disabled")}})},P=a=>{const f=d.getObjects("borderedimage");for(let e=0;e<f.length;e++)f[e].minimized&&f[e].set("visible",a);d.requestRenderAll()},fa=a=>{const f=d.getObjects("borderedimage").length,e=[];return f+a>I?(0<f&&f<I&&e.push(lib.word(1193,
f)),f===I?e.push(lib.word(1194,I)):e.push(lib.word(1195,I)),0===I-f?e.push(lib.word(1196)):e.push(lib.word(1197,I-f)),bootbox.alert(e.join("\n")),!1):!0},ma=a=>{"activeSelection"==a.type?bootbox.confirm(lib.word(1229),f=>{f&&d.removeObject(a)}):d.removeObject(a)},sa=(a,f)=>{var e=RegExp("(png|jpe?g|gif|webp|avif|heic|heif)$");const l=a.name.split(".").pop().toLowerCase();if(e.test(l)){var k={minWidth:50,minHeight:50,maxWidth:4E3,maxHeight:4E3,canvas:!0,downsamplingRatio:.25,orientation:!0};if("heic"==
l||"heif"==l){const c=b=>{heic2any({blob:b,toType:"image/png"}).then(h=>{createImageBitmap(h).then(g=>{const m=document.createElement("canvas");m.width=g.width;m.height=g.height;m.getContext("2d").drawImage(g,0,0);f&&f(ba.scale(m,k))})}).catch(h=>{f&&f(null)})};"undefined"==typeof heic2any?$.getScript("/js/heic2any.min.js",()=>{c(a)}):c(a)}else ba(a,(c,b)=>{"error"===c.type?(console.log("WARNING: "+a.name+" could not be loaded (corrupt image?)"),f&&f(null)):f&&f(c)},k)}else e=lib.word(1080,a.name,
"Gif, JPG, PNG, WebP, Avif, Heic, Heif"),bootbox.alert(e),f&&f(null)},oa=(a,f)=>{B();const e=a.length;let l=0,k=10,c=10;if(1==e&&/\.sclg$/.test(a[0].name))bootbox.alert(lib.word(2043,"/shapeCollage/"));else if(1==e&&/\.clg$/.test(a[0].name))na(a[0]);else{var b=h=>{sa(a[h],g=>{if(null!==g){const n=d.getWidth(),p=d.getHeight();let t=g.width;var m=g.height;if(g.width>n||g.height>p)m=Math.max(g.width/n,g.height/p),t=g.width/m,m=g.height/m;if(t>n/1.5||m>p/1.5)t*=.75,m*=.75;d.add(new fabric.Borderedimage(g,
{ppColor:"#fff",ppWidth:Math.min(n/85,p/85),width:t,height:m,orgWidth:g.width,orgHeight:g.height,left:k,top:c,perPixelTargetFind:!0}));k+=10;c+=10;N=!0}++l==e?A(!1):b(h+1)})};0!==e&&fa(e)&&(A(!0,lib.word(1100)),b(0))}},L=a=>{a.width&&(C=a.width,d.setDimensions({width:a.width}));a.height&&(G=a.height,d.setDimensions({height:a.height}));a.zoom&&(Q=a.zoom,$("#canvasZoom").html(Math.round(100*Q)));a.baseName&&(R=a.baseName);if(a.fileName){ka=a.fileName;var f=/(?:(.+)\.([^\.]+))?$/.exec(a.fileName);W=
f[2].toLowerCase();"jpeg"==W&&(W="jpg");R=f[1]}(a.width||a.height)&&$("#canvasSize").html(C+"\u00d7"+G+"px");if(a.width||a.zoom)a=Math.round(C*Q)+"px",f=Math.round(G*Q)+"px",$("canvas,.canvas-container","#canvases").css({width:a,height:f}),$("#layers").css("height",f)},X=(a,f)=>{"jpg"==a&&(a="jpeg");let e=f?4:1;if(f){f=+d.width;const l=+d.height;4E3<Math.max(f,l)*e&&(e=4E3/Math.max(f,l))}P(!1);a=d.toDataURL({multiplier:e,format:a,quality:.95});P(!0);return a},ua=(a,f)=>{const e=f.baseName||R,l=C>
G?"landscape":"portrait";switch(a){case "pdf":const k=f.pdfPaperSize||"exact",c=()=>{const h=X("png",!1),g=new ea({orientation:l,unit:"exact"==k?"px":"mm",format:"exact"==k?[C,G]:k});if("exact"==k)g.addImage(h,"PNG",0,0,C,G);else{const m=g.internal.pageSize.getWidth(),n=g.internal.pageSize.getHeight();"landscape"==l?g.addImage(h,"PNG",(m-n/G*C)/2,0,C/G*n,n):g.addImage(h,"PNG",0,(n-m/C*G)/2,m,G/C*m)}g.save(e+".pdf");N=!1;B()};"undefined"==typeof ea?$.getScript("/js/jspdf.umd.min.js",()=>{ea=window.jspdf.jsPDF;
c()}):c();break;case "jpg":case "png":case "webp":const b=()=>{const h=X(a,f.isHD);fetch(h).then(g=>g.blob()).then(g=>{$("<a>",{href:URL.createObjectURL(g),download:`${e}.${a}`})[0].click()})};f.isHD?ta(lib.word(1087)+' <iconify-icon icon="whh:hdvideo"></iconify-icon> - '+e+"."+a,lib.word(1091),b):(b(),N=!1,B())}},ta=(a,f,e)=>{a=ModalManager.openWindow({title:a,backdrop:!0,closeFn:()=>{m&&clearInterval(m);B()},buttons:{close:!0}});let l=$('<div style="display:flex;align-items:center">').appendTo(a);
const k=$('<div style="width:100%">').appendTo(l),c=$("<div>").appendTo(l),b=$('<button class="btn btn-light">').css("margin-left","1em").prop("disabled",!0).html(f).on("click",e).appendTo(c);k.append('<div class="progress" style="height:25px"><div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width:0"></div></div>');a.append('<ins class="adsbygoogle" style="display:block;width:100%;height:300px;margin-top:1em" data-ad-client="ca-'+ZMprops.google_ad_client+
'" data-ad-slot="'+ZMprops.google_ad_slot_wait+'"></ins>');(adsbygoogle=window.adsbygoogle||[]).push({});const h=$(".progress-bar",l);let g=0;const m=setInterval(()=>{g+=5;h.css("width",g+"%");100<=g&&(clearInterval(m),h.removeClass("progress-bar-animated progress-bar-striped"),b.removeClass("btn-light").addClass("btn-primary").prop("disabled",!1))},500)},ha=a=>{let f=fileType=W,e;O&&(AlignGuideLines.disable(),$("#alignGuidesCheckmark").remove(),O=!1);const l=ModalManager.openWindow({title:lib.word(1087)+
' <iconify-icon inline icon="whh:'+(a?"hd":"sd")+'video"></span>',closeFn:B,backdrop:!0,buttons:{close:!0,apply:{label:lib.word(1136),callback:()=>{var h=$("#fileNameIpt").val().replace("."+fileType,"");ModalManager.closeWindow();L({fileName:h+"."+("pdf"==fileType?f:fileType)});h={baseName:h,isHD:a};"pdf"==fileType&&(h.pdfPaperSize=e);ua(fileType,h)}}}});let k=$('<div class="row">').appendTo(l),c=$('<fieldset class="col-sm-6">').appendTo(k),b=["<legend>"+lib.word(1066)+"</legend>","<form onsubmit=\"$('#applyBtn').click();return false\">",
'<div class="input-group">','<input type="text" class="form-control" id="fileNameIpt" placeholder="'+lib.word(1066)+'">','<div class="input-group-append">','<span class="input-group-text" id="extension">.jpg</span>',"</div>","</div>","</form>"];c.append(b.join(""));c=$('<fieldset class="col-sm-6">').appendTo(k);b=["<legend>"+lib.word(1085)+"</legend>",'<div class="btn-group btn-group-toggle fileTypes">','<button type="button" class="btn btn-secondary" data-filetype="jpg">.JPG</button>','<button type="button" class="btn btn-secondary" data-filetype="png">.PNG</button>',
ra?'<button type="button" class="btn btn-secondary" data-filetype="webp">.WebP</button>':"",a?"":'<div class="btn-group" role="group"><button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown">.PDF</button><div class="dropdown-menu"><button type="button" class="dropdown-item" data-filetype="pdf-exact">Exact</button><button type="button" class="dropdown-item" data-filetype="pdf-a4">A4</button><button type="button" class="dropdown-item" data-filetype="pdf-a3">A3</button><button type="button" class="dropdown-item" data-filetype="pdf-letter">Letter</button><button type="button" class="dropdown-item" data-filetype="pdf-legal">Legal</button></div></div>',
"</div>"];c.append(b.join(""));requestAnimationFrame(()=>{$("button[data-filetype='"+fileType+"']",l)[0].click();$("#fileNameIpt",l).val(R).select().focus()});$("[data-filetype]",l).on("click",({currentTarget:h})=>{const g=$(h).data("filetype").split("-");fileType=g[0];e=null;g[1]&&(e=g[1]);$("#extension",l).html("."+fileType+(e?" ("+e+")":""));$(".fileTypes .btn",l).removeClass("btn-primary").addClass("btn-secondary");e?$(".dropdown-toggle",".fileTypes").removeClass("btn-secondary").addClass("btn-primary"):
$(h).removeClass("btn-secondary").addClass("btn-primary")})},B=()=>{$(".tooltip").remove();$("#toolControls #closeBtn").click();$("#objectMenu .menu").remove();A(!1)},H=(a,f)=>{const e=()=>{$(document).off("selection:updated",l);k.destroy()},l=(n,p)=>{e();p&&"borderedimage"==p.type?H(p,f):ModalManager.closeWindow()};$(document).one("selection:updated",l);const k=new GUIelements;switch(f){case "transparency":var c=ModalManager.openWindow({title:lib.word(1112),closeFn:e,buttons:{close:!0}});c=$('<div class="row">').appendTo(c);
c=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(c);c.append("<legend>"+lib.word(1112)+"</legend>");k.getGui(c,"slider",{default:100-Math.round(100*a.opacity),range:[0,100],onslide:r=>{d.apply(a,u=>{u.set("opacity",(100-r)/100)}).requestRenderAll()}});break;case "shape&border":c=ModalManager.openWindow({title:lib.word(1107),closeFn:e,buttons:{close:!0}});let n=a.shape,p="A";/^letter\-(.{1})/.test(a.shape)&&(p=RegExp.$1,n="letter");let t=$('<div class="row">').appendTo(c);c="rectangle roundRect circle diamond heart star5 star6 star12 star24 hexagon1 hexagon2 octagon1 octagon2 triangle-lb triangle-rt triangle-lt triangle-rb triangle-t triangle-b triangle-r triangle-l letter wood1 wood2 frame-h frame-v frame-bw polaroid1 polaroid2 polaroid3 polaroid4 polaroid5 polaroid6 polaroid7 film1 airmail".split(" ");
var b=[],h=$('<select class="letter">').on("change",({currentTarget:r})=>{p=r.value});for(var g=65;90>=g;g++){var m=String.fromCharCode(g);h.append($("<option"+(m==p?" selected":"")+">").html(m))}for(g=48;57>=g;g++)m=String.fromCharCode(g),h.append($("<option"+(m==p?" selected":"")+">").html(m));h.append($("<option"+("#"==p?" selected":"")+">").html("#"));for(m=0;m<c.length;m++)g=$('<div class="slide'+(c[m]==n?" selected":"")+'">').attr("title",c[m]).css("background-image","url(/pics/shapes/"+c[m]+
".png").data("shape",c[m]),"letter"==c[m]&&g.append(h),b.push(g);const q=$('<div class="col-12 shapes">').appendTo(t);k.getGui(q,"scroller",{slides:b});"activeSelection"!=a.type&&$(".selected",q)[0].scrollIntoView();q.on("click",".slide",({currentTarget:r})=>{let u=$(r).data("shape");"letter"==u&&(u="letter-"+p);d.apply(a,y=>{y.set("shape",u)}).requestRenderAll();$("div.slide.selected",q).removeClass("selected");$(r).addClass("selected");"activeSelection"!=a.type&&a.frames[u]?$(".hideFrame",t).hide():
$(".hideFrame",t).show()});(()=>{let r=!1;const u=(E,F)=>{const J={scaleX:1,scaleY:1};if("width"===E){if(!/^\d+$/.test(F)||F>2*d.width||10>F){V.addClass("error");return}V.removeClass("error");J.width=+F;r&&(J.height=Math.round(F/(a.orgWidth/a.orgHeight)),Y.val(J.height))}if("height"===E){if(!/^\d+$/.test(F)||F>2*d.height||10>F){Y.addClass("error");return}Y.removeClass("error");J.height=+F;r&&(J.width=Math.round(a.orgWidth/a.orgHeight*F),V.val(J.width))}ia.$ipt.val(Math.min(200,Math.round(J.width/
a.orgWidth*100))).rangeslider("update",!0,!1);d.apply(a,va=>{va.set(J).setCoords().setCenter()}).requestRenderAll()};var y=$('<fieldset class="col-12">').appendTo(t).append("<legend>"+lib.word(1134)+"</legend>");y=$('<div class="row">').appendTo($('<div class="container-fluid">').appendTo(y));let K=$('<div class="col-auto">').appendTo(y);const V=$('<input type="text" class="form-control inline">').css("width","50px").val("activeSelection"==a.type?"":Math.round(a.getScaledWidth())).on("change",({currentTarget:E})=>
{u("width",E.value)}).appendTo(K);$("<span>&times;</span>").appendTo(K);const Y=$('<input type="text" class="form-control inline">').css("width","50px").val("activeSelection"==a.type?"":Math.round(a.getScaledHeight())).on("change",({currentTarget:E})=>{u("height",E.value)}).appendTo(K);K.append("&nbsp;");$('<input id="aspectCB" type="checkbox">').on("change",({currentTarget:E})=>{r=E.checked;ia.$ctr.css("display",r?"":"none");r&&u("width",V.val())}).appendTo(K);$('<label for="aspectCB">'+lib.word(1135)+
"</span>").appendTo(K);K=$('<div class="col">').appendTo(y);const ia=k.getGui(K,"slider",{default:Math.min(200,Math.round(a.width/a.orgWidth*100)),range:[1,200],onslide:E=>{const F=Math.round(a.orgWidth/100*E);E=Math.round(a.orgHeight/100*E);V.val(F);Y.val(E);a.set({width:F,height:E}).setCoords();d.requestRenderAll()}});ia.$ctr.css("display","none")})();(()=>{let r=$('<fieldset class="col-sm-6 hideFrame">').appendTo(t).append("<legend>"+lib.word(1109)+"</legend>");k.getGui(r,"colorpicker",{opacity:!0,
swatches:["#000","#fff","transparent"],color:a.ppColor,onchange:u=>{d.apply(a,y=>{y.set("ppColor",u)}).requestRenderAll()}});k.getGui(r,"slider",{"class":"slider-after-pickr",default:a.ppWidth,range:[0,30],onslide:u=>{d.apply(a,y=>{y.set("ppWidth",u)}).requestRenderAll()}});r=$('<fieldset class="col-sm-6 hideFrame">').appendTo(t).append("<legend>"+lib.word(1133)+"</legend>");k.getGui(r,"slider",{default:a.blurWidth,range:[0,50],onslide:u=>{d.apply(a,y=>{y.set("blurWidth",u)}).requestRenderAll()}});
"activeSelection"!=a.type&&a.frames[n]&&$(".hideFrame",t).hide()})();break;case "zoom&pan":c=ModalManager.openWindow({title:lib.word(1108),closeFn:e,buttons:{close:!0}});c=$('<div class="row">').appendTo(c);c=$('<fieldset class="col-12">').appendTo(c);c=$('<div class="row">').appendTo($('<div class="container-fluid">').appendTo(c));m=$('<div class="col-auto">').appendTo(c);k.getGui(m,"slider",{default:a.zoomLevel,orientation:"vertical",range:[0,100],onslide:r=>{d.apply(a,y=>{y.zoomTo(null,null,r)}).requestRenderAll();
const u=a.toCanvasElement({multiplier:w,withoutTransform:!0});$(D).replaceWith(u);D=u}});m=$('<div class="col-auto">').appendTo(c);b=a.orgWidth;h=a.orgHeight;let w=Math.min(250/b,250/h);m=$("<div>").css({height:h*w+"px",width:b*w+"px",position:"relative",backgroundSize:"cover",backgroundImage:"url("+a.getSrc()+")"}).appendTo(m);b=a.width;h=a.height;w=Math.min(250/b,250/h);k.getGui(m,"centerPoint",{ondragmove:r=>{d.apply(a,y=>{y.zoomTo(r.x,r.y,null)}).requestRenderAll();const u=a.toCanvasElement({multiplier:w,
withoutTransform:!0});$(D).replaceWith(u);D=u}});m=$('<div class="col-auto">').appendTo(c);let D=a.toCanvasElement({multiplier:w,withoutTransform:!0});m.append(D);break;case "filters":c=ModalManager.openWindow({title:lib.word(1110),closeFn:e,buttons:{close:!0}});c=$('<div class="row">').appendTo(c);b=$('<fieldset class="col-12">').appendTo(c);const v={};if(a.filters)for(h=0;h<a.filters.length;h++)v[a.filters[h].type]=a.filters[h];const M=r=>{r.filters=[];for(let u in v)r.filters.push(v[u]);r.applyFilters()};
k.getGui(b,"checkbox",{choices:{Brownie:{label:lib.word(1126),checked:v.Brownie},Sepia:{label:lib.word(1120),checked:v.Sepia},Kodachrome:{label:lib.word(1127),checked:v.Kodachrome},Technicolor:{label:lib.word(1128),checked:v.Technicolor},Polaroid:{label:lib.word(1129),checked:v.Polaroid},BlackWhite:{label:lib.word(1125),checked:v.BlackWhite},Grayscale:{label:lib.word(1121),checked:v.Grayscale},Convolute:{label:lib.word(1123),checked:v.Convolute}},onchange:(r,u)=>{d.apply(a,y=>{u?"Convolute"==r?v.Convolute=
new fabric.Image.filters.Convolute({matrix:[0,-1,0,-1,5,-1,0,-1,0]}):v[r]=new fabric.Image.filters[r]:delete v[r];M(y)})}});b=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(c);b.append("<legend>"+lib.word(1122)+"</legend>");k.getGui(b,"slider",{default:v.Blur?100*v.Blur.blur:0,range:[0,100],onslide:r=>{d.apply(a,u=>{v.Blur=new fabric.Image.filters.Blur({blur:r/100});M(u)})}});b=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(c);b.append("<legend>"+lib.word(1130)+"</legend>");k.getGui(b,"slider",
{default:v.Saturation?100*v.Saturation.saturation:0,range:[-100,100],onslide:r=>{d.apply(a,u=>{v.Saturation=0==r?!1:new fabric.Image.filters.Saturation({saturation:r/100});M(u)})}});b=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(c);b.append("<legend>"+lib.word(1131)+"</legend>");k.getGui(b,"slider",{default:v.Contrast?100*v.Contrast.contrast:0,range:[-100,100],onslide:r=>{d.apply(a,u=>{v.Contrast=0==r?!1:new fabric.Image.filters.Contrast({contrast:r/100});M(u)})}});b=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(c);
b.append("<legend>"+lib.word(1116)+"</legend>");k.getGui(b,"slider",{default:v.Brightness?100*v.Brightness.brightness:0,range:[-100,100],onslide:r=>{d.apply(a,u=>{v.Brightness=0==r?!1:new fabric.Image.filters.Brightness({brightness:r/100});M(u)})}});b=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(c);b.append("<legend>"+lib.word(1117)+"</legend>");k.getGui(b,"slider",{default:v.Noise?v.Noise.noise:0,range:[0,200],onslide:r=>{d.apply(a,u=>{v.Noise=0==r?!1:new fabric.Image.filters.Noise({noise:r});
M(u)})}});b=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(c);b.append("<legend>"+lib.word(1118)+"</legend>");k.getGui(b,"slider",{default:v.Pixelate?v.Pixelate.blocksize:0,range:[0,20],onslide:r=>{d.apply(a,u=>{v.Pixelate=0==r?!1:new fabric.Image.filters.Pixelate({blocksize:r});M(u)})}})}},Z=a=>{const f=()=>{$(document).off("selection:updated",e);l.destroy()},e=(h,g)=>{f();g&&"i-text"==g.type?Z(g):ModalManager.closeWindow()};$(document).one("selection:updated",e);const l=new GUIelements;var k=
ModalManager.openWindow({scrollable:!0,title:lib.word(1201),closeFn:f,buttons:{close:!0}});k=$('<div class="row">').appendTo(k);let c=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(k);c.append("<legend>"+lib.word(1201)+"</legend>");l.getGui(c,"textarea",{rows:2,name:"text",val:a.text,onkeyup:h=>{a.text=h.trim();d.requestRenderAll()}});c=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(k);c.append("<legend>"+lib.word(1203)+"</legend>");let b=a.fontFamily+":"+a.fontWeight;"italic"==a.fontStyle&&
(b+="i");l.getGui(c,"fontPicker",{name:"ffPicker",default:b,localFonts:{Arial:{category:"sans-serif",variants:"400,400i,600,600i"},"Helvetica Neue":{category:"sans-serif",variants:"100,100i,200,200i,400,400i,600,600i"},"Courier New":{category:"monospace",variants:"400,400i,600,600i"},"Comic Sans MS":{category:"handwriting",variants:"400,400i,600,600i"},"Times New Roman":{category:"serif",variants:"400,400i,600,600i"},Verdana:{category:"sans-serif",variants:"400,400i,600,600i"},Impact:{category:"sans-serif",
variants:"400,400i,600,600i"}},onchange:h=>{var g=h.split(":");h=g[0];var m=g[1]||"400";g=parseInt(m,10);m=/i$/.test(m);a.set({fontFamily:h,fontWeight:g,fontStyle:m?"italic":"normal"});d.requestRenderAll()}});c=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(k);c.append("<legend>"+lib.word(1204)+"</legend>");l.getGui(c,"colorpicker",{opacity:!0,swatches:["#000","#fff"],color:a.fill,onchange:h=>{a.set("fill",h);d.requestRenderAll()}});l.getGui(c,"slider",{"class":"slider-after-pickr",name:"fontSize",
default:a.fontSize,range:[8,200],onslide:h=>{a.set("fontSize",h);d.requestRenderAll()}});c=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(k);c.append("<legend>"+lib.word(1205)+"</legend>");l.getGui(c,"colorpicker",{opacity:!0,swatches:["#000","#fff"],color:a.stroke,onchange:h=>{a.set("stroke",h);d.requestRenderAll()}});l.getGui(c,"slider",{"class":"slider-after-pickr",name:"strokeWidth",default:a.strokeWidth,range:[0,100],onslide:h=>{a.strokeWidth=h;d.requestRenderAll()}});c=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(k);
c.append("<legend>"+lib.word(1206)+"</legend>");l.getGui(c,"colorpicker",{opacity:!0,swatches:["#000","#fff"],color:a.shadow?a.shadow.color:"#000",onchange:h=>{a.set("shadow",{blur:a.shadow?a.shadow.blur:0,color:h,affectStroke:!0});d.requestRenderAll()}});l.getGui(c,"slider",{"class":"slider-after-pickr",name:"strokeWidth",default:a.shadow?a.shadow.blur:0,range:[0,100],onslide:h=>{a.set("shadow",{blur:h,color:a.shadow?a.shadow.color:"#000",affectStroke:!0});d.requestRenderAll()}});c=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(k);
c.append("<legend>"+lib.word(1207)+"</legend>");l.getGui(c,"radio",{name:"textAlign",default:a.textAlign,choices:{left:lib.word(1209),center:lib.word(1210),right:lib.word(1211)},onchange:h=>{a.textAlign=h;d.requestRenderAll()}});c=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(k);c.append("<legend>"+lib.word(1208)+"</legend>");l.getGui(c,"checkbox",{choices:{bold:{label:"<b>"+lib.word(1212)+"</b>",checked:700==a.fontWeight||"bold"==a.fontWeight},italic:{label:"<i>"+lib.word(1213)+"</i>",checked:"italic"==
a.fontStyle},underline:{label:"<u>"+lib.word(1214)+"</u>",checked:a.underline}},onchange:(h,g)=>{"bold"==h&&(a.fontWeight=g?700:400);"italic"==h&&(a.fontStyle=g?"italic":"normal");"underline"==h&&(a.underline=g);d.requestRenderAll()}});c=$('<fieldset class="col-sm-6 col-xl-4">').appendTo(k);c.append("<legend>"+lib.word(1215)+"</legend>");l.getGui(c,"colorpicker",{opacity:!0,swatches:["#000","#fff"],showClear:!0,color:a.backgroundColor||"transparent",onchange:h=>{a.set("backgroundColor",h);d.requestRenderAll()}})},
x=(a,f)=>{a?ca.html(Math.round(a.left)+","+Math.round(a.top)+" | "+Math.round(a.getScaledWidth())+"\u00d7"+Math.round(a.getScaledHeight())+" | "+Math.round(a.angle)+"&deg;"):ca.html('<span id="canvasSize">'+C+"\u00d7"+G+'px</span> @ <span id="canvasZoom">'+Math.round(100*Q)+"</span>%");if(f){let e=0,l=0,k=0;d.forEachObject(c=>{"borderedimage"==c.type?k++:"i-text"==c.type?l++:c.isSticker&&e++});0==k+l+e?$(".needObject").addClass("disabled").find("a").addClass("disabled"):$(".needObject").removeClass("disabled").find("a").removeClass("disabled");
0==k?$("#nrImgBadge").hide():$("#nrImgBadge").text(k).show();0==l?$("#nrTxtBadge").hide():$("#nrTxtBadge").text(l).show();0==e?$("#nrStickerBadge").hide():$("#nrStickerBadge").text(e).show()}},pa=a=>{if(!T){var f=$('<div class="menu btn-group btn-group-sm" role="group">');$("<button>",{type:"button","class":"btn btn-dark",title:lib.word(1158)+" "+lib.word(1185)}).html('<iconify-icon  icon="mdi:rotate-left"></iconify-icon >').on("click",()=>{x(d.modifyObject("angle",-1))}).appendTo(f);$("<button>",
{type:"button","class":"btn btn-dark",title:lib.word(1158)+" "+lib.word(1184)}).html('<iconify-icon icon="mdi:rotate-right"></iconify-icon>').on("click",()=>{x(d.modifyObject("angle",1))}).appendTo(f);$("<button>",{type:"button","class":"btn btn-dark d-none d-sm-block",title:lib.word(1157)+" "+lib.word(1180)}).html('<iconify-icon icon="mdi:arrow-left-bold"></iconify-icon>').on("click",()=>{x(d.modifyObject("left",-1))}).appendTo(f);$("<button>",{type:"button","class":"btn btn-dark d-none d-sm-block",
title:lib.word(1157)+" "+lib.word(1181)}).html('<iconify-icon icon="mdi:arrow-right-bold"></iconify-icon>').on("click",()=>{x(d.modifyObject("left",1))}).appendTo(f);$("<button>",{type:"button","class":"btn btn-dark d-none d-sm-block",title:lib.word(1157)+" "+lib.word(1182)}).html('<iconify-icon icon="mdi:arrow-up-bold"></iconify-icon>').on("click",()=>{x(d.modifyObject("top",-1))}).appendTo(f);$("<button>",{type:"button","class":"btn btn-dark d-none d-sm-block",title:lib.word(1157)+" "+lib.word(1183)}).html('<iconify-icon icon="mdi:arrow-down-bold"></iconify-icon>').on("click",
()=>{x(d.modifyObject("top",1))}).appendTo(f);$("<button>",{type:"button","class":"btn btn-dark",title:lib.word(1104),"data-toggle":"tooltip"}).html('<iconify-icon icon="mdi:arrange-bring-forward"></iconify-icon>').on("click",()=>{d.bringForward(a)}).appendTo(f);$("<button>",{type:"button","class":"btn btn-dark",title:lib.word(1102),"data-toggle":"tooltip"}).html('<iconify-icon icon="mdi:arrange-send-backward"><iconify-iconi>').on("click",()=>{d.sendBackwards(a)}).appendTo(f);$("<button>",{type:"button",
"class":"btn btn-dark",title:lib.word(1101),"data-toggle":"tooltip"}).html('<iconify-icon icon="mdi:trash-can"></iconify-icon>').on("click",()=>{ma(a)}).appendTo(f);var e=!1,l=!1;if("activeSelection"==a.type){let k=a.getObjects(),c=0,b=0;for(let h=0;h<k.length;h++)"i-text"==k[h].type&&c++,"borderedimage"==k[h].type&&b++;k.length==c&&(e=!0);k.length==b&&(l=!0)}("borderedimage"==a.type||l)&&$("<button>",{type:"button","class":"btn btn-dark",title:lib.word(1107),"data-toggle":"tooltip"}).html('<iconify-icon icon="mdi:image-edit"></iconify-icon>').on("click",
()=>{H(a,"shape&border")}).appendTo(f);("i-text"==a.type||e)&&$("<button>",{type:"button","class":"btn btn-dark",title:lib.word(1219),"data-toggle":"tooltip"}).html('<iconify-icon icon="mdi:format-text-variant"></iconify-icon>').on("click",()=>{Z(a)}).appendTo(f);e=$('<div class="dropdown-menu dropdown-menu-right" style="width:240px">');$("<button>",{"class":"dropdown-item"}).html('<iconify-icon icon="mdi:format-horizontal-align-center"></iconify-icon> '+lib.word(1240)+"<kbd>h</kbd>").on("click",
()=>{d.apply(a,k=>{k.centerH().setCoords();x(k)})}).appendTo(e);$("<button>",{"class":"dropdown-item"}).html('<iconify-icon icon="mdi:format-vertical-align-center"></iconify-icon> '+lib.word(1241)+"<kbd>v</kbd>").on("click",()=>{d.apply(a,k=>{k.centerV().setCoords();x(k)})}).appendTo(e);"borderedimage"==a.type&&($("<button>",{"class":"dropdown-item"}).html('<iconify-icon icon="mdi:crop"></iconify-icon> '+lib.word(1108)+"<kbd>z</kbd>").on("click",()=>{H(a,"zoom&pan")}).appendTo(e),$("<button>",{"class":"dropdown-item"}).html('<iconify-icon icon="mdi:image-filter"></iconify-icon> '+
lib.word(1110)+"<kbd>x</kbd>").on("click",()=>{H(a,"filters")}).appendTo(e));$("<button>",{"class":"dropdown-item"}).html('<iconify-icon icon="mdi:opacity"></iconify-icon> '+lib.word(1112)+"<kbd>a</kbd>").on("click",()=>{H(a,"transparency")}).appendTo(e);$("<button>",{"class":"dropdown-item"}).html('<iconify-icon icon="mdi:arrow-left-right"></iconify-icon> '+lib.word(1113)+"<kbd>&#8679;H</kbd>").on("click",()=>{d.apply(a,k=>{k.toggle("flipX").rotate(360-k.angle).setCoords();x(k)})}).appendTo(e);$("<button>",
{"class":"dropdown-item"}).html('<iconify-icon icon="mdi:arrow-up-down"></iconify-icon> '+lib.word(1114)+"<kbd>&#8679;V</kbd>").on("click",()=>{d.apply(a,k=>{k.toggle("flipY").rotate(360-k.angle).setCoords();x(k)})}).appendTo(e);$("<button>",{"class":"dropdown-item"}).html('<iconify-icon icon="mdi:content-copy"></iconify-icon> '+lib.word(1106)+"<kbd>"+$("body").data("mod")+"c</kbd>").on("click",()=>{fa(1)&&d.cloneObject()}).appendTo(e);"borderedimage"==a.type&&($("<button>",{"class":"dropdown-item"}).html('<iconify-icon icon="mdi:rotate-right-variant"></iconify-icon> '+
lib.word(1249)+"<kbd>o</kbd>").on("click",()=>{a.changeOrientation()}).appendTo(e),$("<button>",{"class":"dropdown-item"}).html('<iconify-icon icon="mdi:window-minimize"></iconify-icon> '+lib.word(1251)+"<kbd>m</kbd>").on("click",()=>{a.deMinimize()}).appendTo(e),$("<button>",{"class":"dropdown-item"}).html('<iconify-icon icon="mdi:refresh"></iconify-icon> '+lib.word(1111)+"<kbd>r</kbd>").on("click",()=>{"activeSelection"===a.type&&d.discardActiveObject();d.apply(a,k=>{k.reset()})}).appendTo(e));
$("<button>",{"class":"dropdown-item"}).html('<iconify-icon icon="mdi:content-save"></iconify-icon> '+lib.word(1136)+"<kbd>s</kbd>").on("click",()=>{const k=d.getActiveObject();k&&k.exportPNG()}).appendTo(e);$('<div class="btn-group btn-group-sm" role="group">').append($('<button type="button" class="btn btn-dark dropdown-toggle" data-toggle="dropdown">'+lib.word(1115)+"</button>")).append(e).appendTo(f);S.empty().append(f);aa||$('[data-toggle="tooltip"]',S).tooltip()}},wa=()=>{bootbox.confirm({message:lib.word(1155),
buttons:{cancel:{label:lib.word(1030)},confirm:{label:lib.word(1031)}},callback:a=>{a&&(d.setBackgroundImage(0).setBackgroundColor("transparent",()=>{d.requestRenderAll()}).clear().fire("selection:cleared"),$("#topNav .badge").hide(),N=!1)}})},qa=()=>{P(!1);const a=d.toCanvasElement();P(!1);const f=a.width>a.height,e=document.createElement("canvas"),l=e.getContext("2d");e.width=f?a.height:a.width;e.height=f?a.width:a.height;f?(l.translate(e.width/2,e.height/2),l.rotate(90*Math.PI/180),l.drawImage(a,
-a.width/2,-a.height/2)):l.drawImage(a,0,0);$("#printFrame").remove();$('<iframe id="printFrame">').css({border:0,width:0,height:0}).on("load",({currentTarget:k})=>{const c=["<title>"+ka+"</title>","<style>","body { margin:0; display:flex; position:fixed; left:0; top:0; width:100vw; height:100vh; justify-content:center; align-items:center; }","canvas { object-fit:contain; width:100%; height:auto; max-width:100%; max-height:100%; }","</style>"];$(k).contents().find("head").html(c.join("")).end().find("body").append(e);
k.contentWindow.print()}).appendTo("body")},xa=()=>{ModalManager.openWindow({title:lib.word(1231),backdrop:!0,closeFn:B,buttons:{close:!0,apply:{label:lib.word(1231),callback:()=>{const a=window.open("about:blank");A(!0,lib.word(1069));$.ajax({type:"POST",url:"/ajax/",data:{task:"editImage",uid:ZMprops.uid,img:X("jpg")},dataType:"json",success:f=>{A(!1);f.success?a.location=f.data.url:bootbox.alert(f.response)}})}}}}).append(lib.word(1232))},ya=()=>{const a=ModalManager.openWindow({title:lib.word(1188)+
' <iconify-icon icon="fa6-brands:facebook"></iconify-icon> <iconify-icon icon="fa6-brands:x-twitter"></iconify-icon>',backdrop:!0,closeFn:()=>{l.destroy();B()},buttons:{close:!0}}),f=X("jpg");let e=localStorage.getItem("cloudImages");e=e?JSON.parse(e):[];const l=new GUIelements,k=()=>{A(!0,lib.word(1069));localStorage.removeItem("bytescale");lib.cookie("imgur",null);$.ajax({type:"POST",url:"/ajax/",data:{task:"saveCloudImage",uid:ZMprops.uid,img:f},success:m=>{A(!1);if(m.success){e.push(m.data);e=
e.slice(Math.max(e.length-10,0));localStorage.setItem("cloudImages",JSON.stringify(e));$("#noHistory").remove();var n=$('<div class="slide">').css("background-image","url("+m.data.thumbUrl+")").data("imginfo",m.data).append('<button type="button" class="delBtn btn btn-sm btn-danger"><iconify-icon icon="mdi:trash-can"></iconify-icon></button>');$("#history .slides").prepend(n);$(".currentTab a",a).tab("dispose").remove();c(m.data,!0)}else bootbox.alert(m.response)}})},c=(m,n)=>{const p=$("#embed"),
t=lib.word(1072,ZMprops.siteName);n?p.prepend('<div class="alert alert-dismissible alert-success">'+lib.word(1070)+"</div>"):$(".alert",p).remove();$(".embedTab a",a).removeClass("disabled");$(".link",p).val(m.imageUrl);$(".html",p).val('<a href="'+m.localUrl+'" target="_blank"><img src="'+m.imageUrl+'" border="0" alt="'+t+'"></a>');$(".bbcode",p).val("[URL="+m.localUrl+"][IMG]"+m.imageUrl+"[/IMG][/URL]");$(".extLink",p).prop("href",m.imageUrl);$(".shareIcons",p).jsSocials({url:m.localUrl,text:t,
showCount:!1,showLabel:!1,shareIn:"popup",shares:["facebook","twitter","pinterest"]});$(".embedTab a",a).tab("show")},b=(m,n)=>{A(!0);$.ajax({type:"POST",url:"/ajax/",data:{task:"deleteCloudImage",imageID:n},success:p=>{A(!1);if(p.success){for(p=0;p<e.length&&e[p].imageID!=n;p++);e.splice(p,1);localStorage.setItem("cloudImages",JSON.stringify(e));m.remove()}else bootbox.alert(p.response)}})},h=[];for(var g of e)h.push($('<div class="slide">').css("background-image","url("+g.thumbUrl+")").data("imginfo",
g).append('<button type="button" class="delBtn btn btn-sm btn-danger"><iconify-icon icon="mdi:trash-can"></iconify-icon></button>'));g=['<ul class="nav nav-tabs">','<li class="nav-item currentTab">','<a class="nav-link active" data-toggle="tab" href="#current">'+lib.word(1189)+"</a>","</li>",'<li class="nav-item historyTab">','<a class="nav-link disabled" data-toggle="tab" href="#history">'+lib.word(1190)+"</a>","</li>",'<li class="nav-item embedTab">','<a class="nav-link disabled" data-toggle="tab" href="#embed">'+
lib.word(1191)+"</a>","</li>","</ul>",'<div class="tab-content tab-content-border" style="padding:1rem">','<div class="tab-pane show active" id="current">','<img src="'+f+'" height="120">',' <button type="button" class="saveBtn btn btn-primary">'+lib.word(1068)+"</button>","</div>",'<div class="tab-pane" id="history">'+(0==h.length?'<p id="noHistory">'+lib.word(1192)+"</p>":"")+"</div>",'<div class="tab-pane" id="embed">','<div class="form-group">',"<label>"+lib.word(1071)+"</label>",'<div class="input-group">',
'<input type="text" spellcheck="false" class="link form-control">','<div class="input-group-append">','<span class="input-group-text"><a href="#" target="_blank" class="extLink"><i class="fa fa-external-link-alt"></i></a></span>',"</div>","</div>","</div>",'<div class="form-group">',"<label>"+lib.word(1075)+"</label>",'<div class="shareIcons"></div>',"</div>",'<div class="form-group">',"<label>"+lib.word(1073)+"</label>",'<input type="text" spellcheck="false" class="html form-control">',"</div>",
'<div class="form-group">',"<label>"+lib.word(1074)+"</label>",'<input type="text" spellcheck="false" class="bbcode form-control">',"</div>","</div>","</div>"];a.append(g.join(""));$(".historyTab a",a).removeClass("disabled");l.getGui($("#history"),"scroller",{slides:h});$("#history").on("click",".slide",({currentTarget:m})=>{c($(m).data("imginfo"))}).on("click",".delBtn",m=>{m.stopPropagation();const n=$(m.currentTarget).closest(".slide"),p=n.data("imginfo").imageID;bootbox.confirm(lib.word(1081),
t=>{t&&b(n,p)})});$("#current .saveBtn").on("click",()=>{k()})};let ja=!0;const za=()=>{const a={A3:"29.7x42",A4:"21x29.7",A5:"14.8x21",Letter:"21.6x27.9",Legal:"21.6x35.6"};var f="20x20 20x30 30x30 30x40 40x40 40x60 50x50 50x70 60x90 80x120".split(" "),e="8x10 8x11 9x12 10x13 11x15 11x17 12x16 13x17 13x18 14x18 14x19 15x20 16x21 16x22 17x22 17x23 18x24 18x25 19x25 19x26 20x26 20x27 21x27 21x28 21x29 22x29 22x30 23x30 23x31 24x31 24x32 24x33 24x36 25x32 25x33 25x34 26x34 26x35 26x36 27x35 27x36 27x37 28x36 28x37 28x38 29x38 29x39 29x40 30x39 30x40 30x41 31x40 31x41".split(" ");
const l={cm:{},inch:{}};var k={cm:{},inch:{}};const c=n=>{if(/([0-9\.]+)x([0-9\.]+)(cm|inch)/.test(n)){var p=+RegExp.$1,t=+RegExp.$2;"inch"==RegExp.$3?(p*=25.4,t*=25.4):(p*=10,t*=10);let w=300<=p||300<=t?2E3:1E3;if(p>=t){n=w;var q=Math.round(w/(p/t))}else q=w,n=Math.round(w/(t/p))}else q=n.split(/[x|\*]/),n=+q[0],q=+q[1];p=d.width;t=d.height;if(p!=n||t!=q){L({width:n,height:q,zoom:Math.min(1,$("#canvases").width()/n)});if(ja){const w=n/p,D=q/t;d.discardActiveObject().forEachObject(v=>{v.set({left:v.left*
w,top:v.top*D,scaleX:v.scaleX*w,scaleY:v.scaleY*D}).setCoords().setCenter()})}la(n,q)}B()};for(var b=0;b<f.length;b++){var h=f[b].split("x");k.cm[h[0]+"x"+h[1]+"cm"]=h[0]+"x"+h[1]+"cm";l.cm[h[1]+"x"+h[0]+"cm"]=h[1]+"x"+h[0]+"cm"}for(f=0;f<e.length;f++)b=e[f].split("x"),k.inch[b[0]+"x"+b[1]+"inch"]=b[0]+"x"+b[1]+"inch",l.inch[b[1]+"x"+b[0]+"inch"]=b[1]+"x"+b[0]+"inch";const g=ModalManager.openWindow({title:lib.word(1153),closeFn:()=>{m.destroy();B()},buttons:{close:!0}}),m=new GUIelements;b=$('<div class="row">').appendTo(g);
0<d.discardActiveObject().getObjects().length&&(e=$('<div class="col-12" style="border-bottom:1px solid #dee2e6;margin-bottom:5px">').appendTo(b),e.append($('<div class="custom-control custom-switch large">').append($('<input type="checkbox" class="custom-control-input" id="scaleSwitch">').attr("checked",ja).on("change",({currentTarget:n})=>{ja=n.checked}),$('<label class="custom-control-label" for="scaleSwitch">').html(lib.word(1248)))));e=$('<fieldset class="col-sm-6">').appendTo(b);e.append("<legend>"+
lib.word(1178)+" ("+lib.word(1252)+")</legend>");m.getGui(e,"select",{choices:{"":lib.word(1173),"1200x900":"1200x900 [4:3]","1024x768":"1024x768 [4:3]","900x1200":"900x1200 [3:4]","768x1024":"768x1024 [3:4]","1200x1200":"1200x1200 [1:1]","820x312":"820x312 (Facebook)","1500x500":"1500x500 (Twitter)","1280x720":"1280x720 (YouTube)"},default:d.width+"x"+d.height,onchange:n=>{""!=n&&c(n)}});e=$('<fieldset class="col-sm-6">').appendTo(b);e.append("<legend>"+lib.word(1179)+" ("+lib.word(1252)+")</legend>");
m.getGui(e,"text",{id:"customSizeIpt",placeholder:C+"x"+G,onchange:n=>{const p=[];if(/^(\d+)[x|\*](\d+)$/.test(n)){const t=+RegExp.$2;2E3<+RegExp.$1&&p.push(lib.word(1176,2E3));2E3<t&&p.push(lib.word(1177,2E3))}else p.push(lib.word(1175));0==p.length?c(n):($(".invalid-feedback",g).remove(),$("#customSizeIpt").after('<div class="invalid-feedback" style="display:block">'+p.join(" ")+"</div>"))}});e=$('<fieldset class="col-sm-6">').appendTo(b);e.append("<legend>"+lib.word(1172)+"</legend>");f={"":lib.word(1173)};
for(let n in a)h=a[n].split("x"),f[h[0]+"x"+h[1]+"cm"]=n;$.extend(f,k.cm,k.inch);m.getGui(e,"select",{choices:f,onchange:n=>{""!=n&&c(n)}});e=$('<fieldset class="col-sm-6">').appendTo(b);e.append("<legend>"+lib.word(1171)+"</legend>");f={"":lib.word(1173)};for(let n in a)k=a[n].split("x"),f[k[1]+"x"+k[0]+"cm"]=n;$.extend(f,l.cm,l.inch);m.getGui(e,"select",{choices:f,onchange:n=>{""!=n&&c(n)}})},Aa=a=>{let f="stickers",e="love";const l={};for(let h in ZMprops.stickers)l[h]=lib.word("stickerCats")[h];
const k=h=>{if(/\.svg$/.test(h)||/^data:image\/svg/.test(h.substr(0,20)))fabric.loadSVGFromURL(h,(g,m)=>{g=fabric.util.groupSVGElements(g,m);m=Math.min(512/g.width,512/g.height);g.left=10;g.top=10;g.scaleX=m;g.scaleY=m;g.isSticker=!0;d.add(g)});else{const g=new Image;g.onload=()=>{const m=Math.min(512/g.naturalWidth,512/g.naturalHeight);d.add(new fabric.Image(g,{width:g.width,height:g.height,left:10,top:10,scaleX:m,scaleY:m,isSticker:!0}))};g.src=h}},c=(h,g)=>{g.empty().append($('<div class="image">').css("background-image",
"url(/pics/upload.png)").attr("title",lib.word(1239)).on("click",n=>{n.stopPropagation();$("<input>",{type:"file",accept:".png,.gif,.svg"}).on("change",p=>{const t=new FileReader;t.onload=()=>{k(t.result);B()};t.readAsDataURL(p.target.files[0])}).trigger("click")}));const m=ZMprops.stickers[h];for(let n=0;n<m.length;n++)g.append($('<div class="image">').attr("title",m[n]).data("filename",h+"/"+m[n]).append($('<img loading="lazy">').attr("src","/pics/stickers/"+h+"/thumb."+m[n])))},b=()=>{var h=ModalManager.openWindow({title:lib.word(1238),
scrollable:!0,closeFn:B,buttons:{close:!0}}),g=new GUIelements;const m=$('<div class="tab-pane'+("stickers"==f?" active":"")+'" id="stickerTab">'),n=$('<div class="tab-pane'+("emojis"==f?" active":"")+'" id="emojiTab">');h.append('<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link'+("stickers"==f?" active":"")+'" id="stickers" href="#stickerTab" data-toggle="tab">'+lib.word(1238)+'</a></li><li class="nav-item"><a class="nav-link'+("emojis"==f?" active":"")+'" id="emojis" href="#emojiTab" data-toggle="tab">'+
lib.word(1246)+"</a></li></ul>",$('<div class="tab-content">').append(m,n));$('a[data-toggle="tab"]',h).on("shown.bs.tab",q=>{f=q.target.id});h=$("<div>").appendTo(m);g.getGui(h,"select",{default:e,choices:l,onchange:q=>{e=q;c(e,p)}});const p=$('<div class="stickers">').on("click",".image",({currentTarget:q})=>{q=$(q).data("filename");k("/pics/stickers/"+q);ModalManager.closeWindow()}).appendTo(m);c(e,p);h=$("<div>").appendTo(n);g.getGui(h,"text",{placeholder:lib.word(1247)+"...",onkeyup:q=>{q=q.toLowerCase();
$(".image",t).each((w,D)=>{w=$(D);w.toggle(-1!=w.attr("title").toLowerCase().indexOf(q))})}});const t=$('<div class="stickers">').on("click",".image",({currentTarget:q})=>{q=$(q).data("filename");k("/pics/stickers/"+q);ModalManager.closeWindow()}).appendTo(n);for(g=0;g<emojis.length;g++)t.append($('<div class="image">').attr("title",emojis[g].name+" ["+emojis[g].code+"]").data("filename","emojis/"+emojis[g].filename).append($('<img loading="lazy">').attr("src","/pics/stickers/emojis/"+emojis[g].filename)))};
$(a).on("click",()=>{"undefined"===typeof emojis?$.getScript("/js/emojis"+(ZMprops.debug?"":".min")+".js",(h,g,m)=>{b()}):b()})},Ba=()=>{const a=()=>{const k=$("#fileNameIpt").val().replace(/\.clg$/,"");L({baseName:k});const c=d.toJSON(["isSticker"]);c.canvasSize=d.getWidth()+"x"+d.getHeight();$("<a>",{href:URL.createObjectURL(new Blob([JSON.stringify(c)])),download:`${k}.clg`})[0].click();B()},f=ModalManager.openWindow({title:lib.word(1137),backdrop:!0,closeFn:B,buttons:{close:!0,apply:{label:lib.word(1136),
callback:()=>{$("#applyBtn").attr("disabled",!0);setTimeout(a,99)}}}});var e=$('<div class="row">').appendTo(f);e=$('<fieldset class="col-12">').appendTo(e);const l=["<legend>"+lib.word(1066)+"</legend>","<form onsubmit=\"$('#applyBtn').click();return false\">",'<div class="input-group">','<input type="text" class="form-control" id="fileNameIpt" placeholder="'+lib.word(1066)+'">','<div class="input-group-append">','<span class="input-group-text" id="extension">.clg</span>',"</div>","</div>","</form>"];
e.append(l.join(""));requestAnimationFrame(()=>{$("#fileNameIpt",f).val(R).select().focus()})},Ca=(a,f,e)=>{f=f||400;e=e||"normal";let l=encodeURIComponent(a)+":";l+="number"==typeof f?f:{normal:400,bold:700}[f];"italic"==e&&(l+="i");/Arial|Comic Sans MS|Courier New|Helvetica|Impact|Times New Roman|Trebuchet MS|Verdana/.test(a)||$("link:last").after('<link href="https://fonts.googleapis.com/css?family='+l+'&display=swap" rel="stylesheet" type="text/css">')},na=a=>{const f=new FileReader;f.onloadend=
()=>{const e=JSON.parse(f.result);if(e.objects){if(e.canvasSize){var l=e.canvasSize.split("x");L({width:+l[0],height:+l[1],zoom:Math.min(1,$("#canvases").width()/l[0])})}document.fonts?document.fonts.ready.then(()=>{setTimeout(()=>{d.loadFromJSON(e,()=>{A(!1)})},100)}):d.loadFromJSON(e,()=>{A(!1)});for(let k=0;k<e.objects.length;k++)l=e.objects[k],l.fontFamily&&Ca(l.fontFamily,l.fontWeight,l.fontStyle)}else A(!1),bootbox.alert(lib.word(1142))};/\.clg$/.test(a.name)?(A(!0,lib.word(1141)),f.readAsText(a)):
bootbox.alert(lib.word(1142))},Da=a=>{const f=$(a);let e=null,l=0;const k=()=>{var b=Math.min(C,$("#fabricCanvas")[0].clientWidth);b=b/C*l;e.css({backgroundSize:b+"px "+b+"px",backgroundImage:"repeating-linear-gradient(0deg, #aaa, #aaa 1px, transparent 1px, transparent "+b+"px), repeating-linear-gradient(-90deg, #aaa, #aaa 1px, transparent 1px, transparent "+b+"px)"})},c=(b,h)=>{l=b;e&&(e.remove(),e=null,$(window).off("resize",k));$("iconify-icon[data-size]",f).remove();$(h).append('<iconify-icon data-size="'+
l+'" icon="mdi:check-bold"></iconify-icon>');0<l&&(e||(e=$("<div>").css({position:"absolute",width:"100%",height:"100%"}).insertAfter("canvas.lower-canvas")),k(),$(window).on("resize",k))};$("<div>",{"class":"dropdown-item"}).html(lib.word(1186)).on("click",({currentTarget:b})=>{null===O&&(AlignGuideLines.init(d),O=!1);(O=!O)?($(b).append('<iconify-icon id="alignGuidesCheckmark" icon="mdi:check-bold"></iconify-icon>'),AlignGuideLines.enable()):($("iconify-icon",b).remove(),AlignGuideLines.disable())}).appendTo(f);
$("<div>",{"class":"dropdown-divider"}).appendTo(f);$("<div>",{"class":"dropdown-item"}).html(lib.word(1187)+'<iconify-icon data-size="0" icon="mdi:check-bold"></iconify-icon>').on("click",({currentTarget:b})=>{c(0,b)}).appendTo(f);$("<div>",{"class":"dropdown-item"}).html("25x25").on("click",({currentTarget:b})=>{c(25,b)}).appendTo(f);$("<div>",{"class":"dropdown-item"}).html("50x50").on("click",({currentTarget:b})=>{c(50,b)}).appendTo(f);$("<div>",{"class":"dropdown-item"}).html("75x75").on("click",
({currentTarget:b})=>{c(75,b)}).appendTo(f);$("<div>",{"class":"dropdown-item"}).html("100x100").on("click",({currentTarget:b})=>{c(100,b)}).appendTo(f)},Ea=a=>{var f=null,e=0;const l={1:[["0,0 100x100"]],2:[["0,0 50x100","50,0 50x100"]],3:[["0,0 50x100","50,0 50x50","50,50 50x50"],["0,0 100x60","0,60 50x40","50,60 50x40"]],4:[["0,0 50x50","50,0 50x50","0,50 50x50","50,50 50x50"],["0,0 50x60","50,0 50x40","0,60 50x40","50,40 50x60"]],5:[["0,0 44x100","44,0 28x50","72,0 28x50","44,50 28x50","72,50 28x50"],
["0,0 30x50","30,0 40x100","70,0 30x50","0,50 30x50","70,50 30x50"]],6:["0,0 33x50;33,0 34x50;67,0 33x50;0,50 33x50;33,50 34x50;67,50 33x50".split(";"),"0,0 50x60;50,0 25x40;75,0 25x40;0,60 25x40;25,60 25x40;50,40 50x60".split(";")],7:["0,0 25x50;25,0 50x50;75,0 25x50;0,50 25x50;25,50 25x50;50,50 25x50;75,50 25x50".split(";"),"0,0 25x50;25,0 25x50;50,0 25x50;75,0 25x50;0,50 25x50;25,50 50x50;75,50 25x50".split(";")],8:["0,0 25x50;25,0 25x50;50,0 25x50;75,0 25x50;0,50 25x50;25,50 25x50;50,50 25x50;75,50 25x50".split(";"),
"0,0 25x60;25,0 25x60;50,0 25x40;75,0 25x40;0,60 25x40;25,60 25x40;50,40 25x60;75,40 25x60".split(";")],9:["0,0 33x33;33,0 34x33;67,0 33x33;0,33 33x34;33,33 34x34;67,33 33x34;0,67 33x33;33,67 34x33;67,67 33x33".split(";"),"0,0 33x30;33,0 34x30;67,0 33x30;0,30 25x40;25,30 50x40;75,30 25x40;0,70 33x30;33,70 34x30;67,70 33x30".split(";")],10:["0,0 33x33;33,0 34x33;67,0 33x33;0,33 25x34;25,33 25x34;50,33 25x34;75,33 25x34;0,67 33x33;33,67 34x33;67,67 33x33".split(";"),"0,0 25x22;25,0 50x50;75,0 25x22;0,22 25x28;75,22 25x28;0,50 25x28;25,50 50x50;75,50 25x28;0,78 25x22;75,78 25x22".split(";"),
"0,0 25x28;25,0 25x28;50,0 50x50;0,28 25x22;25,28 25x22;0,50 50x50;50,50 25x22;75,50 25x22;50,72 25x28;75,72 25x28".split(";")],11:["0,0 25x33;25,0 25x33;50,0 25x33;75,0 25x33;0,33 33x34;33,33 34x34;67,33 33x34;0,67 25x33;25,67 25x33;50,67 25x33;75,67 25x33".split(";"),"0,0 25x25;25,0 25x25;50,0 25x50;75,0 25x50;0,25 25x25;25,25 25x25;0,50 50x50;50,50 25x25;75,50 25x25;50,75 25x25;75,75 25x25".split(";")],12:["0,0 25x33;25,0 25x33;50,0 25x33;75,0 25x33;0,33 25x34;25,33 25x34;50,33 25x34;75,33 25x34;0,67 25x33;25,67 25x33;50,67 25x33;75,67 25x33".split(";"),
"0,0 25x25;25,0 25x25;50,0 25x50;75,0 25x50;0,25 25x25;25,25 25x25;0,50 25x50;25,50 25x50;50,50 25x25;75,50 25x25;50,75 25x25;75,75 25x25".split(";")],13:["0,0 25x33;25,0 25x33;50,0 25x33;75,0 25x33;0,33 20x34;20,33 20x34;40,33 20x34;60,33 20x34;80,33 20x34;0,67 25x33;25,67 25x33;50,67 25x33;75,67 25x33".split(";"),"0,0 25x22;25,0 25x22;50,0 25x22;75,0 25x22;0,22 25x28;25,22 50x56;75,22 25x28;0,50 25x28;75,50 25x28;0,78 25x22;25,78 25x22;50,78 25x22;75,78 25x22".split(";")],14:["0,0 20x33;20,0 20x33;40,0 20x33;60,0 20x33;80,0 20x33;0,33 25x34;25,33 25x34;50,33 25x34;75,33 25x34;0,67 20x33;20,67 20x33;40,67 20x33;60,67 20x33;80,67 20x33".split(";"),
"0,0 25x22;25,0 25x22;50,0 25x22;75,0 25x22;0,22 25x28;25,22 25x56;50,22 25x56;75,22 25x28;0,50 25x28;75,50 25x28;0,78 25x22;25,78 25x22;50,78 25x22;75,78 25x22".split(";"),"0,0 17x22;17,0 16x22;33,0 17x22;50,0 17x22;67,0 16x22;83,0 17x22;0,22 50x56;50,22 50x56;0,78 17x22;17,78 16x22;33,78 17x22;50,78 17x22;67,78 16x22;83,78 17x22".split(";")],15:["0,0 20x33;20,0 20x33;40,0 20x33;60,0 20x33;80,0 20x33;0,33 20x34;20,33 20x34;40,33 20x34;60,33 20x34;80,33 20x34;0,67 20x33;20,67 20x33;40,67 20x33;60,67 20x33;80,67 20x33".split(";"),
"0,0 17x22;17,0 17x22;34,0 16x22;50,0 16x22;66,0 17x22;83,0 17x22;0,22 30x56;30,22 40x56;70,22 30x56;0,78 17x22;17,78 17x22;34,78 16x22;50,78 16x22;66,78 17x22;83,78 17x22".split(";")],16:["0,0 25x25;25,0 25x25;50,0 25x25;75,0 25x25;0,25 25x25;25,25 25x25;50,25 25x25;75,25 25x25;0,50 25x25;25,50 25x25;50,50 25x25;75,50 25x25;0,75 25x25;25,75 25x25;50,75 25x25;75,75 25x25".split(";"),"0,0 17x22;17,0 17x22;34,0 16x22;50,0 16x22;66,0 17x22;83,0 17x22;0,22 25x56;25,22 25x56;50,22 25x56;75,22 25x56;0,78 17x22;17,78 17x22;34,78 16x22;50,78 16x22;66,78 17x22;83,78 17x22".split(";"),
"0,0 25x25;25,0 13x25;38,0 12x25;50,0 50x50;0,25 13x25;13,25 12x25;25,25 12x25;37,25 13x25;0,50 50x50;50,50 13x25;63,50 12x25;75,50 12x25;87,50 13x25;50,75 12x25;62,75 13x25;75,75 25x25".split(";")],17:["0,0 20x25;20,0 20x25;40,0 20x25;60,0 20x25;80,0 20x25;0,25 25x25;25,25 25x25;50,25 25x25;75,25 25x25;0,50 33x25;33,50 34x25;67,50 33x25;0,75 20x25;20,75 20x25;40,75 20x25;60,75 20x25;80,75 20x25".split(";"),"0,0 14x22;14,0 18x22;32,0 18x22;50,0 18x22;68,0 18x22;86,0 14x22;0,22 25x28;25,22 50x56;75,22 25x28;0,50 25x28;75,50 25x28;0,78 14x22;14,78 18x22;32,78 18x22;50,78 18x22;68,78 18x22;86,78 14x22".split(";"),
"0,0 15x22;15,0 14x22;29,0 14x22;43,0 14x22;57,0 14x22;71,0 14x22;85,0 15x22;0,22 29x56;29,22 42x56;71,22 29x56;0,78 15x22;15,78 14x22;29,78 14x22;43,78 14x22;57,78 14x22;71,78 14x22;85,78 15x22".split(";")],18:["0,0 20x25;20,0 20x25;40,0 20x25;60,0 20x25;80,0 20x25;0,25 25x25;25,25 25x25;50,25 25x25;75,25 25x25;0,50 25x25;25,50 25x25;50,50 25x25;75,50 25x25;0,75 20x25;20,75 20x25;40,75 20x25;60,75 20x25;80,75 20x25".split(";"),"0,0 17x22;17,0 17x22;34,0 16x22;50,0 16x22;66,0 17x22;83,0 17x22;0,22 25x28;25,22 25x56;50,22 25x56;75,22 25x28;0,50 25x28;75,50 25x28;0,78 17x22;17,78 17x22;34,78 16x22;50,78 16x22;66,78 17x22;83,78 17x22".split(";"),
"0,0 17x22;17,0 17x22;34,0 16x22;50,0 16x22;66,0 17x22;83,0 17x22;0,22 25x56;25,22 25x28;50,22 25x28;75,22 25x56;25,50 25x28;50,50 25x28;0,78 17x22;17,78 17x22;34,78 16x22;50,78 16x22;66,78 17x22;83,78 17x22".split(";")],19:["0,0 20x25;20,0 20x25;40,0 20x25;60,0 20x25;80,0 20x25;0,25 25x25;25,25 25x25;50,25 25x25;75,25 25x25;0,50 20x25;20,50 20x25;40,50 20x25;60,50 20x25;80,50 20x25;0,75 20x25;20,75 20x25;40,75 20x25;60,75 20x25;80,75 20x25".split(";"),"0,0 15x22;15,0 14x22;29,0 14x22;43,0 14x22;57,0 14x22;71,0 14x22;85,0 15x22;0,22 29x28;29,22 42x56;71,22 29x28;0,50 29x28;71,50 29x28;0,78 15x22;15,78 14x22;29,78 14x22;43,78 14x22;57,78 14x22;71,78 14x22;85,78 15x22".split(";")],
20:["0,0 20x25;20,0 20x25;40,0 20x25;60,0 20x25;80,0 20x25;0,25 20x25;20,25 20x25;40,25 20x25;60,25 20x25;80,25 20x25;0,50 20x25;20,50 20x25;40,50 20x25;60,50 20x25;80,50 20x25;0,75 20x25;20,75 20x25;40,75 20x25;60,75 20x25;80,75 20x25".split(";"),"0,0 17x22;17,0 17x22;34,0 16x22;50,0 16x22;66,0 17x22;83,0 17x22;0,22 25x28;25,22 25x28;50,22 25x28;75,22 25x28;0,50 25x28;25,50 25x28;50,50 25x28;75,50 25x28;0,78 17x22;17,78 17x22;34,78 16x22;50,78 16x22;66,78 17x22;83,78 17x22".split(";"),"0,0 15x22;15,0 14x22;29,0 14x22;43,0 14x22;57,0 14x22;71,0 14x22;85,0 15x22;0,22 29x28;29,22 21x56;50,22 21x56;71,22 29x28;0,50 29x28;71,50 29x28;0,78 15x22;15,78 14x22;29,78 14x22;43,78 14x22;57,78 14x22;71,78 14x22;85,78 15x22".split(";")],
21:["0,0 25x20;25,0 25x20;50,0 25x20;75,0 25x20;0,20 25x20;25,20 25x20;50,20 25x20;75,20 25x20;0,40 20x20;20,40 20x20;40,40 20x20;60,40 20x20;80,40 20x20;0,60 25x20;25,60 25x20;50,60 25x20;75,60 25x20;0,80 25x20;25,80 25x20;50,80 25x20;75,80 25x20".split(";"),"0,0 14x22;14,0 14x22;28,0 22x22;50,0 22x22;72,0 14x22;86,0 14x22;0,22 14x28;14,22 14x28;28,22 44x56;72,22 14x28;86,22 14x28;0,50 14x28;14,50 14x28;72,50 14x28;86,50 14x28;0,78 14x22;14,78 14x22;28,78 22x22;50,78 22x22;72,78 14x22;86,78 14x22".split(";")],
22:["0,0 25x20;25,0 25x20;50,0 25x20;75,0 25x20;0,20 20x20;20,20 20x20;40,20 20x20;60,20 20x20;80,20 20x20;0,40 25x20;25,40 25x20;50,40 25x20;75,40 25x20;0,60 20x20;20,60 20x20;40,60 20x20;60,60 20x20;80,60 20x20;0,80 25x20;25,80 25x20;50,80 25x20;75,80 25x20".split(";"),"0,0 18x22;18,0 14x22;32,0 18x22;50,0 18x22;68,0 14x22;82,0 18x22;0,22 11x28;11,22 14x28;25,22 25x56;50,22 25x56;75,22 14x28;89,22 11x28;0,50 11x28;11,50 14x28;75,50 14x28;89,50 11x28;0,78 18x22;18,78 14x22;32,78 18x22;50,78 18x22;68,78 14x22;82,78 18x22".split(";"),
"0,0 25x28;25,0 12x28;37,0 13x28;50,0 25x28;75,0 25x28;0,28 13x22;13,28 12x22;25,28 13x22;38,28 12x22;50,28 25x22;75,28 25x22;0,50 25x22;25,50 25x22;50,50 12x22;62,50 13x22;75,50 12x22;87,50 13x22;0,72 25x28;25,72 25x28;50,72 12x28;62,72 13x28;75,72 25x28".split(";")],23:["0,0 20x20;20,0 20x20;40,0 20x20;60,0 20x20;80,0 20x20;0,20 25x20;25,20 25x20;50,20 25x20;75,20 25x20;0,40 20x20;20,40 20x20;40,40 20x20;60,40 20x20;80,40 20x20;0,60 25x20;25,60 25x20;50,60 25x20;75,60 25x20;0,80 20x20;20,80 20x20;40,80 20x20;60,80 20x20;80,80 20x20".split(";"),
"0,0 15x22;15,0 14x22;29,0 14x22;43,0 14x22;57,0 14x22;71,0 14x22;85,0 15x22;0,22 15x28;15,22 14x28;29,22 42x56;71,22 14x28;85,22 15x28;0,50 15x28;15,50 14x28;71,50 14x28;85,50 15x28;0,78 15x22;15,78 14x22;29,78 14x22;43,78 14x22;57,78 14x22;71,78 14x22;85,78 15x22".split(";")],24:["0,0 20x20;20,0 20x20;40,0 20x20;60,0 20x20;80,0 20x20;0,20 20x20;20,20 20x20;40,20 20x20;60,20 20x20;80,20 20x20;0,40 25x20;25,40 25x20;50,40 25x20;75,40 25x20;0,60 20x20;20,60 20x20;40,60 20x20;60,60 20x20;80,60 20x20;0,80 20x20;20,80 20x20;40,80 20x20;60,80 20x20;80,80 20x20".split(";"),
"0,0 15x22;15,0 14x22;29,0 14x22;43,0 14x22;57,0 14x22;71,0 14x22;85,0 15x22;0,22 15x28;15,22 14x28;29,22 21x56;50,22 21x56;71,22 14x28;85,22 15x28;0,50 15x28;15,50 14x28;71,50 14x28;85,50 15x28;0,78 15x22;15,78 14x22;29,78 14x22;43,78 14x22;57,78 14x22;71,78 14x22;85,78 15x22".split(";")],25:["0,0 20x20;20,0 20x20;40,0 20x20;60,0 20x20;80,0 20x20;0,20 20x20;20,20 20x20;40,20 20x20;60,20 20x20;80,20 20x20;0,40 20x20;20,40 20x20;40,40 20x20;60,40 20x20;80,40 20x20;0,60 20x20;20,60 20x20;40,60 20x20;60,60 20x20;80,60 20x20;0,80 20x20;20,80 20x20;40,80 20x20;60,80 20x20;80,80 20x20".split(";"),
"0,0 21x20;21,0 19x20;40,0 20x20;60,0 19x20;79,0 21x20;0,20 18x20;18,20 18x20;36,20 28x20;64,20 18x20;82,20 18x20;0,40 18x20;18,40 18x20;36,40 28x20;64,40 18x20;82,40 18x20;0,60 18x20;18,60 18x20;36,60 28x20;64,60 18x20;82,60 18x20;0,80 21x20;21,80 19x20;40,80 20x20;60,80 19x20;79,80 21x20".split(";")]};$("input[type='range']",a).on("change",k=>{U=+k.currentTarget.value});$("button.clgBtn",a).on("click",()=>{var k=d.discardActiveObject().getObjects("borderedimage");let c=[];for(var b=0;b<k.length;b++)k[b].visible&&
c.push(k[b]);if(0!==c.length){c=lib.shuffleArray(c);k=d.getWidth();b=d.getHeight();var h=l[c.length],g=0;c.length==e&&(g=null===f?0:f+1,g>h.length-1&&(g=0));f=g;e=c.length;h=h[f];for(let q=0;q<h.length;q++){/(\d+),(\d+) (\d+)x(\d+)/.test(h[q]);var m=+RegExp.$1;var n=+RegExp.$2;var p=+RegExp.$3;var t=+RegExp.$4;m*=k/100;n*=b/100;p=Math.ceil(k/100*p);t=Math.ceil(b/100*t);a:{g=p>=t?"landscape":"portrait";for(let w=0;w<c.length;w++){const D=c[w];if("landscape"==g&&D.width>=D.height){g=w;break a}if("portrait"==
g&&D.height>D.height){g=w;break a}}g=0}img=c[g];c.splice(g,1);img.set({minimized:!1,left:m+U,top:n+U,width:p-2*U,height:t-2*U,scaleX:1,scaleY:1,angle:0,ppWidth:0,blurWidth:0,shape:"rectangle",skewX:0,skewY:0}).setCoords().setCenter()}d.requestRenderAll()}})},Fa=a=>{$(a).on("click",()=>{let f=d.discardActiveObject().getObjects("borderedimage");const e=[];for(let c=0;c<f.length;c++)f[c].minimized||e.push(f[c]);f=lib.shuffleArray(e);let l=f.length;1==l%2&&l--;if(0!==l){var k=c=>{const b=f[c],h=f[c+1],
g=b.getZindex(),m=h.getZindex();b.clone(n=>{b.set({src:h.src,left:h.left,top:h.top,width:h.width,height:h.height,scaleX:h.scaleX,scaleY:h.scaleY,skewX:h.skewX,skewY:h.skewY,shape:h.shape,angle:h.angle,ppWidth:h.ppWidth,ppColor:h.ppColor,blurWidth:h.blurWidth,minimized:h.minimized,selected:!1}).setCoords().setCenter();b.moveTo(m);h.set({src:n.src,left:n.left,top:n.top,width:n.width,height:n.height,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,shape:n.shape,angle:n.angle,ppWidth:n.ppWidth,
ppColor:n.ppColor,blurWidth:n.blurWidth,minimized:n.minimized,selected:!1}).setCoords().setCenter();h.moveTo(g);c+2<l?k(c+2):d.requestRenderAll().fire("selection:zindex")})};k(0)}})},Ga=()=>{T=!0;da.option("disabled",!0);let a=null,f=null;d.discardActiveObject().requestRenderAll();d.selection=!1;d.hoverCursor="pointer";d.forEachObject(c=>{c.hasControls=c.hasBorders=!1;c.lockMovementX=c.lockMovementY=!0;"borderedimage"!=c.type&&c.visible&&c.set({swapInvisible:!0,visible:!1})});const e=$("<div>").css({position:"fixed",
top:0,left:0,width:"100%",height:"100%",zIndex:1E3,backgroundColor:"rgba(0,0,0,.7)"}).appendTo("body");$("#canvasContainer").css("z-index",1001);const l=$('<div id="swapImgs">').html(lib.word(1216)+'&nbsp;<span class="help"></span>').prependTo("#statusBar");$('<button class="btn btn-sm btn-danger">').attr("id","closeBtn").css("margin-left","auto").html(lib.word(1236)).on("click",()=>{d.selection=!0;d.hoverCursor="move";d.forEachObject(c=>{c.hasControls=c.hasBorders=!0;c.lockMovementX=c.lockMovementY=
!1;c.set("selected",!1);c.swapInvisible&&c.set({swapInvisible:!1,visible:!0})});e.add(l).remove();$("#canvasContainer").css("z-index","auto");d.off("selection:created",k);d.off("selection:updated",k);d.discardActiveObject().requestRenderAll();T=!1;da.option("disabled",!1);requestAnimationFrame(()=>{d.fire("selection:zindex")})}).appendTo(l);const k=()=>{if(!a||!f){var c=d.getActiveObject();if("borderedimage"==c.type)if(c.set("selected",!0),null===a)a=c,$(".help",l).html(lib.word(1217));else if(null!==
a&&null===f){f=c;$(".help",l).html(lib.word(1218));const b=a.getZindex(),h=f.getZindex();a.clone(g=>{setTimeout(()=>{a.set({src:c.src,left:c.left,top:c.top,width:c.width,height:c.height,scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,shape:c.shape,angle:c.angle,ppWidth:c.ppWidth,ppColor:c.ppColor,blurWidth:c.blurWidth,minimized:c.minimized,selected:!1}).setCoords().setCenter();a.moveTo(h);f.set({src:g.src,left:g.left,top:g.top,width:g.width,height:g.height,shape:g.shape,scaleX:g.scaleX,
scaleY:g.scaleY,skewX:g.skewX,skewY:g.skewY,angle:g.angle,ppWidth:g.ppWidth,ppColor:g.ppColor,blurWidth:g.blurWidth,minimized:g.minimized,selected:!1}).setCoords().setCenter();f.moveTo(b);d.discardActiveObject().requestRenderAll();a=f=null;$(".help",l).empty()},250)})}}};d.on({"selection:created":k,"selection:updated":k})},Ha=()=>{var a=ModalManager.openWindow({title:lib.word(1221),closeFn:B,scrollable:!0,buttons:{close:!0,reset:{label:lib.word(1040),className:"btn-danger",callback:()=>{z.last=null;
for(let g=0;g<e.length;g++)e[g].reset();d.requestRenderAll()}}}}),f=d.discardActiveObject().getObjects("borderedimage");let e=[];for(var l=0;l<f.length;l++)f[l].visible&&e.push(f[l]);const k=d.getWidth(),c=d.getHeight();f=[];let b=[];a.append("<p>"+lib.word(1222,'<span class="badge badge-dark">'+e.length+"</span>")+"</p>");a=$('<div class="row">').appendTo(a);const h=g=>{A(!0,lib.word(1223));z.last=g;d.discardActiveObject().requestRenderAll();g=z.templates[g];var m=z.baseResolution.split("x"),n=k/
m[0],p=c/m[1];e=lib.shuffleArray(e);for(m=0;m<e.length;m++){var t=e[m];t.set("minimized",!1);if(!g.imgs[m])break;var q=g.imgs[m];t.set({left:q.x*n,top:q.y*p,scaleX:1,scaleY:1,width:q.w*n,height:q.h*p,angle:void 0===q.a?0:q.a,ppWidth:void 0===q.p?10:q.p,ppColor:void 0===q.c?"#fff":q.c,blurWidth:void 0===q.b?0:q.b,shape:void 0===q.s?"rectangle":q.s,skewX:void 0===q.skx?0:q.skx,skewY:void 0===q.sky?0:q.sky}).setCoords().setCenter();d.bringToFront(t)}n=g.imgs.length-e.length;p=e.length-m;t=1>=e.length-
m?0:(k-50)/(e.length-m-1);for(q=0;m<e.length;m++,q++){const w=e[m];w.set({minimized:!0,left:q*t,top:0,scaleX:1,scaleY:1,width:50,height:50,angle:0,ppWidth:0,blurWidth:0,shape:"rectangle",skewX:0,skewY:0}).setCoords().setCenter();d.bringToFront(w)}d.setBackgroundColor(g.bgc,()=>{d.requestRenderAll()});g.bg&&fabric.Image.fromURL(g.bg,w=>{w.scaleX=k/w.width;w.scaleY=c/w.height;d.setBackgroundImage(w);d.requestRenderAll()});g="";0<n&&(g=lib.word(1===n?1227:1224,n));0<p&&(g=lib.word(1===p?1228:1225,p,
"bootbox.hideAll();$('#swapBtn').click();return false"));A(!1);""!=g?S.html('<div style="color:red;margin-top:3px" onclick="$(this).remove()"><b>'+lib.word(1086)+"</b>: "+g+"</div>"):$(">div",S).remove()};null!==z.last&&b.push({nr:z.last,tmpl:z.templates[z.last]});for(l=0;l<z.templates.length;l++)l!==z.last&&(z.templates[l].imgs.length===e.length?b.push({nr:l,tmpl:z.templates[l]}):f.push({nr:l,tmpl:z.templates[l]}));f.sort((g,m)=>g.tmpl.length<m.tmpl.length?-1:g.tmpl.length>m.tmpl.length?1:0);b=b.concat(f);
a=$('<div class="images">').appendTo(a);for(let g=0;g<b.length;g++)a.append($('<div class="image'+(b[g].nr==z.last?" active":"")+'">').css("min-height","120px").attr("title",lib.word(1226)+" "+b[g].nr).append($('<img loading="lazy">').attr("src","/pics/templates/"+z.aspect+"/"+b[g].nr+".jpg")).append('<span class="badge badge-dark">'+b[g].tmpl.imgs.length+"</span>").on("click",()=>{h(b[g].nr);B()}))},Ia=()=>{ModalManager.openWindow({scrollable:!0,title:lib.word(2E3),closeFn:B,buttons:{close:!0}}).attr("id",
"bgPicker").load("/bgpicker/?v="+ZMprops.version,()=>{BGpicker.init(d.getElement(),a=>{a instanceof HTMLImageElement?fabric.Image.fromObject(a,f=>{f.scaleX=d.width/f.width;f.scaleY=d.height/f.height;d.setBackgroundImage(f);d.requestRenderAll()}):(d.backgroundImage=0,d.setBackgroundColor(a,()=>{d.requestRenderAll()}))})})},Ja=a=>{a=$(a);$("<div>",{"class":"dropdown-item"}).html(lib.word(1095)).on("click",()=>{location.href="/shapeCollage/"}).appendTo(a);$("<div>",{"class":"dropdown-divider"}).appendTo(a);
$("<div>",{"class":"dropdown-item needObject"}).html(lib.word(1087)+' <iconify-icon icon="whh:sdvideo"></iconify-icon>').on("click",()=>{ha(!1)}).appendTo(a);$("<div>",{"class":"dropdown-item needObject"}).html(lib.word(1087)+' <iconify-icon icon="whh:hdvideo"></iconify-icon>').on("click",()=>{ha(!0)}).appendTo(a);$("<div>",{"class":"dropdown-item"}).html(lib.word(1139)+' <iconify-icon icon="fa6-brands:facebook"></iconify-icon> <iconify-icon icon="fa6-brands:x-twitter"></iconify-icon>').on("click",
()=>{ya()}).appendTo(a);$("<div>",{"class":"dropdown-item needObject"}).html(lib.word(1150)+' <iconify-icon icon="mdi:printer"></iconify-icon>').on("click",()=>{qa()}).appendTo(a);$("<div>",{"class":"dropdown-divider"}).appendTo(a);$("<div>",{"class":"dropdown-item"}).html(lib.word(1138)+" (.clg)").on("click",()=>{$("<input>",{type:"file",accept:".clg"}).on("change",f=>{na(f.target.files[0])}).click()}).appendTo(a);$("<div>",{"class":"dropdown-item needObject"}).html(lib.word(1137)+" (.clg)").on("click",
()=>{Ba()}).appendTo(a);$("<div>",{"class":"dropdown-divider"}).appendTo(a);$("<div>",{"class":"dropdown-item"}).html(lib.word(1148)).on("click",()=>{Ia()}).appendTo(a);$("<div>",{"class":"dropdown-item"}).html(lib.word(1149)).on("click",()=>{wa()}).appendTo(a);$("<div>",{"class":"dropdown-item"}).html(lib.word(1153)).on("click",()=>{za()}).appendTo(a);$("<div>",{"class":"dropdown-divider"}).appendTo(a);$("<div>",{"class":"dropdown-item needObject"}).html(lib.word(1152)).on("click",()=>{xa()}).appendTo(a);
$("<div>",{"class":"dropdown-divider"}).appendTo(a);$("<div>",{"class":"dropdown-item"}).html(lib.word(1041)).on("click",()=>{Page.showWelcome()}).appendTo(a)},Ka=()=>{let a=!1,f;const e=$("#layers tbody"),l={};$("#layers").one("mouseenter",()=>{$("#layers").tooltip("show")}).one("mouseleave",()=>{$("#layers").tooltip("hide")});const k=()=>{if(!a){e.empty();var c=d.getActiveObject(),b=d.getObjects();f=b.length;for(let g=f-1;0<=g;g--){const m=b[g];var h=m.getScaledWidth();const n=m.getScaledHeight();
m.visible?(h=m.toCanvasElement({multiplier:Math.min(75/h,50/n),withoutTransform:!1}),l[m.uid]=h):h=l[m.uid];e.append($('<tr class="'+(c===m?"active":"")+'">').append('<td class="opts"><iconify-icon class="visibility ptr" icon="mdi:'+(m.visible?"eye":"eye-off")+'" inline></iconify-icon></td>',$('<td class="img">').append(h)).data("object",m))}}};d.on({"selection:zindex":k,"selection:created":k,"selection:updated":k,"selection:cleared":k,"object:added":k,"object:modified":k});e.on("mousedown","tr",
({currentTarget:c})=>{a=!0;$("tr.active",e).removeClass("active");c=$(c).addClass("active");d.setActiveObject(c.data("object")).requestRenderAll();requestAnimationFrame(()=>{a=!1})}).on("dblclick","tr",({currentTarget:c})=>{T||(c=$(c).data("object"),"borderedimage"==c.type?H(c,"shape&border"):"i-text"==c.type&&Z(c))}).on("click",".visibility",({currentTarget:c})=>{const b=$(c).closest("td").closest("tr").data("object");$(c).replaceWith('<iconify-icon class="visibility ptr" icon="mdi:'+(b.visible?
"eye-off":"eye")+'" inline></iconify-icon>');b.set("visible",!b.visible);b.visible||d.discardActiveObject();d.requestRenderAll()});return Sortable.create(e[0],{draggable:"tr",handle:"tr",onUpdate:c=>{$("tr",e).each((b,h)=>{$(h).data("object").moveTo(f-b-1)})}})};return{init:()=>{navigator.serviceWorker&&navigator.serviceWorker.register&&navigator.serviceWorker.register("/sw.js",{scope:"/"});A(!0,"Loading...");aa&&$(".shortcuts").hide();S=$("#objectMenu");ca=$("#objectProps");const a=$("#dragTip");
$("body").FileDropper({multiple:!0,isDisabled:()=>$("#toolControls").is(":visible"),onDrop:(b,h)=>{a.hide();oa(b)}});aa||$('[data-toggle="tooltip"]').tooltip();const f={polaroid1:{url:"/pics/frames/polaroid1.png",width:1252,height:1513,img:null,gap:{x:83,y:91,w:1084,h:1110}},polaroid2:{url:"/pics/frames/polaroid2.png",width:1674,height:1912,img:null,gap:{x:181,y:143,w:1230,h:1298}},polaroid3:{url:"/pics/frames/polaroid3.png",width:1163,height:1393,img:null,gap:{x:61,y:63,w:1008,h:1010}},polaroid4:{url:"/pics/frames/polaroid4.png",
width:1285,height:1597,img:null,gap:{x:104,y:168,w:1060,h:1060}},polaroid5:{url:"/pics/frames/polaroid5.png",width:815,height:924,img:null,gap:{x:51,y:111,w:708,h:636}},polaroid6:{url:"/pics/frames/polaroid6.png",width:538,height:640,img:null,gap:{x:31,y:33,w:470,h:480}},polaroid7:{url:"/pics/frames/polaroid7.png",width:412,height:517,img:null,gap:{x:26,y:28,w:359,h:369}},film1:{url:"/pics/frames/film1.png",width:1112,height:1024,img:null,gap:{x:27,y:159,w:1057,h:705}},airmail:{url:"/pics/frames/airmail.png",
width:1800,height:1080,img:null,gap:{x:73,y:58,w:1654,h:976}},wood1:{url:"/pics/frames/wood1.png",width:1040,height:876,img:null,gap:{x:65,y:61,w:911,h:750}},wood2:{url:"/pics/frames/wood2.png",width:1300,height:1E3,img:null,gap:{x:138,y:142,w:1023,h:716}},"frame-h":{url:"/pics/frames/frame-h.png",width:1280,height:960,img:null,gap:{x:60,y:60,w:1156,h:836}},"frame-v":{url:"/pics/frames/frame-v.png",width:960,height:1280,img:null,gap:{x:75,y:75,w:811,h:1131}},"frame-bw":{url:"/pics/frames/frame-bw.png",
width:1280,height:967,img:null,gap:{x:115,y:116,w:1047,h:737}}};let e=Object.keys(f).length;for(let b in f){let h=new Image;h.onload=()=>{f[b].img=h;if(0==--e){fabric.Borderedimage.prototype.set({frames:f});A(!1);let g=lib.word(1077,'<button class="btn btn-outline-light">'+lib.word(1046)+"&hellip;</button>");g+='<div class="accept">'+lib.word(1096)+"</div>";a.html("<div>"+g+"</div>").find("button").on("click",()=>{$("#addImgsBtn").click()});a.show().addClass("bounceInDown")}};h.src=f[b].url}d=new fabric.Canvas($("#fabricCanvas")[0],
{preserveObjectStacking:!0,stopContextMenu:!0,centeredKey:!1});var l=d.getWidth(),k=d.getHeight();L({fileName:"collage.jpg",width:l,height:k,zoom:Math.min(1,$("#canvases").width()/l)});la(l,k);d.on({"selection:created":()=>{const b=d.getActiveObject();x(b,!0);pa(b)},"selection:updated":b=>{b=d.getActiveObject();$(document).trigger("selection:updated",[b]);b&&(x(b,!0),pa(b))},"selection:cleared":b=>{B();x(null,!0)},"object:moving":b=>{x(b.target)},"object:scaling":b=>{x(b.target)},"object:rotating":b=>
{x(b.target)},"object:rotated":b=>{x(b.target)},"mouse:dblclick":b=>{b.target&&!T&&("borderedimage"==b.target.type?H(b.target,"shape&border"):"i-text"==b.target.type&&Z(b.target))},"object:added":b=>{x(null,!0)}});Mousetrap.addKeycodes({173:"-"});Mousetrap.bind("n o l i m i t",()=>{$("#autoCollageBtnGrp,#tmplBtn").remove();I=999;bootbox.alert("Limit of 25 photos removed. Proceed at your own risk!")}).bind("esc",()=>{d.discardActiveObject().requestRenderAll();$("#closeBtn").click();return!1}).bind("o",
()=>{const b=d.getActiveObject();b&&b.changeOrientation()}).bind("x",()=>{const b=d.getActiveObject();b&&H(b,"filters")}).bind("z",()=>{const b=d.getActiveObject();b&&H(b,"zoom&pan")}).bind("h",()=>{const b=d.getActiveObject();b&&(b.centerH().setCoords(),x(b))}).bind("v",()=>{const b=d.getActiveObject();b&&(b.centerV().setCoords(),x(b))}).bind("shift+h",()=>{const b=d.getActiveObject();b&&(b.toggle("flipX").rotate(360-b.angle).setCoords(),d.requestRenderAll(),x(b))}).bind("shift+v",()=>{const b=d.getActiveObject();
b&&(b.toggle("flipY").rotate(360-b.angle).setCoords(),d.requestRenderAll(),x(b))}).bind("f",()=>{const b=d.getActiveObject();b&&(d.bringForward(b),d.fire("selection:zindex"))}).bind("shift+f",()=>{const b=d.getActiveObject();b&&(d.bringToFront(b),d.fire("selection:zindex"))}).bind("b",()=>{const b=d.getActiveObject();b&&(d.sendBackwards(b),d.fire("selection:zindex"))}).bind("shift+b",()=>{const b=d.getActiveObject();b&&(d.sendToBack(b),d.fire("selection:zindex"))}).bind("mod+a",b=>{d.discardActiveObject();
const h=new fabric.ActiveSelection(d.getObjects(),{canvas:d});d.setActiveObject(h);d.requestRenderAll();b.preventDefault()}).bind("mod+c",()=>{fa(1)&&d.cloneObject()}).bind(["del","backspace"],()=>{const b=d.getActiveObject();b&&ma(b)}).bind("r",()=>{const b=d.getActiveObject();b&&d.apply(b,h=>{h.reset()})}).bind("s",()=>{const b=d.getActiveObject();b&&b.exportPNG()}).bind("p",()=>{const b=d.getActiveObject();b&&d.apply(b,h=>{0<h.ppWidth?h.set("ppWidth",0):h.set({ppWidth:10,ppColor:"#fff"})}).requestRenderAll()}).bind("shift+d",
b=>{(b=d.getActiveObject())&&d.apply(b,h=>{h.set({width:2*h.width,height:2*h.height}).setCoords()})}).bind("d",b=>{(b=d.getActiveObject())&&d.apply(b,h=>{h.set({width:h.width/2,height:h.height/2}).setCoords()})}).bind("m",()=>{const b=d.getActiveObject();b&&b.deMinimize()}).bind("a",()=>{const b=d.getActiveObject();b&&H(b,"transparency")}).bind("mod+s",()=>{ha(!1);return!1}).bind("mod+p",()=>{qa();return!1}).bind("-",()=>{d.modifyObject("zoomBy-z",-4);return!1}).bind("+",()=>{d.modifyObject("zoomBy-z",
4);return!1}).bind("alt+left",()=>{d.modifyObject("zoomBy-x",5);return!1}).bind("mod+left",()=>{x(d.modifyObject("angle",-1));return!1}).bind("left",()=>{x(d.modifyObject("left",-1));return!1}).bind("alt+right",()=>{d.modifyObject("zoomBy-x",-5);return!1}).bind("mod+right",()=>{x(d.modifyObject("angle",1));return!1}).bind("right",()=>{x(d.modifyObject("left",1));return!1}).bind("alt+up",()=>{d.modifyObject("zoomBy-y",5);return!1}).bind("up",()=>{x(d.modifyObject("top",-1));return!1}).bind("alt+down",
()=>{d.modifyObject("zoomBy-y",-5);return!1}).bind("down",()=>{x(d.modifyObject("top",1));return!1});x(null,!0);Ja("#collageDropdown");Da("#gridDropdown");Ea("#autoCollageBtnGrp");Fa("#shuffleCollageBtn");Aa("#addStickerBtn");da=Ka();$(".needObject").addClass("disabled").find("a").addClass("disabled");$("#fsBtn").on("click",()=>{screenfull.isEnabled&&screenfull.toggle()});$("#previewBtn").on("click",()=>{P(!1);$("<div>",{"class":"preview"}).append(d.toCanvasElement()).on("click",({currentTarget:b})=>
{P(!0);$(b).remove()}).appendTo("body")});$("#tmplBtn").on("click",()=>{Ha()});$("#addTxtBtn").on("click",()=>{const b=new fabric.IText(lib.word(1202),{left:lib.getRandomInt(50,d.width/2),top:lib.getRandomInt(0,200),fontSize:60,fontFamily:"Arial",fontWeight:400,fill:"#000",strokeWidth:0,stroke:"#fff"});d.add(b);d.setActiveObject(b);N=!0});$("#swapBtn").on("click",()=>{Ga()});const c=$("<input>",{type:"file",accept:".png,.gif,.jpg,.jpeg,.webp,.avif,.heic,.heif",multiple:!0}).on("change",b=>{oa(b.target.files)});
$("#addImgsBtn").on("click",()=>{c.click()});$(document).on("click touchstart",b=>{0===$(b.target).closest(a).length&&a.hide()});$(window).on("beforeunload",()=>{if(N)return lib.word(1156)}).on("resize",()=>{L({zoom:Math.min(1,$("#canvases").width()/C)})});l=new URLSearchParams(window.location.search);l.has("size")&&(l=l.get("size"),/^(\d+)x(\d+)$/.test(l)&&(l=+RegExp.$1,k=+RegExp.$2,2E3<l&&(l=2E3),2E3<k&&(k=2E3),L({width:l,height:k,zoom:Math.min(1,$("#canvases").width()/l)})))},BlueImpLoadImage:ba,
setTemplates:(a,f,e)=>{z={aspect:a,baseResolution:f,templates:e,last:null}},getFabricCanvas:()=>d}})();

